(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,43113,27056],{653250:(e,t,a)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=a(667294),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=i.useState,r=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!n(e,a)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),i=l({inst:{value:a,getSnapshot:t}}),n=i[0].inst,u=i[1];return s(function(){n.value=a,n.getSnapshot=t,c(n)&&u({inst:n})},[e,a,t]),r(function(){return c(n)&&u({inst:n}),e(function(){c(n)&&u({inst:n})})},[e]),o(a),a};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},950139:(e,t,a)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=a(667294),n=a(61688),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useSyncExternalStore,s=i.useRef,o=i.useEffect,c=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,i,n){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var m=r(e,(d=c(function(){function e(e){if(!o){if(o=!0,r=e,e=i(e),void 0!==n&&p.hasValue){var t=p.value;if(n(t,e))return s=t}return s=e}if(t=s,l(r,e))return t;var a=i(e);return void 0!==n&&n(t,a)?t:(r=e,s=a)}var r,s,o=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,i,n]))[0],d[1]);return o(function(){p.hasValue=!0,p.value=m},[m]),u(m),m}},61688:(e,t,a)=>{"use strict";e.exports=a(653250)},552798:(e,t,a)=>{"use strict";e.exports=a(950139)},542473:e=>{"use strict";e.exports=function(){}},453364:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="610a35d46510240eb58e262c1909310c";let l=n},516658:(e,t,a)=>{"use strict";var i,n,l;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="833cd5d58bc1ac105444aa923e882675";let s=r},394671:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};i.hash="0076d9d7f3a603762037e2b4fc289da9";let n=i},163431:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGrid_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};i.hash="0e18466f59f891e9ea12d1c056d9f627";let n=i},247821:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="3a8409077905af94eb39568e4a5a57fc";let n=i},853512:(e,t,a)=>{"use strict";var i,n,l,r,s,o,c,u,d,p,m,h,g,_,y,f,v,x,b,S,k,w,P,T;a.r(t),a.d(t,{default:()=>I});let E=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},u={alias:"imageOrig",args:o=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},p={alias:"image736x",args:d=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"736x")'},h={alias:"image564x",args:m=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},_={alias:"image474x",args:g=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"474x")'},f={alias:"image236x",args:y=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"236x")'},v={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},x={alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[s,{alias:"imageOrig",args:o,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"orig")'},{alias:"image736x",args:d,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"736x")'},{alias:"image564x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},{alias:"image474x",args:g,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"474x")'},{alias:"image236x",args:y,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"236x")'}],storageKey:null},k={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:S=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:"additionalImageOrig",args:o,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b=[s,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:c,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"236x")'}],storageKey:null}],storageKey:null},w={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:S,storageKey:null},P={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,u,p,h,_,f,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[v,x],storageKey:null},k,w,P],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,u,p,h,_,f,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[v,x,T={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},k,w,P,T],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"67eedd3e1834ee184411ff81c5eeea7cf9dc9ec53a5e099459966ce5369828ee",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});E.hash="1647166e8b02809a5f8ccfca2dc5019a";let I=E;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(E.default||E)},990563:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="70b3aa3bf525e76f3ccd63bc1003fe8a";let n=i},567637:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};n.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=n},75306:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="d3343cbed0df46adae9a256f0fc6f167";let n=i},900228:(e,t,a)=>{"use strict";var i,n,l,r,s,o,c,u,d,p,m,h,g,_,y,f,v,x,b,S,k,w,P;a.r(t),a.d(t,{default:()=>E});let T=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},u={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},m={alias:"imageOrig",args:d=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},g={alias:"image736x",args:h=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"736x")'},y={alias:"image564x",args:_=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"564x")'},v={alias:"image474x",args:f=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"474x")'},b={alias:"image236x",args:x=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"236x")'},w={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:k=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"additionalImageOrig",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S=[s,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:p,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:h,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:x,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,o,c,u,m,g,y,v,b,w,P={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:k,storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,o,c,u,m,g,y,v,b,w,P,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c332f73995f8391ce4dfe3a30b03b24486b095d386805c50b8e3281506519216",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}});T.hash="7b85bceb87ab7e53ddca6d802c98eed3";let E=T;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(T.default||T)},237583:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="395dd0c72ba79e629fa9cf482a4b73d6";let n=i},23136:(e,t,a)=>{"use strict";var i,n,l,r,s,o,c,u,d,p,m,h,g,_,y,f,v,x,b,S,k,w,P,T,E,I,C,j,A,F,R,O,D,L,M,Z,N,K,z,H,U,V,$,G,B,W,Y,q,Q,X,J,ee,et,ea;a.r(t),a.d(t,{default:()=>en});let ei=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},v={alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[y={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},x={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},P=[b={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],T=[l,b,S,k,w],E={alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},O={alias:"imageOrig",args:C=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R=[j={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},f,A={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],storageKey:'images(spec:"orig")'},L={alias:"image564x",args:D=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"564x")'},Z={alias:"image736x",args:M=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"736x")'},K={alias:"image474x",args:N=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"474x")'},H={alias:"image236x",args:z=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"236x")'},U={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},V={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null}],storageKey:null},G={alias:"additionalImageOrig",args:C,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$=[r,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[F,f,j],storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},Q={alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null},X={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[s,u,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[y,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[y,A],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[y,V,G,B={alias:"additionalImage564x",args:D,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"564x")'},W={alias:"additionalImage736x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"736x")'},Y={alias:"additionalImage474x",args:N,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"474x")'},q={alias:"additionalImage236x",args:z,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[r,Q],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},J={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[y,V,G,B,W,Y,q,{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[Q,r],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},et=[b,S,k,w,ee={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],ea=[l,b,S,k,w,ee],{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,o,c,u,d,p,m,h,g,_,v,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[x],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:P,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:T,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:T,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:T,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,E,y,I,f],storageKey:null},O,L,Z,K,H,U,X,J],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,o,c,u,d,p,m,h,g,_,v,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[x,ee],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:et,storageKey:null},ee],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:et,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,E,y,I,f,ee],storageKey:null},O,L,Z,K,H,U,X,J,ee],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"5f09d38fcc19ea4defe9a2ced0ea73c23f12ec0bc0e6d4bd4f24974e35d6e8ea",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});ei.hash="41066749b18be6f77425904cd44e3d69";let en=ei;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(ei.default||ei)},903414:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedPinRepAuthDesktopPinRep_pin",selections:[{args:null,kind:"FragmentSpread",name:"PinRepWithImpressions_pin"}],type:"Pin",abstractKey:null};i.hash="000e24070b5df05da76d803775cb37e6";let n=i},700554:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRepDefaultPinRep_pin",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};i.hash="51f44b91a29d43c6d06785fcb846b61b";let n=i},770181:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedPinRepVariant_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnifiedPinRepAuthDesktopPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="7982b415980bdf92f7b9338cb5f6c539";let n=i},910982:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRep_pin",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"UnifiedPinRepDefaultPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="630f94c5c1fff86bdd3cb70e987c1fee";let n=i},982385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchProductFeedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="b69967adff40ae068eb5d3aad8f106f3";let n=i},290602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="9d37ca13b584492c1fba958c00317b73";let n=i},91856:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"}],type:"Pin",abstractKey:null};i.hash="ecc8a2a34b852db42ada7b81f966ef5a";let n=i},620254:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchUnifiedResourceContainer_pin"}],type:"Pin",abstractKey:null};i.hash="559409b5cdf594ceadec1100a8e980f8";let n=i},593390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchUnifiedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="7074039637fc6e2b8dd0bdad128d63c8";let n=i},73129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="120ad104e33b94ab10be1098dc10d74b";let n=i},467061:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};n.hash="3d7a6d04f923d00acfb2887f852aea16";let l=n},684824:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="4d2dba5ab4f3957f62edf10d66e5a060";let n=i},374963:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:i=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};n.hash="01a93671cde480baa2cfd8b781589acd";let l=n},77003:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};n.hash="b7ea441f2c20a68b323088ebe3847835";let l=n},706737:(e,t,a)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return a(925e3).Z}},892254:(e,t,a)=>{"use strict";a.d(t,{$:()=>u,r:()=>d});var i=a(667294),n=a(342513),l=a(321329),r=a(5859),s=a(494125),o=a(785893);let{Provider:c,useHook:u}=(0,n.Z)("PinRep");function d({children:e}){let{isAuthenticated:t}=(0,r.B)(),[a,n]=(0,i.useState)(!0),[u,d]=(0,i.useState)(!1),p=(0,l.Z)(1000069);(0,s.Z)(()=>{let e=async()=>{if(!t){n(!1);return}let e=await p.fetchAllExperiences();e&&e.payload&&e.payload.experiences?.[1000069]?.experience_id===500417&&e.payload.experiences?.[1000069]?.display_data.hide_footer?p.viewExperience(1000069,500417):n(!1),d(!0)};e()});let m=(0,i.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:u,hidePinRepFooter:a}),[u,a]);return(0,o.jsx)(c,{value:m,children:e})}},400119:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var i=a(667294),n=a(883119),l=a(195480),r=a(214877),s=a(549629),o=a(205841),c=a(140017),u=a(572345),d=a(561916),p=a(785893);function m({component:e,cropSource:t,fadeBottomEdge:a,filterOptions:l,filterType:s,handleFilterChange:m,maxContentHeight:h,paddingX:g,showVerifiedMerchants:_,uiType:y,viewParameter:f,viewType:v}){let x=(0,c.ZP)(),{logContextEvent:b}=(0,r.v)(),S=a=>{let i=l[a];b({aux_data:{commerce_data:JSON.stringify({filter_value:i.string_value??i.numeric_value??i.search_type,select:!i.checked,source:(0,d.Z)({cropSource:t,viewType:v})}),filter_type:s},component:e,event_type:101,view_parameter:f,view_type:v}),m(a)},[k,w]=(0,i.useState)(!1),P=(0,i.useRef)(null),T=(0,i.useCallback)(()=>{if(!a||!P.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:i}=P.current;w(t-e-i<10)},[a]);return(0,i.useEffect)(()=>{a&&T()}),(0,p.jsxs)(n.xu,{maxHeight:h||void 0,position:"relative",children:[(0,p.jsxs)(n.xu,{ref:P,maxHeight:h||void 0,onScroll:T,overflow:"auto",paddingX:g,children:["check-circles"===y&&l.map(({label:e,image_url:t,is_verified_merchant:a,checked:i},l)=>(0,p.jsx)(n.iP,{onTap:()=>S(l),children:(0,p.jsxs)(n.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(n.xu,{marginEnd:3,children:(0,p.jsx)(o.qE,{name:e,size:"sm",src:t})}),(0,p.jsxs)(n.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(n.xv,{children:e}),_&&a&&(0,p.jsx)(n.xu,{marginStart:1,children:(0,p.jsx)(u.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(n.xu,{"data-test-id":i?"option-selected":void 0,margin:-2,marginBottom:-3,marginTop:-3,children:(0,p.jsx)(n.hU,{accessibilityLabel:x._('Domain Filter Option', 'UnifiedFilter.MultiSelectFilter.domainFilterOptionAccessibilityLabel', 'Accessibility label for radio button of domain filter choices'),icon:i?"check-circle":"circle",iconColor:"darkGray",onClick:()=>S(l),size:"lg"})})]})},e)),"check-boxes"===y&&l.map(({label:e,image_url:t,is_verified_merchant:a,checked:i},l)=>(0,p.jsxs)(n.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(n.xu,{marginEnd:3,children:t?.startsWith("color_")?(0,p.jsx)(n.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{backgroundColor:t.split("_")[1]}},height:20,rounding:"circle",width:20}):(0,p.jsx)(o.qE,{name:e,size:"sm",src:t})}),(0,p.jsxs)(n.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(n.__,{htmlFor:`multi-select-filter--${e}`,children:(0,p.jsx)(n.xv,{children:e})}),_&&a&&(0,p.jsx)(n.xu,{marginStart:1,children:(0,p.jsx)(u.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(n.xu,{"data-test-id":i?"option-selected":void 0,margin:1,children:(0,p.jsx)(n.XZ,{checked:i,id:`multi-select-filter--${e}`,onChange:()=>S(l)})})]},e))]}),a&&(0,p.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:"linear-gradient(0deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)",pointerEvents:"none",transition:"opacity 0.1s",opacity:k?0:1}},"data-test-id":"multi-select-filter-fade-bottom-edge",height:30,position:"absolute",width:"100%"})]})}function h({children:e,filterOptions:t,filterType:a,title:s,viewLogData:o,viewParameter:u,viewType:d}){let{logContextEvent:m}=(0,r.v)(),h=(0,c.ZP)(),g=(0,l.Z)(),[_,y]=(0,i.useState)(!0),f=g?14325:13469;return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(n.xu,{marginBottom:2,children:(0,p.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(n.xv,{weight:"bold",children:s||h._('Sellers', 'UnifiedFilter.MultiSelectFilter.sellersHeaderText', 'ProductFilters.Domains.HeaderText')}),(0,p.jsx)(n.xu,{flex:"none",children:(0,p.jsx)(n.hU,{accessibilityLabel:h._('Domain filter', 'UnifiedFilter.MultiSelectFilter.domainFilterAccessibilityLabel', 'accessibility label for the icon button to open or close domain filter'),icon:_?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{y(!_),m({aux_data:{commerce_data:JSON.stringify({filter:_?"collapsed":"expanded"}),filter_type:a},component:f,element:g?13522:11547,event_type:101,view_parameter:u,view_type:d}),_||m(o)},size:"sm"})})]})}),_?e:(0,p.jsx)(n.xu,{width:"80%",children:(0,p.jsx)(n.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),i=a.length,n=0===i?t._('All', 'UnifiedFilter.MultiSelectFilter.allDomainsSelectedText', 'text indicates that no domain filter is currently applied for filtering'):`(${i}) ${a.map(e=>e.label).join(", ")}`;return n}(t,h)})})]})}function g({cropSource:e,fadeBottomEdge:t,filterOptions:a,filterType:i,handleFilterChange:n,isCollapsible:o,maxContentHeight:c,paddingX:u,showVerifiedMerchants:g,title:_,uiType:y,viewParameter:f,viewType:v}){let{logContextEvent:x}=(0,r.v)(),b=(0,l.Z)(),S=b?14325:13469,k={aux_data:{commerce_data:JSON.stringify({source:(0,d.Z)({cropSource:e,viewType:v})}),filter_type:i},component:S,event_type:13,view_parameter:f,view_type:v},w=(0,p.jsx)(m,{component:S,cropSource:e,fadeBottomEdge:t,filterOptions:a,filterType:i,handleFilterChange:t=>{let l=a[t];x({aux_data:{commerce_data:JSON.stringify({filter_value:l.string_value??l.numeric_value??l.search_type,select:!l.checked,source:(0,d.Z)({cropSource:e,viewType:v})}),filter_type:i},component:S,event_type:101,view_parameter:f,view_type:v}),n(t)},maxContentHeight:c,paddingX:u,showVerifiedMerchants:g,uiType:y,viewParameter:f,viewType:v});return(0,p.jsx)(s.Z,{log:k,children:o?(0,p.jsx)(h,{filterOptions:a,filterType:i,title:_,viewLogData:k,viewParameter:f,viewType:v,children:w}):w})}},955391:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var i=a(667294),n=a(883119),l=a(367295),r=a(306604),s=a(5859),o=a(785893);function c(e,t,a,i){let n=(0,r.c3)((0,r.$X)(e,!!t),a,!!t);return i&&(n=n.slice(0,-3)),n}function u({valueInMicroCurrency:e,requestContext:t,currencyCode:a,disableAutoFormatOnChange:s,hasFractionalCents:u,roundValue:d,onValueParsed:p,autoComplete:m,placeholder:h,errorMessage:g,id:_}){let y=a&&l.XD[a]||"",f="";if("number"==typeof e){let a=c(e,u,t.locale,d);f=`${y}${a}`}let[v,x]=(0,i.useState)(f);(0,i.useEffect)(()=>{if(!s&&null!=e&&""===v){let a=c(e,u,t.locale,d);x(a)}},[v,s,u,t,d,e]);let b=(e,a,i,n)=>{let l="";if(null==e)l="";else{let a=c(e,i,t.locale,n);l=`${y}${a}`}return l},S=()=>{let e;let a=(0,r.qq)(v,t.locale,!!u);e=""===v?null:Number.isNaN(a)?Number.MIN_VALUE:(0,r.y)(a,!!u);let i=b(e,v,!!u,d);x(i),p(e)};return(0,o.jsx)(n.nv,{autoComplete:m,errorMessage:g,id:_,onBlur:()=>{S()},onChange:({value:e})=>x(e),placeholder:h,size:"lg",value:v})}function d(e){return(0,o.jsx)(u,{...e,requestContext:(0,s.B)()})}var p=a(140017);function m({CustomMaxField:e,CustomMinField:t,handleMaxChange:a,handleMinChange:l,maxHeading:r,minHeading:s,max:c,min:u}){let d=(0,p.ZP)();return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)(n.kC,{direction:"row",children:[(0,o.jsx)(n.sg,{span:7,children:(0,o.jsx)(n.xv,{size:"200",children:s??d._('Min', 'rangeFilter.min', 'Minimum Range')})}),(0,o.jsx)(n.sg,{span:5,children:(0,o.jsx)(n.xv,{size:"200",children:r??d._('Max', 'rangeFilter.max', 'Maximum Range')})})]}),(0,o.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",marginTop:2,children:[(0,o.jsx)(n.sg,{span:5,children:t?(0,o.jsx)(t,{value:u}):(0,o.jsx)(n.Ki,{autoComplete:"off",id:"min",onChange:({value:e})=>{l&&l(e)},size:"lg",value:u})}),(0,o.jsx)(n.sg,{span:2,children:(0,o.jsx)(n.xv,{align:"center",color:"subtle",size:"200",children:d._('to', 'Min to Max', 'Min to Max')})}),(0,o.jsx)(n.sg,{span:5,children:e?(0,o.jsx)(e,{value:c}):(0,o.jsx)(n.Ki,{autoComplete:"off",id:"max",onChange:({value:e})=>{a&&a(e)},size:"lg",value:c})})]})]})}var h=a(195480),g=a(214877),_=a(494125),y=a(750701),f=a(561916);function v({children:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:r,filterType:s,logViewEvent:c,maxPrice:u,minPrice:d,title:m,viewParameter:_,viewType:y}){let{logContextEvent:f}=(0,g.v)(),v=(0,p.ZP)(),x=(0,h.Z)(),b=l.XD[t]||"",[S,k]=(0,i.useState)(!0),w=x?14324:13468;return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,o.jsx)(n.xu,{"data-test-id":"price-filter-label",children:(0,o.jsx)(n.xv,{weight:"bold",children:m||v._('Price', 'Header of product price filter', 'Header of product price filter')})}),(0,o.jsx)(n.xu,{flex:"none",children:(0,o.jsx)(n.hU,{accessibilityLabel:v._('Price filter', 'accessibility label for the icon button to open or close price filter', 'accessibility label for the icon button to open or close price filter'),icon:S?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{k(!S),f({event_type:101,component:w,element:x?13522:11547,view_type:y,view_parameter:_,aux_data:{commerce_data:JSON.stringify({filter:S?"collapsed":"expanded"}),filter_type:s}}),S||c()},size:"sm"})})]}),S?e:(0,o.jsx)(n.xv,{color:"subtle",size:"200",children:-1===u&&-1===d?v._('All', 'text indicates that no price filter is currently applied for filtering', 'text indicates that no price filter is currently applied for filtering'):-1===u?`${b}${d} – ${b}${Math.ceil(a)}+`:-1===d?`${b}${Math.floor(r)} – ${b}${u}`:`${b}${d} – ${b}${u}`})]})}function x({cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:i,disableAutoFormatOnChange:r,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,maxPrice:h,minPrice:g,onRangeChange:_,uiType:f}){let v=(0,p.ZP)(),x=l.XD[t]||"",b=Math.ceil(a),S=Math.floor(i),k=-1===g&&-1===h;return(0,o.jsxs)(n.xu,{paddingY:4,children:["slider"===f&&(0,o.jsx)(y.Z,{cropSource:e,currencyType:t,handlePriceChange:([e,t])=>{_?.(),e!==g&&c(e),t!==h&&s(t)},instructions:u||"",lowerBound:i,maxPrice:h,minPrice:g,upperBound:a}),"number-boxes"===f&&(0,o.jsx)(m,{CustomMaxField:({value:e})=>(0,o.jsx)(n.xu,{"data-test-id":"max-price-filter",children:(0,o.jsx)(d,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:r,id:"max_price",onValueParsed:e=>{s((e||0)/1e6)},placeholder:`${x}${b}`,roundValue:!0,valueInMicroCurrency:k?null:e})}),CustomMinField:({value:e})=>(0,o.jsx)(n.xu,{"data-test-id":"min-price-filter",children:(0,o.jsx)(d,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:r,id:"min_price",onValueParsed:e=>{c((e||0)/1e6)},placeholder:`${x}${S}`,roundValue:!0,valueInMicroCurrency:k?null:e})}),max:-1===h?1e6*b:1e6*h,maxHeading:v._('Max', 'Maximum Price', 'Maximum Price'),min:-1===g?1e6*S:1e6*g,minHeading:v._('Min', 'Minimum Price', 'Minimum Price')})]})}function b({cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:l,filterType:r,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,isCollapsible:d,maxPrice:p,minPrice:m,onRangeChange:y,title:b,uiType:S,viewParameter:k,viewType:w}){let{logContextEvent:P}=(0,g.v)(),T=(0,h.Z)(),E=()=>{P({event_type:13,component:T?14324:13468,view_type:w,view_parameter:k,aux_data:{commerce_data:JSON.stringify({source:(0,f.Z)({cropSource:e,viewType:w})}),filter_type:r}})};return(0,_.Z)(()=>{E()}),(0,o.jsx)(i.Fragment,{children:d?(0,o.jsx)(v,{currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,filterType:r,logViewEvent:E,maxPrice:p,minPrice:m,title:b,viewParameter:k,viewType:w,children:(0,o.jsx)(x,{cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,isCollapsible:!0,maxPrice:p,minPrice:m,onRangeChange:y,uiType:S})}):(0,o.jsx)(x,{cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:c,instructions:u,maxPrice:p,minPrice:m,onRangeChange:y,uiType:S})})}},306320:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,v:()=>n});let i=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},195480:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(340523),n=a(149722);function l(){let{isAuth:e,country:t}=(0,n.Z)(),{checkExperiment:a}=(0,i.F)();if(!e)return!1;let{anyEnabled:l}=a("web_search_unified_content_filters_international");return"US"===t||l}},160408:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(667294),n=a(883119),l=a(140017),r=a(340523),s=a(5859),o=a(785893);function c({collapsed:e,displayViewState:t,forceTappableHeader:a,headerHeight:c,headerPaddingRight:u,headerPreview:d,heading:p,onClick:m,showArrow:h}){let g=(0,l.ZP)(),{checkExperiment:_}=(0,r.F)(),{isAuthenticated:y}=(0,s.B)(),f=y?_("auth_closeup_redesign").anyEnabled:_("unauth_closeup_redesign").anyEnabled;return(0,o.jsx)(i.Fragment,{children:a||null!==t?(0,o.jsx)(n.iP,{onTap:m,children:(0,o.jsxs)(n.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:c,justifyContent:"between",children:[(0,o.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:f?"300":"400",children:p}),(0,o.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingRight:u}},direction:"row",display:"flex",children:[e&&d,h&&(0,o.jsx)(n.xu,{alignItems:"center","data-test-id":"collapse-button",display:"flex",justifyContent:"center",marginStart:d?2:0,width:48,children:(0,o.jsx)(n.JO,{accessibilityLabel:g._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:e?"arrow-down":"arrow-up"})})]})]})}):(0,o.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:"400",children:p})})}},230556:(e,t,a)=>{"use strict";a.d(t,{n:()=>i});let i="300"},249123:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(667294),n=a(883119),l=a(230556),r=a(696534),s=a(140017),o=a(785893);function c({children:e,maxLines:t=10}){let a=(0,i.useRef)(null),[c,u]=(0,i.useState)({isFirstLoad:!0,isTruncated:!1}),d=(0,s.ZP)(),p=(0,r.vs)(),m=p?"#111":"#fff",{isFirstLoad:h,isTruncated:g}=c;return(0,i.useEffect)(()=>{var e;h&&a.current&&((e=a.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&u({isFirstLoad:!1,isTruncated:!0})},[h,g]),(0,o.jsxs)(n.xu,{"data-test-id":"truncated-text",position:"relative",children:[(0,o.jsx)(n.xv,{ref:a,inline:!0,lineClamp:h||g?t:0,children:e}),g&&(0,o.jsx)(n.xu,{bottom:!0,display:"block",position:"absolute",width:"100%",children:(0,o.jsxs)(n.kC,{flex:"grow",children:[(0,o.jsx)(n.xu,{display:"inlineBlock",height:"14px",width:"120px"}),(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:15,background:`linear-gradient(90deg, transparent 0%, ${m} 15%)`}},"data-test-id":"more-button",display:"inlineBlock",children:(0,o.jsx)(n.iP,{fullWidth:!1,onTap:()=>u({...c,isTruncated:!1}),children:(0,o.jsx)(n.xv,{inline:!0,size:l.n,weight:"bold",children:d._(' \u2026 more', 'closeup.TruncatedTextContent.moreLabel', 'Expand content label')})})}),(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{background:m}},display:"inlineBlock",flex:"grow"})]})})]})}},172618:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(616550),n=a(883119),l=a(214877),r=a(901855),s=a(140017),o=a(785893);function c({arrowType:e,pinId:t,viewParameter:a,viewType:c}){let u=(0,s.ZP)(),d=(0,i.k6)(),{previous:p}=(0,r.Hv)(),{logContextEvent:m}=(0,l.v)();return(0,o.jsx)(n.xu,{"data-test-id":"go-back-button",children:(0,o.jsx)(n.hU,{accessibilityLabel:u._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(m({event_type:101,view_type:c,element:34,view_parameter:a}),0===p.length){d.replace(`/pin/${t}/`);return}d.goBack()}})})}},735382:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(624797);function n(e){let t=(0,i.mB)(e.search),a=parseInt(t.x,10),n=parseInt(t.y,10),l=parseInt(t.w,10),r=parseInt(t.h,10),s=!function(...e){return e.every(Number.isInteger)}(a,n,l,r)?null:{x:a,y:n,w:l,h:r};return s}},431377:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i=a(883119),n=a(408206),l=a(214877),r=a(213377),s=a(70903),o=a(822592),c=a(676554),u=a(785893);function d({action:e,component:t,dangerouslySetActionUrl:a,element:d,contextLogData:p,hasPwtConstraint:m,id:h,objects:g,surface:_,viewType:y,viewParameter:f}){let{logContextEvent:v}=(0,l.v)(),x=(0,n.Z)(),b=e?.url&&e.text?i=>(0,u.jsx)(o.Z,{coverImages:i.images,height:r.yF,onClick:()=>v({event_type:101,view_type:y,view_parameter:f,component:t,element:d,aux_data:{story_id:h,...p}}),text:e.text,url:a??e.url,width:r.yF},"actionBubble"):null,{containerRef:S,itemsToRender:k,actionItem:w}=(0,s.n)({items:g,itemWidth:r.yF,itemGap:r.oX,actionItemType:b?"one":void 0});return m&&x&&x(k&&k.length>0?"complete":"remove"),(0,u.jsxs)(s.Z,{containerRef:S,itemGap:r.oX,children:[k.map((e,a)=>(0,u.jsx)(i.xu,{"data-grid-item":"true",flex:"none",width:r.yF,children:(0,u.jsx)(c.ZP,{authDesktopSurface:_??"ShoppingDynamicHeightGrid",auxData:p,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:r.yF,width:r.yF},slotIndex:a,viewParameter:f,viewType:y})},e.id)),w&&b?.(w)]})}},819429:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(883119),l=a(140017),r=a(254292),s=a(785893);function o({title:e}){let t=(0,l.ZP)();return(0,s.jsx)(i.Fragment,{children:e?(0,s.jsx)(n.X6,{accessibilityLevel:1,size:"500",children:e}):(0,s.jsx)(r.Z,{text:t._('Image Search Page', 'imageSearch.accessibilityHiddenHeading', 'Accessibility label for image search page')})})}},430062:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i=a(667294),n=a(883119),l=a(214877),r=a(140017),s=a(493538),o=a(71328),c=a(676554),u=a(785893);function d({commerceData:e,isFilterOpened:t,isProductFeed:a,searchId:d,viewParameter:p,viewType:m,visualSearchFlashlightUnifiedResource:h}){let g=(0,r.ZP)(),{logContextEvent:_}=(0,l.v)(),[y,f]=(0,i.useState)(),[v,x]=(0,i.useState)(!1),b=(0,i.useRef)(null),S=(0,i.useRef)(null),k=(0,o.Z)(()=>{b.current&&f(b.current.getBoundingClientRect().y)},100);(0,i.useEffect)(()=>{S.current?.handleResize()},[t]),(0,i.useEffect)(()=>{if(!v)return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)}),(0,i.useEffect)(()=>{let e=window?.innerHeight||document.body?.clientHeight;!v&&y<e&&(x(!0),_({event_type:110,view_type:m,view_parameter:p}))},[y,_,v,x,m,p]);let{data:w,isFetching:P,fetchMore:T,isAtEnd:E}=h,I=(w?.results||[]).filter(e=>"pin"===e.type);return(0,u.jsxs)(n.xu,{"data-test-id":"visual-search-feed",children:[(0,u.jsx)(n.xu,{ref:b,children:(0,u.jsx)(s.Z,{isAtEndOfFeed:E,itemCount:(I||[]).length,children:(0,u.jsx)(n.Rk,{ref:S,items:I||[],loadItems:T,minCols:1,renderItem:({data:t,itemIdx:i})=>"pin"===t.type?(0,u.jsx)(c.ZP,{authDesktopSurface:a?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:e},componentType:0,duploQueryRef:null,pin:t,pinId:t.id,slotIndex:i,viewData:{search_identifier:d},viewParameter:p,viewType:m}):null,scrollContainer:()=>window})})}),(0,u.jsx)(n.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,u.jsx)(n.$j,{accessibilityLabel:g._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:P})})]})}},706308:(e,t,a)=>{"use strict";function i(e){let{category_filters:t,domain_filters:a,price_filters:i}=e||{};return!!t||!!a||!!i}a.d(t,{Z:()=>i})},8760:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(706308),l=a(444781),r=a(757640),s=a(325362);function o({resourceOptions:e,setFlashlightSearchId:t}){let[a,o]=(0,i.useState)(),[c,u]=(0,i.useState)(""),[d,p]=(0,i.useState)(),[m,h]=(0,i.useState)(),g=(0,r.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,i.useEffect)(()=>{let{auxData:e}=g,t=e?.metadata?.one_bar_modules;t&&h((0,l.Z)(s.Z,!0)(t))},[g]),(0,i.useEffect)(()=>{let{data:e}=g,a=e?.search_identifier;a&&(t?t(a):u(a)),o(e)},[t,g]),(0,i.useEffect)(()=>{let{data:e}=g,t=e?.search_identifier,i=a?.search_identifier;!e||t&&i&&t===i||(0,n.Z)(a)||!(0,n.Z)(e)||p({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[d,a,g]),{filters:d,oneBarModules:m,searchId:c,setSearchId:u,visualSearchFlashlightUnifiedResource:g}}},408206:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(906623);function n(){let e=(0,i.E)();return t=>{e&&t&&("remove"===t?e.removeConstraint("shoppingModuleRender"):"complete"===t&&e.markConstraintComplete("shoppingModuleRender"))}}},82205:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var i=a(667294),n=a(883119),l=a(785893);function r({isTopRow:e,image:t}){return(0,l.jsxs)(n.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,l.jsx)(n.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""}),!!t.price&&(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=a(214877),o=a(205841),c=a(666472),u=a(223785),d=a(862249),p=a(259239),m=a(97538);let h={container:{borderRadius:`${u.Oc}px ${u.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},g=({images:e,firstImageIndex:t})=>{let a=t+1,i=t+2;return(0,l.jsxs)(n.xu,{overflow:"hidden",rounding:4,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:h.content},children:e.at(t)?(0,l.jsx)(r,{image:e[t],isTopRow:!0}):null}),e.length>i?(0,l.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(r,{image:e[a]}),(0,l.jsx)(r,{image:e[i]})]}):null]})};function _({dangerouslySetActionUrl:e,query:t,story:a,slotIndex:r}){let u,_,y,f;let{logContextEvent:v}=(0,s.v)(),{action:x,id:b,objects:S,story_type:k,subtitle:w}=a,{text:P,url:T}=x||{},[E,I]=(0,i.useState)(!1),C=(0,i.useCallback)(()=>I(!0),[I]),j=(0,i.useCallback)(()=>I(!1),[I]),A=(S||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),F=(A[0]||{}).domain||void 0,R={story_type:k};["search_product_collage_story","shop_article_story"].includes(k)?(u=2,_=43,R={...R,story_id:b,entered_query:t}):"shop_brand_story"===k||"shop_brand_affinity_story"===k?(u=1,_=92,F&&(R={...R,commerce_data:JSON.stringify({domain:F})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(k)?(u=72,_=3050):"related_domain_collage"===k?(u=72,_=3455):"related_products_collage"===k&&(u=1,_=3177);let O=()=>v({event_type:101,element:372,component:200,view_type:u,view_parameter:_,aux_data:{story_type:k}}),D=w?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(k)&&x){let e=x.user;y=e&&(e.image_medium_url||e.image_large_url),f=e&&e.full_name}let L=e||T;if(!L)return null;let M=(0,d.Z)({url:L})?"nofollow":"none";return(0,l.jsx)(c.F,{componentType:200,contextLogData:R||{},impressionType:"Story",loggingId:k,pinData:null,slotIndex:r,viewParameter:_,viewType:u,children:({impressionTrackerRef:e})=>(0,l.jsx)(n.xu,{ref:e,children:(0,l.jsx)(n.Tg,{href:L,onTap:O,rel:M,children:(0,l.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:h.container},onMouseEnter:C,onMouseLeave:j,overflow:"hidden",position:"relative",children:[(0,l.jsx)(g,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(k)?1:0,images:A.map(({image:e})=>e)}),(0,l.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:D,rounding:"pill",children:(0,l.jsxs)(n.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[w?(0,l.jsx)(n.xu,{marginBottom:1,children:(0,l.jsx)(n.xv,{align:"start",color:"subtle",children:w.format})}):null,(0,l.jsx)(n.xv,{align:"start",weight:"bold",children:P})]})}),f&&y&&(0,l.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:f,outline:!0,size:"md",src:y})}),(0,l.jsx)(m.Z,{visibility:E?"visible":"none",children:(0,l.jsx)(p.Z,{additionalStyles:h.visualOverlay})})]})})})})}},481177:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},922725:(e,t,a)=>{"use strict";a.d(t,{S:()=>v,Z:()=>k});var i=a(667294),n=a(615071),l=a(883119),r=a(587703),s=a(785893);let o={nw:0,ne:90,se:180,sw:270},c={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},u={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d=(e,t,a,i)=>{if("rounded"!==i)return`translate(${t}, ${a}), rotate(${o[e]})`;{let[i,n]=c[e];return`translate(${t+i}, ${a+n}), rotate(${o[e]})`}};function p({corner:e,x:t,y:a,size:i,cornerStyle:n}){return(0,s.jsxs)("g",{style:{cursor:u[e]},transform:d(e,t,a,n),children:[(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:i,stroke:"none",width:i,x:0,y:0}),"rounded"===n?(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:`M ${i} 0 L 0 0 L 0 ${i}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let m={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function h({edge:e,x:t,y:a,w:i,h:n}){return(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:n,stroke:"none",style:{cursor:m[e]},width:i,x:t,y:a})}function g({x:e,y:t,w:a,h:n}){let l="rounded";return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(p,{corner:"nw",cornerStyle:l,size:20,x:e,y:t}),(0,s.jsx)(p,{corner:"ne",cornerStyle:l,size:20,x:e+a,y:t}),(0,s.jsx)(p,{corner:"sw",cornerStyle:l,size:20,x:e,y:t+n}),(0,s.jsx)(p,{corner:"se",cornerStyle:l,size:20,x:e+a,y:t+n}),(0,s.jsx)(h,{edge:"n",h:30,w:a-40,x:e+20,y:t-10}),(0,s.jsx)(h,{edge:"e",h:n-40,w:30,x:e+a-20,y:t+20}),(0,s.jsx)(h,{edge:"s",h:30,w:a-40,x:e+20,y:t+n-10}),(0,s.jsx)(h,{edge:"w",h:n-40,w:30,x:e-20,y:t+20})]})}var _=a(105737),y=a(406893);function f(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let v=16,x={h:0,w:0,x:0,y:0},b=`
.preview-crop-area-enter {
  opacity: 0;
}

.preview-crop-area-enter-active {
  opacity: 1;
  transition: opacity 300ms;
}

.preview-crop-area-exit {
  opacity: 1;
}

.preview-crop-area-exit-active {
  opacity: 0;
  transition: opacity 300ms;
}

.preview-crop-area-exit-done {
  opacity: 0;
}
`;class S extends i.Component{constructor(...e){super(...e),f(this,"state",{cropArea:!!this.props.initialCropArea&&function({initialCropArea:e,imageSize:t}){let{x:a,y:i,w:n,h:l}=e,{h:r,w:s}=t;if(!r||!s)return e;let o=a,c=i,u=n,d=l;return o<v&&(o=v,u-=v-a),o+u>s-v&&(u-=o+u-s+v),c<v&&(c=v,d-=v-i),c+d>r-v&&(d-=c+d-r+v),{x:o,y:c,w:u,h:d}}({initialCropArea:this.props.initialCropArea,imageSize:this.props.imageSize})||x,cropChangeType:null}),f(this,"updateCropAreaState",()=>{this.setState({cropArea:this.props.initialCropArea??x})}),f(this,"cropResizeDirection",null),f(this,"_cropperOverlay",(0,i.createRef)()),f(this,"_checkCropHandleValid",(e,t)=>{let{cropArea:{h:a,w:i,x:n,y:l}}=this.state;switch(this.cropResizeDirection){case"ne":e<n&&t>l+a?this.cropResizeDirection="sw":e<n?this.cropResizeDirection="nw":t>l+a&&(this.cropResizeDirection="se");break;case"nw":e>n+i&&t>l+a?this.cropResizeDirection="se":e>n+i?this.cropResizeDirection="ne":t>l+a&&(this.cropResizeDirection="sw");break;case"se":e<n&&t<l?this.cropResizeDirection="nw":e<n?this.cropResizeDirection="sw":t<l&&(this.cropResizeDirection="ne");break;case"sw":e>n+i&&t<l?this.cropResizeDirection="ne":e>n+i?this.cropResizeDirection="se":t<l&&(this.cropResizeDirection="nw");break;case"n":t>l+a&&(this.cropResizeDirection="s");break;case"s":t<l&&(this.cropResizeDirection="n");break;case"e":e<n&&(this.cropResizeDirection="w");break;case"w":e>n+i&&(this.cropResizeDirection="e")}}),f(this,"handleOnMouseDown",e=>{e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:a}=e,{target:i}=e,n=t-this._cropperOverlayCoor.x,l=a-this._cropperOverlayCoor.y,r=i.classList?Array.from(i.classList):i instanceof Element&&i.getAttribute("class")?.split(" ")||[];r.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),r.includes("ne")&&(this.cropResizeDirection="ne"),r.includes("nw")&&(this.cropResizeDirection="nw"),r.includes("se")&&(this.cropResizeDirection="se"),r.includes("sw")&&(this.cropResizeDirection="sw"),r.includes("n")&&(this.cropResizeDirection="n"),r.includes("s")&&(this.cropResizeDirection="s"),r.includes("e")&&(this.cropResizeDirection="e"),r.includes("w")&&(this.cropResizeDirection="w")):r.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:n,y:l}):r.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:n,y:l},this.setState({cropArea:{h:0,w:0,x:n,y:l},cropChangeType:"select"}))}),f(this,"handleOnMouseMove",e=>{let{cropArea:{h:t,w:a,x:i,y:n},cropChangeType:l}=this.state,{imageSize:r}=this.props,{clientX:s,clientY:o}=e,c=s-this._cropperOverlayCoor.x,u=o-this._cropperOverlayCoor.y;if("resize"===l){let e=Math.max(Math.min(c,(r.w??1)-v),v),l=Math.max(Math.min(u,(r.h??1)-v),v);switch(this._checkCropHandleValid(e,l),this.cropResizeDirection){case"ne":{let a=Math.max(t+(n-l),48),r=Math.max(e-i,48);this.setState({cropArea:{h:a,w:r,x:i,y:a<=48?n:l}});break}case"nw":{let r=Math.max(a+(i-e),48),s=Math.max(t+(n-l),48);this.setState({cropArea:{h:s,w:r,x:48===r?i:e,y:48===s?n:l}});break}case"se":{let t=Math.max(l-n,48),a=Math.max(e-i,48);this.setState({cropArea:{h:t,w:a,x:i,y:n}});break}case"sw":{let t=Math.max(l-n,48),r=Math.max(a+(i-e),48);this.setState({cropArea:{h:t,w:r,x:48===r?i:e,y:n}});break}case"n":{let e=Math.max(n-l+t,48);this.setState({cropArea:{h:e,w:a,x:i,y:48===e?n:l}});break}case"s":{let e=Math.max(l-n,48);this.setState({cropArea:{h:e,w:a,x:i,y:n}});break}case"e":{let a=Math.max(e-i,48);this.setState({cropArea:{h:t,w:a,x:i,y:n}});break}case"w":{let l=Math.max(a-e+i,48);this.setState({cropArea:{h:t,w:l,x:48===l?i:e,y:n}})}}}else if("move"===l){let e=c-this.cropChangeStartCoor.x,l=u-this.cropChangeStartCoor.y,s=Math.max(Math.min(i+e,(r.w??1)-a-v),v),o=Math.max(Math.min(n+l,(r.h??1)-t-v),v);this.cropChangeStartCoor={x:c,y:u},this.setState({cropArea:{h:t,w:a,x:s,y:o}})}else if("select"===l){let e=Math.max(Math.min(c,r.w??1),0),t=Math.max(Math.min(u,r.h??1),0),a=e-this.cropChangeStartCoor.x,i=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(i),w:Math.abs(a),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}}),f(this,"handleOnMouseUp",()=>{let{cropChangeType:e}=this.state;("resize"===e||"move"===e||"select"===e)&&this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){let{body:e}=document,t=this._cropperOverlay.current;if(t&&e){if(t){let e=t.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}window.addEventListener("mouseup",this.handleOnMouseUp),e.addEventListener("mousemove",this.handleOnMouseMove),t.addEventListener("mousedown",this.handleOnMouseDown)}}componentWillUnmount(){let{body:e}=document,t=this._cropperOverlay.current;t&&e&&(window.removeEventListener("mouseup",this.handleOnMouseUp),e.removeEventListener("mousemove",this.handleOnMouseMove),t.removeEventListener("mousedown",this.handleOnMouseDown))}componentDidUpdate(e,t){let{shouldChangeState:a,initialCropArea:i}=this.props;a&&i!==e.initialCropArea&&!(0,_.ZP)(i,t.cropArea)&&this.updateCropAreaState()}handleCrop(){let{imageSize:e,onChange:t,viewParameter:a,logContextEvent:i}=this.props,{cropChangeType:n,cropArea:l}=this.state;if(0===l.w&&0===l.h)this.setState({cropChangeType:null}),t({origCrop:{h:(e.h??1)-2*v,w:(e.w??1)-2*v,x:v,y:v},cropSource:5});else{let r,s;this.setState({cropChangeType:null});let o=Math.max(Math.min(l.x,(e.w??1)-48-v),v),c=Math.max(Math.min(l.y,(e.h??1)-48-v),v);switch(r=l.h<48?48:c+l.h>(e.h??1)-v?(e.h??1)-c-v:l.h,s=l.w<48?48:o+l.w>(e.w??1)-v?(e.w??1)-o-v:l.w,n){case"move":i({event_type:7603,view_type:72,view_parameter:a});break;case"resize":i({event_type:7604,view_type:72,view_parameter:a})}t({origCrop:{h:r,w:s,x:o,y:c},cropSource:6})}}render(){let{children:e,previewCropArea:t,showPreviewArea:a,imageSize:i}=this.props,{cropArea:{h:r,w:o,x:c,y:u},cropChangeType:d}=this.state;return(0,s.jsxs)(l.xu,{ref:this._cropperOverlay,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,s.jsx)(y.Z,{unsafeCSS:b}),(0,s.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:"Mask",children:[(0,s.jsx)("rect",{fill:"#fff",height:i.h??"100%",rx:"0",ry:"0",width:i.w??"100%",x:"0",y:"0"}),(0,s.jsx)("rect",{height:r,id:"hole",rx:0,ry:0,width:o,x:c,y:u},`${c}${u}`),(0,s.jsx)(n.Z,{classNames:"preview-crop-area",in:a&&!d,mountOnEnter:!0,timeout:300,unmountOnExit:!0,children:(0,s.jsx)("rect",{height:t.h,id:"preview",rx:4,ry:4,width:t.w,x:t.x,y:t.y},`${t.x}${t.y}`)})]})}),(0,s.jsx)("rect",{className:"v2shadowMask",height:"100%",mask:"url(#Mask)",style:{fill:"rgba(0,0,0,0.5)"},width:"100%",x:"0",y:"0"}),(0,s.jsx)("use",{className:"v2cropSection",fill:"rgba(0,0,0,0)",href:"#hole",stroke:"#fff",strokeWidth:"2",style:{cursor:"move"}}),"select"!==d&&(0,s.jsx)(g,{h:r,w:o,x:c,y:u})]}),e]})}}function k(e){let t=(0,r.Z)();return(0,s.jsx)(S,{logContextEvent:t,...e})}},667697:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var i=a(667294),n=a(883119),l=a(140017),r=a(785893);let s=16,o=32,c=(0,i.forwardRef)(({icon:e,onClick:t,onMouseDown:a,onMouseEnter:c,onMouseLeave:u,onMouseUp:d,selected:p,style:m,text:h,x:g,y:_,zIndex:y,backdropDiameter:f=o,dotDiameter:v=s},x)=>{let[b,S]=(0,i.useState)(!1),k=(0,l.ZP)(),w=b?f+4:f;return(0,r.jsx)(n.xu,{ref:x,dangerouslySetInlineStyle:{__style:{top:_-w/2,left:g-w/2,outline:"none"}},position:"absolute",zIndex:new n.Ry(y||0),children:(0,r.jsx)(n.iP,{accessibilityLabel:k._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),dataTestId:"flashlight-dot",onMouseDown:a,onMouseEnter:({event:e})=>{S(!0),c?.({event:e})},onMouseLeave:({event:e})=>{S(!1),u?.({event:e})},onMouseUp:d,onTap:t,tabIndex:0,children:(0,r.jsxs)(n.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:p?"0 0 0 3px #e60023":"none",borderRadius:v,top:(w-v)/2,left:(w-v)/2,...m}},"data-test-id":"flashlight-dot-style",display:"flex",height:v,justifyContent:"center",padding:0,position:"absolute",width:v,children:[!!h&&(0,r.jsx)(n.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:h}),e&&(0,r.jsx)(n.JO,{accessibilityLabel:k._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:e,inline:!0,size:v/2})]})})})}),u=c},582158:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i,n=a(667294);a(167912);var l=a(616550),r=a(922725),s=a(625124),o=a(207012),c=a(520846),u=a(258194),d=a(785893);let p=void 0!==i?i:i=a(394671);function m({customCropper:e,imageSignature:t,imageSize:a,initialCropArea:i,pinKey:m,requestParams:h,showAnimation:g,surfaceType:_,trafficSource:y,viewParameter:f,viewType:v}){let x=(0,o.Z)(p,m),b=(0,l.k6)(),[S,k]=(0,n.useState)(!1),[w,P]=(0,n.useState)({w:0,h:0,x:0,y:0}),[T,E]=(0,n.useState)(0),I=(0,n.useMemo)(()=>(x.visualObjects??[]).filter(e=>e.isStela)||[],[x.visualObjects]);(0,n.useEffect)(()=>{let e=I.findIndex(e=>{let{x:t,y:n,w:l,h:r}=e;return function(e,t,a){let i=Object.keys(e).reduce((a,i)=>a+Math.abs(e[i]-t[i]),0);return i<=4}(i,(0,c.Z)({cropArea:{x:t,y:n,w:l,h:r},scaledWidth:a.w??0,scaledHeight:a.h??0}),0)});E(e)},[a,i,I]);let C=({origCrop:e,cropSource:t,title:a})=>{let i=window.location.search,n=(0,u.Z)({cropArea:e,cropSource:t??6,requestParams:h,surfaceType:_,title:a,trafficSource:y});n!==i&&b.replace({pathname:window.location.pathname,search:n,state:{internalNavigation:!0}})},j=I&&!!I.length;return(0,d.jsx)(r.Z,{imageSize:a,initialCropArea:i,onChange:e??C,previewCropArea:w,showPreviewArea:!1,viewParameter:f,children:j&&(0,d.jsx)(s.Z,{currentSpotlightIdx:T,handleSpotlightClick:t=>{let i=I[t],{x:n,y:l,w:r,h:s}=i,o=(0,c.Z)({cropArea:{x:n,y:l,w:r,h:s},scaledWidth:a.w??0,scaledHeight:a.h??0}),u={origCrop:o,cropSource:i.isStela?4:1,trafficSource:y,title:i.title||""};e?e(u):C(u)},handleSpotlightHover:e=>{if(e!==T){k(!0);let{x:t,y:i,w:n,h:l}=I[e];P((0,c.Z)({cropArea:{x:t,y:i,w:n,h:l},scaledWidth:a.w??0,scaledHeight:a.h??0}))}},handleSpotlightUnhover:()=>{k(!1)},imageSignature:t,imageSize:a,pinKey:x,showAnimation:g,viewParameter:f,viewType:v})},JSON.stringify(i))}},625124:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var i,n=a(667294);a(167912);var l=a(587703),r=a(667697),s=a(494125),o=a(785893);function c({showAnimation:e,auxData:t,index:a,isStela:i,onClick:n,onHover:c,onUnhover:u,spotlightCenter:d,viewParameter:p,viewType:m}){let h=(0,l.Z)(),g=i?1221:1260;(0,s.Z)(()=>{h({event_type:120,element:g,aux_data:t,view_parameter:p,view_type:m})});let _=parseFloat((.1*(a+1)).toFixed(2)),y={animation:e?`spotlightDotPop 0.6s ease-out ${_}s both`:"none"};return(0,o.jsx)(r.Z,{onClick:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),h({aux_data:t,element:g,event_type:101,view_parameter:p,view_type:m}),n(a)},onMouseEnter:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),c?.(a)},onMouseLeave:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),u?.()},style:y,x:d.x,y:d.y})}var u=a(207012),d=a(406893),p=a(268127),m=a(520846);let h=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,g=void 0!==i?i:i=a(247821),_=({showAnimation:e,pinKey:t,imageSignature:a,imageSize:i,currentSpotlightIdx:l,handleSpotlightClick:r,handleSpotlightHover:s,handleSpotlightUnhover:_,viewParameter:y,viewType:f,visualObjects:v})=>{let x=(0,u.Z)(g,t),b=(0,p.Z)(x),S=x?(x.visualObjects??[]).filter(e=>e.isStela):v??[];return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(d.Z,{unsafeCSS:h}),S.map((t,n)=>{if(n===l)return null;let{x:u,y:d,w:p,h}=t,g=(0,m.Z)({cropArea:{x:u,y:d,w:p,h},scaledWidth:i.w??0,scaledHeight:i.h??0}),v={x:g.x+g.w/2,y:g.y+g.h/2},S={...b({override:{entrypoint:"flashlight"}}),pin_id:x?.entityId??"",image_signature:a,visual_objects:JSON.stringify([{x:t.x,y:t.y,w:t.w,h:t.h}])},k=`${v.x}${v.y}`;return(0,o.jsx)(c,{auxData:S,index:n,isStela:!!t?.isStela,onClick:r,onHover:s,onUnhover:_,showAnimation:e,spotlightCenter:v,viewParameter:y,viewType:f},k)})]})}},901855:(e,t,a)=>{"use strict";a.d(t,{Hv:()=>o,aX:()=>d,nK:()=>p});var i=a(667294),n=a(616550),l=a(342513),r=a(785893);let{Provider:s,useHook:o}=(0,l.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function u(e,t){let a={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(a.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:a,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:a};default:return e}}function d(){let{current:e,previous:t}=o(),a=(0,i.useMemo)(()=>e?t.concat(e):t,[e,t]);return a}function p({children:e}){let t=(0,n.k6)(),a=(0,n.TH)(),l=(0,n.$B)(),o={forward:[],current:{action:t.action,location:a,match:l},previous:[]},[c,d]=(0,i.useReducer)(u,o);return(0,i.useEffect)(()=>{let{action:e}=t;d({type:e,location:a,match:l})},[a]),(0,r.jsx)(s,{value:c,children:e})}},406893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l}),a(441143);var i=a(785893);class n{static factory(e){return e instanceof n?e:new n(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function l(e){let{css:t,unsafeCSS:a,...l}=e,r=String(t||"")||a||"",s=!!r;return s?(0,i.jsx)("style",{...l,dangerouslySetInnerHTML:{__html:String(n.factory(r))}}):null}},223785:(e,t,a)=>{"use strict";a.d(t,{Dv:()=>l,Ml:()=>r,Oc:()=>i,mv:()=>n});let i=16,n=4,l={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},513911:(e,t,a)=>{"use strict";a.d(t,{I6:()=>n,Nv:()=>i,RZ:()=>l,ZG:()=>o,b9:()=>s,s0:()=>r});let i=44,n=24,l=446,r=.05,s=36,o=20},160567:(e,t,a)=>{"use strict";a.d(t,{Pw:()=>i,SB:()=>n,ZP:()=>r,x9:()=>l});let i=80,n=56,l=e=>"phone"===e?n:i;function r(e,t){return t?0:l(e)}},934378:(e,t,a)=>{"use strict";a.d(t,{$N:()=>m,Cu:()=>g,GY:()=>c,MZ:()=>r,NR:()=>u,bC:()=>h,fm:()=>i,kM:()=>l,q6:()=>n,qp:()=>o,uV:()=>d,ug:()=>p,xL:()=>s});let i={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},n={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},l={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},r={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud"},s={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},o={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API",NOCODE_CONVERSIONS_API_SETUP_FLOW:"NOCODE_CONVERSIONS_API_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:"PINTEREST_EVENTS_OVERVIEW_CAPI_TAB",PINTEREST_EVENT_HISTORY_CAPI_TAB:"PINTEREST_EVENT_HISTORY_CAPI_TAB"},c={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},u={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",HOSTNAME:"hostname",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},d="604800",p="86400",m={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},h="click",g="view"},214877:(e,t,a)=>{"use strict";a.d(t,{B:()=>o,v:()=>s});var i=a(525364),n=a(342513),l=a(785893);let{Provider:r,useHook:s}=(0,n.Z)("ContextLogger");function o({children:e,value:t}){let{setViewContextData:a}=(0,i.sV)();return t.injectSetViewContextDataFromHook=a,(0,l.jsx)(r,{value:t,children:e})}},587703:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(214877);let n=()=>(0,i.v)().logContextEvent},696534:(e,t,a)=>{"use strict";a.d(t,{F6:()=>d,Hs:()=>u,Yc:()=>o,vs:()=>c});var i=a(667294),n=a(191313),l=a(217058);let r="theme",s="dark"===(0,n.qn)(r),o=()=>s;function c(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(o())},[t]),e}let u=()=>{(0,n.Nh)(r,"dark"),(0,l.My)("mweb.dark_mode.enable"),window.location.reload()},d=()=>{(0,n.L_)(r),(0,l.My)("mweb.dark_mode.disable"),window.location.reload()}},92785:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r,k:()=>i.k});var i=a(135839),n=a(5859),l=a(785893);let r=({dateFormatType:e,useUTC:t=!0,value:a})=>(0,l.jsx)(n.LC,{children:n=>(0,i.Z)(n.locale,a,e,t)})},135839:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l,k:()=>i});let i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},n=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case i.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function l(e,t,a,i=!0){let l=n(a);i&&(l.timeZone="UTC");let r=new Intl.DateTimeFormat(e,l);return r.format(t)}},541841:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(667294),n=a(973935);function l(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends i.Component{constructor(...e){super(...e),l(this,"observer",null),l(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=n.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return i.Children.only(this.props.children)}}let s=r},179370:(e,t,a)=>{"use strict";a.d(t,{F:()=>p,M:()=>d});var i=a(667294),n=a(702664),l=a(14890),r=a(342513),s=a(25919),o=a(957753),c=a(785893);let{Provider:u,useHook:d}=(0,r.Z)("ExperienceContext");function p({children:e}){let[t,a]=(0,i.useReducer)((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,mountedPlacements:{...e.mountedPlacements,[t.payload]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let a={...e};return delete a.mountedPlacements[t.payload],delete a.registerdAfterActionPlacements[t.payload],a}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registerdAfterActionPlacements:{...e.registerdAfterActionPlacements,[t.payload]:!0}}:e},{mountedPlacements:{},registerdAfterActionPlacements:{}}),{mountedPlacements:r,registerdAfterActionPlacements:d}=t,p=(0,n.useDispatch)(),m=(0,n.useSelector)(e=>e.experiences),h=(0,s.be)(),g=(0,s.Am)(),_=(0,s.Ig)(),y=(0,i.useMemo)(()=>{let e=(0,l.bindActionCreators)({completeExperience:h,dismissExperience:g,fetchAllExperiences:s.fO,fetchAllExperiencesMulti:o.NW,fetchExperienceForPlacements:s.pz,mountPlacement:s.N,triggerExperimentsForPlacement:s.kd,viewExperience:_},p);return{...e,mountPlacement:(t,...i)=>{e.mountPlacement(t,...i),a({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{a({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{a({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})}}},[h,g,p,a,_]),f=(0,i.useMemo)(()=>({experiences:m,mountedPlacements:r,registerdAfterActionPlacements:d,...y}),[m,r,d,y]);return(0,c.jsx)(u,{value:f,children:e})}},25919:(e,t,a)=>{"use strict";let i;a.d(t,{Am:()=>y,Ig:()=>g,N:()=>b,Sd:()=>f,YX:()=>x,be:()=>_,fO:()=>p,kd:()=>v,pz:()=>m});var n=a(667294),l=a(216167),r=a(587703),s=a(703404),o=a(957753),c=a(107366),u=a(953565);let d=(e,t,a={})=>(0,u.nP)(`${e}.${t}`,{sampleRate:1,tags:a}),p=(e,t)=>a=>{let i=t?{extra_context:e,targeting:t}:{extra_context:e};return l.Z.create("UserExperiencePlatformResource",i).callGet().then(e=>e.resource_response?a((0,o.OD)(e.resource_response.data)):void 0)},m=(e,t,a,n)=>(r,c)=>{if(t)return Promise.resolve();if(n&&(i=n),1===e.length){let t=e[0],i=c().experiences,n=i[t],l=n?.extraContext||null;if(JSON.stringify(l)===JSON.stringify(a)||(0,s.E3)(n)&&!(a&&Object.keys(a).length>0))return Promise.resolve()}return l.Z.create("UserExperienceResource",{placement_ids:e,extra_context:a||null,targeting:n}).callGet().then(e=>e.resource_response?r((0,o.cL)(e.resource_response.data)):void 0)},h=(e,t,a,n)=>(r,s,c,u=!1,d,m)=>(h,g)=>{let{experiences:_,experiencesMulti:y}=g(),f=null,v=!0;if(u||(f=(v=_[r]&&_[r].experience_id===s)?_[r]:Array.isArray(y[r])&&y[r]?.find(e=>e.experience_id===s)),f&&f.experience_id===s||u&&r&&s){let u=l.Z.create(e,{placed_experience_id:`${r}%3A${s}`,extra_context:d??{},targeting:m}),g=v?o.Yb:o.xW;switch(t){case"dismissed":return u.callDelete().then(()=>{h(g(r,s,t)),h(p(void 0,i)),a&&n&&a({event_type:n,object_id_str:s.toString()})});case"completed":return u.callUpdate().then(()=>{!c&&(h(g(r,s,t)),h(p(void 0,i)),a&&n&&a({event_type:n,object_id_str:s.toString()}))});case"viewed":return h(g(r,s,t)),u.callUpdate().then(()=>{1000162===r&&h(p()),a&&n&&a({event_type:n,object_id_str:s.toString()})});case"completedWithoutHomefeed":return u.callUpdate().then(()=>{c||h(g(r,s,t)),a&&n&&a({event_type:n,object_id_str:s.toString()})})}}return Promise.resolve()},g=()=>{let e=(0,r.Z)(),t=(0,n.useCallback)(h("UserExperienceViewedResource","viewed",e,4503),[e]);return t},_=()=>{let e=(0,r.Z)(),t=(0,n.useCallback)(h("UserExperienceCompletedResource","completed",e,6567),[e]);return t},y=()=>{let e=(0,r.Z)(),t=(0,n.useCallback)(h("UserExperienceResource","dismissed",e,6568),[e]);return t},f=()=>{let e=(0,r.Z)(),t=(0,n.useCallback)(h("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e]);return t},v=(e,t)=>(a,i)=>{let{experiences:n}=i(),l=n[e];l&&l.triggerable_placed_exps&&l.triggerable_placed_exps.length&&l.triggerable_placed_exps.forEach(a=>{let[,i]=a.split(":"),n=t;l.metadata&&l.metadata[i]&&(n={...t,...l.metadata[i]}),(0,c.Z)({url:`/v3/experiences/${a.replace(":","%3A")}/trigger/`,method:"PUT",data:n?{extra_context:JSON.stringify(n,null,1)}:{}}).then(()=>{d("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:i})})})},x=e=>(t,a)=>{t(v(e));let{experiences:i}=a();return i[e]},b=(e,t,a)=>n=>{a&&(i=a),n(v(e,t)),t&&Object.keys(t).length>0&&n(m([e],!1,t,a))}},703404:(e,t,a)=>{"use strict";a.d(t,{A0:()=>o,E3:()=>r,MQ:()=>s,fL:()=>c});var i=a(883119),n=a(862249),l=a(785893);function r(e){return!!e&&0!==e.type}let s=(e,t,a)=>{let i=e[a];return t[a]&&r(i)?i:null};function o(e){return e.display_data?.anchor}let c=e=>{let t=new DOMParser,a=t.parseFromString(e,"text/html"),r=[...a.body?.childNodes||[]].map(e=>{if("A"!==e.nodeName)return(0,l.jsx)(i.xv,{inline:!0,children:e.textContent});{let t=e.href||"",a=(0,n.Z)({url:t});return(0,l.jsx)(i.rU,{display:"inline",externalLinkIcon:a?"default":"none",href:t,rel:a?"nofollow":"none",target:"blank",children:e.textContent})}});return(0,l.jsx)(i.xv,{inline:!0,children:r})}},957753:(e,t,a)=>{"use strict";a.d(t,{NW:()=>s,OD:()=>c,Yb:()=>o,cL:()=>u,xW:()=>r});var i=a(216167),n=a(26616);let l=e=>({type:n.$S,payload:{experiencesMulti:e}}),r=(e,t,a)=>({type:n.V$,payload:{placementId:e,experienceId:t,status:a}}),s=e=>t=>i.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t(l(e.resource_response.data)):void 0),o=(e,t,a)=>({type:n.iY,payload:{placementId:e,experienceId:t,status:a}}),c=e=>({type:n._4,payload:{experiences:e}}),u=e=>({type:n.mR,payload:{experiences:e}})},321329:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(667294),n=a(179370),l=a(703404),r=a(5859);function s(e){let{mountedPlacements:t,completeExperience:a,dismissExperience:s,experiences:o,fetchAllExperiences:c,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:d,triggerExperimentsForPlacement:p,viewExperience:m}=(0,n.M)(),{isBot:h}=(0,r.B)(),g=e&&!h?(0,l.MQ)(o,t,e):null;return(0,i.useMemo)(()=>({completeExperience:a,dismissExperience:s,experienceForPlacement:g,fetchAllExperiences:c,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:d,triggerExperimentsForPlacement:p,viewExperience:m}),[a,s,g,c,u,d,p,m])}},207993:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(785893);let n=(0,i.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})}),l=n},262032:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(667294),n=a(883119);let l=(0,i.createContext)();var r=a(785893);function s(e){(0,i.useContext)(l);let{alt:t,color:a,children:s,crossOrigin:o,decoding:c,elementTiming:u,fetchPriority:d,fit:p,loading:m,naturalHeight:h,naturalWidth:g,onError:_,onLoad:y,role:f,sizes:v,src:x,srcSet:b,_fixCompletedOnLoad:S}=e;return(0,r.jsx)(n.Ee,{_fixCompletedOnLoad:S,alt:t,color:a,crossOrigin:o,decoding:c,elementTiming:u,fetchPriority:d,fit:p,loading:m,naturalHeight:h,naturalWidth:g,onError:_,onLoad:y,role:f,sizes:v,src:x,srcSet:b,children:s})}},775089:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var i=a(667294),n=a(883119),l=a(214877),r=a(103322);function s(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let o={};function c(e){let t=o[e];return t&&t.screenWidth===window.innerWidth||(o[e]={screenWidth:window.innerWidth}),o[e]}let u=e=>{let t=e.__id||e.id;return"string"==typeof t&&t||null};class d{constructor(){s(this,"idMap",new Map),s(this,"objMap",new WeakMap)}get(e){let t=u(e);return this.objMap.get(e)??(t?this.idMap.get(t):void 0)}has(e){let t=u(e);return this.objMap.has(e)??(!!t&&this.idMap.has(t))}set(e,t){let a=u(e);a&&this.idMap.set(a,t),this.objMap.set(e,t)}reset(){this.idMap=new Map,this.objMap=new WeakMap}}var p=a(547643),m=a(213377),h=a(406893),g=a(340523),_=a(5859),y=a(554786),f=a(953565),v=a(84768),x=a(785893);function b({analyticsData:e,children:t,idx:a,isMeasuring:n,masonryV2ExpName:l,masonryV2ExpGroup:s}){let o=(0,y.ZP)(),{isAuthenticated:c}=(0,_.B)(),u=(0,v.MM)();return(0,i.useEffect)(()=>{let t=e.current[a];if(t){let{fetchTimestamp:t,measureTimestamp:i,hasRendered:r,pageCount:d}=e.current[a]??{},p={deviceType:o,experimentName:l,experimentGroup:s,handlerId:u,isAuthenticated:c,pageCount:d};n&&!i&&(e.current[a].measureTimestamp=Date.now(),(0,f.LY)("webapp.masonry.itemMeasureStart",Date.now()-t,{tags:p})),n||r||((0,f.LY)("webapp.masonry.itemRenderStart",Date.now()-i,{tags:p}),e.current[a].hasRendered=!0)}},[n]),(0,x.jsx)(r.Z,{name:"MasonryItem",children:t})}function S(e){let{align:t,cacheKey:a,id:s,isGridCentered:o=!0,items:u,layout:S,loadItems:k,masonryRef:w,renderItem:P,scrollContainerRef:T,virtualize:E=!0,_getColumnSpanConfig:I}=e,C=(0,y.ZP)(),{isAuthenticated:j,isRTL:A}=(0,_.B)(),{logContextEvent:F}=(0,l.v)(),R=(0,g.F)(),O="desktop"===C,D=(0,v.MM)(),L=(0,i.useRef)(u.map(()=>({fetchTimestamp:Date.now(),measureTimestamp:Date.now(),hasRendered:!1,pageCount:0}))),M=e.columnWidth??m.yF,Z=e.gutterWidth??(O?m.oX:1),N=e.minCols??m.yc,K=e.serverRender??!!O,z="flexible"===S||"desktop"!==C,H=K?"serverRenderedFlexible":"flexible",U=(0,i.useRef)(0),V=M+Z,$=function(e){if(null==e)return;let t=c(e);return t.positionCache||(t.positionCache=new d),t.positionCache}(a),G=function(e){if(null==e)return;let t=c(e);return t.measurementCache||(t.measurementCache=new d),t.measurementCache}(a),B=(0,i.useCallback)(()=>T?.current||window,[T]),W=(0,i.useRef)(!0),{anyEnabled:Y}=R.checkExperiment("web_masonry_ssr_container_query"),q=o&&W.current?"gridCentered":"",{className:Q,styles:X}=function(e){let t=`m_${Object.keys(e).reduce((t,a)=>{let i=e[a];return null==i||"object"==typeof i||"function"==typeof i?t:"boolean"==typeof i?t+(i?"t":"f"):t+i},"").replace(/\:/g,"\\:")}`,{flexible:a,gutterWidth:i,isRTL:n,itemWidth:l,maxColumns:r,minColumns:s,items:o,_getColumnSpanConfig:c}=e,u=c?o.map((e,t)=>({index:t,columnSpanConfig:c(e)??1})).filter(e=>1!==e.columnSpanConfig):[],d=l+i,p=Array.from({length:r+1-s},(e,t)=>t+s),m=p.map(e=>{let o=e===s?0:e*d,c=e===r?null:(e+1)*d-1,{styles:p,numberOfVisibleItems:m}=u.reduce((n,r)=>{let{columnSpanConfig:s}=r,o=function({columnCount:e,columnSpanConfig:t}){return"number"==typeof t?t:t[e<=2?"sm":e<=4?"md":e<=8?"lg":"xl"]??1}({columnCount:e,columnSpanConfig:s}),c=Math.min(o,e),u=null!=r.index&&n.numberOfVisibleItems>=c+r.index,d=a?100/e*c:l*c+i*(c-1),{numberOfVisibleItems:p}=n;return u?p-=c-1:r.index<p&&(p+=1),{styles:n.styles.concat(function({className:e,index:t,columnSpanConfig:a,visible:i,width:n,flexible:l}){let r="number"==typeof a?a:btoa(JSON.stringify(a));return l?`
      .${e} .static[data-column-span="${r}"]:nth-child(${t+1}) {
        visibility: ${i?"visible":"hidden"} !important;
        position: ${i?"inherit":"absolute"} !important;
        width: ${n}% !important;
      }`:`
      .${e} .static[data-column-span="${r}"]:nth-child(${t+1}) {
        visibility: ${i?"visible":"hidden"} !important;
        position: ${i?"inherit":"absolute"} !important;
        width: ${n}px !important;
      }`}({className:t,index:r.index,columnSpanConfig:s,visible:u,width:d,flexible:a})),numberOfVisibleItems:p}},{styles:"",numberOfVisibleItems:e}),h=a?`
      .${t} .static {
        box-sizing: border-box;
        width: calc(100% / ${e}) !important;
      }
    `:`
      .${t} {
        max-width: ${e*d}px;
      }

      .${t} .static {
        width: ${l}px !important;
      }
    `,g=`
      .${t} .static:nth-child(-n+${m}) {
        position: static !important;
        visibility: visible !important;
        float: ${n?"right":"left"};
        display: block;
      }

      .${t} .static {
        padding: 0 ${i/2}px;
      }

      ${h}

      ${p}
    `;return{minWidth:o,maxWidth:c,styles:g}}),h=m.map(({minWidth:e,maxWidth:t,styles:a})=>`
    @container (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${a}
    }
  `),g=m.map(({minWidth:e,maxWidth:t,styles:a})=>`
    @media (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${a}
    }
  `),_=e.enableContainerQuery?`
    ${h.join("")}
    @supports not (container-type: inline-size) {
      ${g.join("")}
    }
  `:g.join("");return{className:t,styles:`
    .masonryContainer {
      container-type: inline-size;
    }

    .gridCentered {
      margin-left: auto;
      margin-right: auto;
    }

    .${t} .static {
      position: absolute !important;
      visibility: hidden !important;
    }

    ${_}
  `}}({gutterWidth:Z,flexible:z,items:u,isRTL:A,itemWidth:M,maxColumns:e.maxColumns??(u.length||m.g5),minColumns:N,enableContainerQuery:Y,_getColumnSpanConfig:I}),J=`${q} ${Q}`.trim(),{anyEnabled:ee,expName:et,group:ea,isMeasureAllEnabled:ei}=(0,p.Z)(),en=(0,i.useMemo)(()=>!G||u.every(e=>!G.has(e)),[]),el=ea&&en,er=(0,i.useRef)(),es=(0,i.useRef)(u.length),eo=(0,i.useRef)(0);(0,i.useEffect)(()=>{el&&u.forEach((e,t)=>{L.current[t]||(L.current[t]={fetchTimestamp:Date.now(),measureTimestamp:0,hasRendered:!1,pageCount:eo.current})}),es.current=u.length,eo.current+=1},[u]),(0,i.useEffect)(()=>{W.current&&(W.current=!1)},[]),(0,i.useEffect)(()=>{let e=()=>U.current+=1;return el&&(er.current=Date.now(),window.addEventListener("scroll",e)),()=>{if(el){let t=L.current;window.removeEventListener("scroll",e);let a=t.filter(e=>!!e.measureTimestamp).length,i=t.filter(e=>e.hasRendered).length,n=es.current,l={deviceType:C,experimentName:et,experimentGroup:ea,handlerId:D,isAuthenticated:j};(0,f.LY)("webapp.masonry.timeSpent",er.current?Date.now()-er.current:0,{tags:l}),(0,f.S0)("webapp.masonry.itemsFetched",n,{tags:l}),(0,f.S0)("webapp.masonry.itemsMeasured",a,{tags:l}),(0,f.S0)("webapp.masonry.itemsMeasuredPercentage",Math.floor(a/n*100),{tags:l}),(0,f.S0)("webapp.masonry.itemsRendered",i,{tags:l}),(0,f.S0)("webapp.masonry.itemsRenderedPercentage",Math.floor(i/n*100),{tags:l}),(0,f.S0)("webapp.masonry.scrollCount",U.current,{tags:l})}}},[]);let ec=(0,i.useCallback)(e=>el?(0,x.jsx)(b,{analyticsData:L,idx:e.itemIdx,isMeasuring:e.isMeasuring,masonryV2ExpGroup:ea,masonryV2ExpName:et,children:(0,x.jsx)(r.Z,{name:"MasonryItem",children:P(e)})}):(0,x.jsx)(r.Z,{name:"MasonryItem",children:P(e)}),[P]);return(0,x.jsx)("div",{className:"masonryContainer","data-test-id":"masonry-container",id:s,children:(0,x.jsxs)("div",{className:J,children:[K&&W.current?(0,x.jsx)(h.Z,{"data-test-id":"masonry-ssr-styles",unsafeCSS:X}):null,(0,x.jsx)(n.xu,{"data-test-id":"max-width-container",marginBottom:0,marginEnd:"auto",marginStart:"auto",marginTop:0,maxWidth:e.maxColumns?V*e.maxColumns:void 0,children:ee?(0,x.jsx)(n.GX,{ref:e=>{w&&(w.current=e)},_getColumnSpanConfig:I,_logTwoColWhitespace:e=>{(0,f.S0)("webapp.masonry.twoColWhitespace",e,{sampleRate:1,tags:{columnWidth:M,minCols:N}}),F({event_type:14705,component:14468,aux_data:{whitespace_px:e}})},_measureAll:ei,align:t,columnWidth:M,gutterWidth:Z,items:u,layout:z?H:S??"basic",loadItems:k,measurementStore:G,minCols:N,positionStore:$,renderItem:ec,scrollContainer:B,virtualBufferFactor:.3,virtualize:E}):(0,x.jsx)(n.Rk,{ref:e=>{w&&(w.current=e)},_getColumnSpanConfig:I,_logTwoColWhitespace:e=>{(0,f.S0)("webapp.masonry.twoColWhitespace",e,{sampleRate:1,tags:{columnWidth:M,minCols:N}}),F({event_type:14705,component:14468,aux_data:{whitespace_px:e}})},align:t,columnWidth:M,gutterWidth:Z,items:u,layout:z?H:S??"basic",loadItems:k,measurementStore:G,minCols:N,positionStore:$,renderItem:ec,scrollContainer:B,virtualBufferFactor:.3,virtualize:E})})]})})}},547643:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(340523),n=a(5859);function l(e){let{isAuthenticated:t}=(0,n.B)(),a=t?"web_masonry_v2_auth":"web_masonry_v2_unauth",{checkExperiment:l}=(0,i.F)(),{anyEnabled:r,group:s}=l(a,{dangerouslySkipActivation:e?.skipActivation??!1});return{expName:a,anyEnabled:r,group:s,isMeasureAllEnabled:"enabled_measure_all"===s||"enabled_measure_all_impression_fix"===s,isImpressionFixEnabled:"control_impression_fix"===s||"enabled_impression_fix"===s||"enabled_measure_all_impression_fix"===s}}},930837:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>c,b7:()=>r.b7,bN:()=>s,p4:()=>o});var i=a(240684),n=a(554786),l=a(785893),r=a(844683);let s=(0,i.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(51879).then(a.bind(a,980536)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return a(t)},resolve:()=>980536}),o=(0,i.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(72430).then(a.bind(a,119936)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return a(t)},resolve:()=>119936});function c(e){let t=(0,n.ZP)(),a=void 0===e.isOpen||e.isOpen;if("desktop"===t&&a){let{isOpen:t,mobileAccessibilityCloseIconLabel:a,mobileAllowScroll:i,mobileHideCloseIcon:n,mobileIsFullscreen:r,mobileIsSlideUp:o,type:c,mobileIsFooter:u,zIndex:d,...p}=e;return(0,l.jsx)(s,{...p})}let{allowMediaPlay:i,allowScroll:r,role:c,size:u,_dangerouslyDisableScrollBoundaryContainer:d,...p}=e;return(0,l.jsx)(o,{...p,isOpen:a})}},844683:(e,t,a)=>{"use strict";a.d(t,{JN:()=>c,Vf:()=>u,ZM:()=>s,b7:()=>r,i_:()=>o});var i=a(883119),n=a(696534),l=a(425040);let r=new i.Ry(1e3),s=new i.H3([l.Z]),o=12,c=({variant:e})=>({__style:"fullscreen"===e?{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{border:(0,n.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e?{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"}:{border:(0,n.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",borderRadius:"32px 32px 0 0"}}),u=({isFullscreen:e,isTablet:t,isShowing:a,isRelatedInterestsModal:i})=>{let l={border:(0,n.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},r=a?"translateY(0)":"translateY(100vh)";return l.height=e?"100vh":"",t&&i&&(l={...l,width:425,left:"50%",transform:"translateX(-50%)"},r=a?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...l,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:r}}}},454514:(e,t,a)=>{"use strict";a.d(t,{UZ:()=>c,Vg:()=>o,ZP:()=>u});var i=a(667294),n=a(883119),l=a(554786),r=a(494125),s=a(785893);let o=200,c=({deviceType:e,hiding:t,visible:a})=>{let i="desktop"===e,n=0,l=i?"translateY(200px)":"translateY(-200px)",r="opacity 0.1s ease-in-out",s="hidden";return a&&!t&&(n=1,l="translateY(0)",r="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",s="visible"),a&&t&&(l="scale(1.1)",r="opacity transform 0.2s"),{opacity:n,pointerEvents:"auto",position:"relative",marginTop:i?10:0,transform:l,transition:r,visibility:s}};function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:a,primaryAction:u,dismissButton:d,helperLink:p,thumbnail:m,type:h,dataTestId:g,duration:_=2e3,onHide:y,href:f,onClick:v,openNewPage:x,imageUrl:b}){let S;let k=(0,l.ZP)(),[w,P]=(0,i.useState)(!1),[T,E]=(0,i.useState)(!1),I=(0,i.useRef)(),C=()=>{P(!0),I.current=setTimeout(y,o)},j=()=>{I.current=setTimeout(C,_)},A=()=>{I.current&&clearTimeout(I.current)};(0,r.Z)(()=>(setTimeout(()=>E(!0),100),j(),A)),b&&(S={image:(0,s.jsx)(n.Ee,{alt:"string"==typeof a?a:`${a[0]} ${a[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:b})});let F=(0,s.jsx)(n.FN,{_dangerouslySetPrimaryAction:t,_dangerouslySetThumbnail:e,dismissButton:d,helperLink:p,primaryAction:u,text:a,thumbnail:S??m,type:h}),{marginTop:R,opacity:O,pointerEvents:D,position:L,transform:M,transition:Z,visibility:N}=c({deviceType:k,hiding:w,visible:T});return(0,s.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:M,transition:Z,visibility:N,pointerEvents:D}},"data-test-id":g??"toast",display:"flex",marginTop:R,onMouseEnter:A,onMouseLeave:j,opacity:O,position:L,children:f?(0,s.jsx)(n.Tg,{href:f,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{f.startsWith("#")&&(e.preventDefault(),t()),v?.(e)},rounding:"pill",target:x?"blank":null,children:F}):F})}},205841:(e,t,a)=>{"use strict";a.d(t,{qE:()=>s,u_:()=>o.ZP});var i=a(883119),n=a(785893);let l=(e,t)=>{let a=e?.includes("images/user/default");return!!(a&&t)};function r({accessibilityLabel:e,name:t,outline:a,size:r,src:s,verified:o}){return(0,n.jsx)(i.qE,{accessibilityLabel:e,name:t,outline:a,size:r,src:l(s,t)?void 0:s,verified:o})}r.displayName="Avatar";let s=r;var o=a(930837);a(454514)},213377:(e,t,a)=>{"use strict";a.d(t,{$H:()=>r,$q:()=>f,D6:()=>c,KN:()=>x,Lo:()=>n,P2:()=>g,TS:()=>b,Wv:()=>v,ZZ:()=>d,g5:()=>p,jC:()=>s,lX:()=>h,nW:()=>m,oX:()=>_,qG:()=>y,tG:()=>l,yF:()=>i,yc:()=>u,yt:()=>o});let i=236,n=2*i/3,l=175,r=24,s=4,o=8,c=2,u=2,d=14,p=16,m=12,h=16,g=24,_=16,y=-1,f=(e=!1,t=!1)=>e?t?h:m:g,v=({contentVisibleItemCount:e,gap:t,isDesktop:a,moduleWidth:n})=>e||n?Math.min((n-Math.ceil(e)*t)/e,a?i:l):i,x=(e,t,a,i,n=d)=>{let l=e+n,r=`
@media (min-width: ${t*l}px) and (max-width: ${(a+1)*l-1}px) {
  ${i}
}
`;return r},b=(e,t,a)=>{let n=a?3:2,r=t?5:n,s=t?i:l,c=t?_:o,u=s*r+c*r-(t?12:!t&&a?12:6);if(!e)return u;for(let t=r;t>=2&&!(e>u);t-=1)u=s*t+c*t;return u}},388769:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(72461),n=a(5859),l=a(785893);let r=({currency:e,maximumFractionDigits:t,minimumFractionDigits:a,shortform:r,shortformMaximumFractionDigits:s,formatStyle:o,uplimit:c,value:u})=>{let d=(0,i.Z)();return(0,l.jsx)(n.LC,{children:i=>d(i.locale||"en-US",u,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:a,shortform:r,shortform_maximum_fraction_digits:s,style:o,uplimit:c})})}},367295:(e,t,a)=>{"use strict";a.d(t,{MF:()=>l,PB:()=>r,Ul:()=>s,XD:()=>i});let i={AUD:"A$",BRL:"R$",CAD:"$",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"\xa3",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$",JPY:"\xa5",CHF:"₣"},n=function(e){let t=1.1.toLocaleString(e).substring(1,2);return t},l=function(e,t){return","===n(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},r=function(e,t){return","===n(t)&&e?e.replace(",","."):e};function s(e,t,a,i=!1){let{minimumFractionDigits:n,maximumFractionDigits:l}=new Intl.NumberFormat(t,{style:"currency",currency:a}).resolvedOptions(),r=void 0===n?2:n,s=void 0===l?2:l;return e.toLocaleString(t,{maximumFractionDigits:i&&s>0?3:s,minimumFractionDigits:i&&r>0?3:r})}},306604:(e,t,a)=>{"use strict";function i(e,t){let a=e*Math.pow(10,t),i=Math.round((a-parseInt(a,10))*10)/10;return -.5===i&&(i=-.6),a=Math.round(parseInt(a,10)+i)/Math.pow(10,t)}function n(e){let t=parseFloat(e),a=i(t,2);return a?a.toFixed(2):e}function l(e,t=!1,a=""){let i=100,n=1e4;if(a){let{maximumFractionDigits:e}=new Intl.NumberFormat(void 0,{style:"currency",currency:a}).resolvedOptions();"number"==typeof e&&(n=1e6/(i=Math.pow(10,e)))}return t&&(i=1e3,n=1e3),Math.round(e*i)*n}function r(e,t=!1){if(Number.isNaN(e))return 0;let a=1e6;return t&&(a=1e6),e/a}function s(e){return e?n(r(e).toString()):""}a.d(t,{$X:()=>r,Hy:()=>s,c3:()=>p,cq:()=>n,q$:()=>i,qq:()=>d,y:()=>l});let o={fractionalCentFormatData:{},formatData:{}};function c(e){return e&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")),e}function u(e,t=!1){let a=t?"fractionalCentFormatData":"formatData",i=o[a][e];if(!i){let n=2,l=2,r=-9999.99;t&&(n=3,l=3,r=-9999.999);let s=new Intl.NumberFormat(e,{minimumFractionDigits:n,maximumFractionDigits:l}),u=s.formatToParts(r),d=u.find(e=>"minusSign"===e.type),p=u.find(e=>"group"===e.type),m=u.find(e=>"decimal"===e.type),h=p?p.value:"",g=c(h),_=m?m.value:"",y="[^0-9"+g+c(_)+c(d?d.value:"")+"]";i={format:s,decimal:m?m.value:null,group:h,groupRegex:RegExp(g||"","g"),cleaner:RegExp(y,"g")},o[a][e]=i}return i}function d(e,t,a=!1){if("number"==typeof e)return e;if("string"!=typeof e)return NaN;let i=u(t,a),n=e.replace(i.cleaner,"");return i.decimal&&(n=n.replace(i.decimal,"!_!")),i.group&&(n=n.replace(i.groupRegex,"")),parseFloat(n=n.replace("!_!","."))}function p(e,t,a=!1){let i=u(t,a);return i.format.format(e)}},339001:(e,t,a)=>{"use strict";a.d(t,{Wc:()=>o,bF:()=>u,nk:()=>s,r7:()=>d});var i=a(667294),n=a(785893);function l(e,t,a){return e.split(a).map(e=>{if(e.match(a)){let a=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,a))return t[a]}return e})}let r=/(\{\{\s*\w+\s*\}\})/g;function s(e,t){return l(e,t,r)}function o(e,t){return l(e,t,r).join("")}let c=/(\{\s*\w+\s*\})/g;function u(e,t){return l(e,t,c)}let d=({text:e})=>Array.isArray(e)?e.map((e,t)=>(0,n.jsx)(i.Fragment,{children:e},t)):e},681508:(e,t,a)=>{"use strict";a.d(t,{Q4:()=>d,Rq:()=>l,Vf:()=>r,ab:()=>c,jd:()=>s,nw:()=>u,oy:()=>o});var i=a(658583),n=a(622541);let l=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,r=28,s=e=>window.innerHeight>=748&&l(e),o=function(){return"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||navigator.maxTouchPoints>1&&"MacIntel"===navigator.platform)},c=()=>{i.t8(n.oj,String(!0),(0,i.kZ)(n.oj))},u=()=>!!i.U2(n.oj),d=()=>{if(o()){let e=u();e||(c(),"undefined"!=typeof window&&window.location.reload(!0))}}},588664:(e,t,a)=>{"use strict";function i(e,t,a=28){let i;if(!(e||{}).resurrection_info&&!(t||{}).resurrectionInfo)return!1;i=t?((t||{}).resurrectionInfo||{}).resurrectionDate:((e||{}).resurrection_info||{}).resurrection_dt;let n=new Date,l=i?new Date(i):n;return l.setDate(l.getDate()+a),new Date().getTime()<l.getTime()}a.d(t,{Z:()=>i})},179425:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var i=a(883119),n=a(213377),l=a(681508),r=a(403862),s=a(5859),o=a(785893);let c=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:a=!1,hasGutter:c=!0,height:u,showKeychainError:d=!1,useViewport:p=!1})=>{let m=(0,s.B)(),h=(0,l.jd)(m.userAgent.platform)?l.Vf:0;return(0,o.jsx)(i.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${h}px)`:u,paddingX:c?n.D6:void 0,paddingY:a||d?void 0:3,children:(0,o.jsx)(r.C,{value:!!c,children:e})})}},403862:(e,t,a)=>{"use strict";a.d(t,{C:()=>l,V:()=>r});var i=a(667294);let n=(0,i.createContext)(!1),l=n.Provider,r=()=>(0,i.useContext)(n)},444781:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(201417);function n(e,t=!1){let a=(t,a)=>e(a);return e=>(function e(t,a=!1){return n=>{if(!(0,i.Z)(n))return a&&Array.isArray(n)?n.map(e(t,a)):n;let l={};return Object.keys(n).forEach(r=>{let s=t(n[r],r);(0,i.Z)(n[r])||a&&Array.isArray(n[r])?l[s]=e(t,a)(n[r]):l[s]=n[r]}),l}})(a,t)(e)}},189469:(e,t,a)=>{"use strict";function i(e,t,a){return!!(e&&e.trim().length>0&&t&&!a)}a.d(t,{r:()=>i})},391884:(e,t,a)=>{"use strict";function i({embedSrc:e,embedType:t,imagesUrls:a,preferredResolution:i,excludeOriginals:n}){if(!e&&!t&&!a)return"";if("gif"===t)return e||"";if(!a)return"";if(i){let e="474x"===i&&a["474x"]||"236x"===i&&a["236x"]||a["736x"];if(e)return e}let l=Object.keys(a).reduce((e,t)=>{try{let i=t.split("x")[0];if(Number.isNaN(Number(i)))return{...e,[t]:a[t]};return{...e,[i]:a[t]}}catch(t){return e}},{}),r=Object.keys(l);n&&"orig"===r[r.length-1]&&r.pop();let s=r.pop();return l[s]||""}a.d(t,{Z:()=>i})},567344:(e,t,a)=>{"use strict";a.d(t,{eg:()=>r,kt:()=>g,rw:()=>m,fs:()=>u,eK:()=>d,Ly:()=>p,BY:()=>h,bN:()=>_,RC:()=>o,EU:()=>c});let i=/\s\s+/g,n=e=>e.replace(i," ");var l=a(564855);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_description","is_sensitive_rich_pin_title","is_sensitive_board_title"])),s=e=>"string"==typeof e?e:"",o=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,c=(e,t)=>e?e.trim().length>t?(0,l.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})=>{let r=l||e,s=c(t,200);return s||a||i||(n&&r?r:null)},d=e=>{let{richSummaryDisplayName:t}=e,a=e.pinJoinVisualAnnotation||[],i=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=a.map(e=>(i||{})[e]||{name:e,url:""}),c="",u=(t||"").toLocaleLowerCase().trim(),d=r.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==u?c=s:r&&r.length>3&&d!==u&&(c=r),c&&(c=n((0,l.ZP)(c,496)).trim()),{description:c,annotationsWithLinks:o}},p=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:s,seoNoindexReason:o,seoTitle:c})=>r.has(o??"")?c:u({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})||s?.[0]||e,m=(e,t,a,i,n)=>{let l=s(e).trim(),r=(e,t)=>t&&t.length>0?`${e} ${t.join(", ")}`:e;return i&&i.trim().length?r(i.trim(),a):n&&n.trim().length?n.trim():l?r(l,a):a?a.join(", "):""},h=e=>`/pin/${e}/`,g=(e,t)=>{let a=`Pinterest video from ${t}: `.concat(e);return""===t?e:a},_=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:h(e)},777609:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i,n=a(667294);a(167912);var l=a(207012);let r=void 0!==i?i:i=a(467061);function s({pinKey:e,maxWidth:t}){let a=(0,l.Z)(r,e),i=a?.imageSpec_564x||a?.imageSpec_736x||a?.imageSpec_orig||a?.imageSpec_474x||a?.imageSpec_236x,s=i?.width||1,o=i?.height||1,c=i?.url||"",u=function(e,t,a=564){return e>a&&(t*=a/e,e=a),{width:e,height:t}}(s,o,t),d=(0,n.useCallback)(()=>({width:u.width,height:u.height,url:c}),[u.height,u.width,c]);return{getNormalizedPinImage:d}}},781705:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s}),a(167912);var i,n=a(207012),l=a(140017);let r=void 0!==i?i:i=a(374963),s=e=>{let t;let a=(0,l.ZP)(),i=(0,n.Z)(r,e),s=i.trackedLink||i.link||i.imageSpec_orig&&i.imageSpec_orig.url,{richMetadata:o,richSummary:c}=i,u=a._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=a._('Product sold by ', 'pin annotation', 'pin annotation'),t=(o.products?.[0]||void 0)?.offerSummary),!t&&c&&c&&c.products&&c.products[0]&&c&&c.products[0].name&&c.products[0].offerSummary&&(u=a._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:i.closeupUnifiedTitle,pinDescription:i.closeupUnifiedDescription,pinCategory:i.category}}},661428:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r}),a(167912);var i,n=a(207012);let l=void 0!==i?i:i=a(77003),r=e=>{let t=(0,n.Z)(l,e),a=[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]];return a.reduce((e,[t,a])=>a?{...e,[t]:a.url}:e,{})}},414131:(e,t,a)=>{"use strict";function i({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:a,hasPinRichMetadataArticle:i,hasPinRichMetadataRecipe:n,hasPinStoryPinData:l}){if(e){if(t)return a?144:i?141:n?145:139;if(l)return 157}return 140}a.d(t,{Z:()=>i})},448318:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(262032),l=a(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,a)=>{let n=(0,i.useRef)(null),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e!==n.current||a&&a!==l.current){n.current=e;let a=r(e);a?.complete&&t()}l.current=a},[e,t,a])};function o({alt:e,children:t,color:a,elementTiming:i,isActive:r=!1,naturalHeight:o,naturalWidth:c,onLoad:u,src:d,fit:p="none"}){return s(d,u,r),(0,l.jsx)(n.Z,{alt:e,color:a,elementTiming:i,fit:p,naturalHeight:o,naturalWidth:c,onLoad:u,src:d,children:t})}},493538:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(760890),n=a(667294),l=a(107860),r=a(906623),s=a(297315);function o({children:e,isAtEndOfFeed:t,pinData:a,itemCount:o,includeBackgroundImages:c=!1,includeVideos:u=!1,includeSections:d=!1}){let p=s.N5()?.isAuthenticated;return p||(d=!0),(0,i.Z)({pinData:a,isAtEndOfFeed:t,includeBackgroundImages:c,includeVideos:u,includeSections:d}),!function(e){let t=(0,r.E)(),a=(0,n.useRef)(null);(0,n.useEffect)(()=>{e!==a.current&&(a.current=e,t&&(0,l.ZP)(l.at))},[!!t,e])}(o),e}},686769:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,Z:()=>s});var i=a(667294),n=a(883119),l=a(785893);let r=({fill:e})=>{let t="half"===e?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(n.xu,{position:"absolute",children:(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:t})};function s({max_rating:e,rating:t}){var a;let i=[],s=parseFloat(e)||5,o=5*(a=(a=parseFloat(t)||0)<=s?a:s)/s;if(Number.isNaN(o))return null;let c=Math.floor(o),u=o-c;return[...Array(c).keys()].forEach(e=>i.push((0,l.jsx)(r,{fill:"full"},e))),u>=.75?i.push((0,l.jsx)(r,{fill:"full"},i.length)):u>=.25&&i.push((0,l.jsx)(r,{fill:"half"},i.length)),[...Array(5-i.length).keys()].forEach(()=>i.push((0,l.jsx)(r,{fill:"empty"},i.length))),(0,l.jsx)(n.xu,{display:"inlineBlock",position:"relative",width:15*s,children:i})}},909886:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i=a(667294),n=a(883119),l=a(230556),r=a(249123),s=a(140017),o=a(785893);function c({category:e,ingredients:t,textSize:a="300"}){return(0,o.jsxs)(n.xu,{children:[e&&(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.xv,{size:a,weight:"bold",children:e})}),(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsxs)(n.xv,{size:a,children:["• ",e.amt||null," ",e.name]})})},t))})]})}var u=a(177021),d=a(153896),p=a(923368);function m({recipeProps:e,marginOverrides:t}){let a=(0,s.ZP)(),{image:m,name:h,categorizedIngredients:g}=e.recipe,{stackedCloseupEnabled:_}=(0,p.x4)(),y=a._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description');if(g&&g.length){let e=[];g.forEach(t=>e.push(t.ingredients))}return(0,o.jsx)(n.xu,{marginTop:_?0:8,children:(0,o.jsxs)(u.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,o.jsx)("meta",{content:h,itemProp:"name"}),(0,o.jsx)("meta",{content:m,itemProp:"image"}),(0,o.jsx)(d.Z,{heading:y,children:(0,o.jsx)(r.Z,{children:(0,o.jsx)(n.xu,{marginTop:4,children:g.map(({category:e,ingredients:a},r)=>{let s=`ingredient-${r}`;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(n.xu,{marginBottom:t?.ingredientMarginBottom||4,children:(0,o.jsx)(c,{category:e,ingredients:a,textSize:l.n})})},s)})})})})]})})}},569372:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=new class{constructor(){var e,t,a;t={},(e="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e="pending","string"))?a:String(a))in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}add(e,t,a){a&&(this.pending[e]={...this.pending[e]??{},[t]:a},a.finally?.(()=>this.remove(e,t)))}remove(e,t){this.pending[e]?.[t]&&(delete this.pending[e][t],0===Object.keys(this.pending[e]).length&&delete this.pending[e])}get(e,t){return this.pending[e]?.[t]??null}}},638747:(e,t,a)=>{"use strict";a.d(t,{UZ:()=>d,Z8:()=>p,my:()=>m,vL:()=>h});var i=a(667294);a(702664);var n=a(216167),l=a(342513),r=a(785893);function s(e,t,a){let i=[...t[e][a.payload.name]??[],a.payload.handler],n={...t};return n[e]={...t[e],[a.payload.name]:i},n}function o(e,t,a){if(!t[e][a.payload.name])return t;let i=t[e][a.payload.name].filter(e=>e!==a.payload.handler),n={...t};return n[e]={...t[e],[a.payload.name]:i},n}let{Provider:c,useHook:u}=(0,l.Z)("ResourceContext");function d({children:e,resourceCreator:t}){let[{listeners:a,moreListeners:l},u]=(0,i.useReducer)((e,t)=>{switch(t.type){case"addListener":return s("listeners",e,t);case"addMoreListener":return s("moreListeners",e,t);case"removeListener":return o("listeners",e,t);case"removeMoreListener":return o("moreListeners",e,t);default:return e}},{listeners:{},moreListeners:{}});n.Z.fetchCompleteCallback=({resource:e,options:t,response:i,normalizedResponse:n,refresh:l,resourceSchema:r})=>{a[e]&&a[e].forEach(a=>a({isRefresh:l,normalizedResponse:n,options:t,schema:r,resource:e,response:i}))},n.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:a,normalizedResponse:i,refresh:n,resourceSchema:r})=>{l[e]&&l[e].forEach(l=>l({isRefresh:n,normalizedResponse:i,options:t,schema:r,resource:e,response:a}))};let d=(0,i.useMemo)(()=>({listenerDispatch:u,resourceCreator:t}),[t]);return(0,r.jsx)(c,{value:d,children:e})}function p(e,t){let{listenerDispatch:a}=u();(0,i.useEffect)(()=>(a({type:"addListener",payload:{name:e,handler:t}}),()=>{a({type:"removeListener",payload:{name:e,handler:t}})}))}function m(e,t){let{listenerDispatch:a}=u();(0,i.useEffect)(()=>(a({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{a({type:"removeMoreListener",payload:{name:e,handler:t}})}))}function h(){return u().resourceCreator}},227258:(e,t,a)=>{"use strict";a.d(t,{U:()=>u,b:()=>d});var i=a(216167),n=a(288240),l=a(839967),r=a(827625),s=a(197036),o=a(838458);function c({addSuspenseResourceSSRData:e,fetchOptions:t,resource:a,resourceCreator:u,retry:d}){return(p,m)=>{let{bookmark:h,headers:g,options:_,refresh:y,schema:f}=t,v=(0,n.Z)(_);if(m().resources?.[a]?.[v]?.fetching&&!d)return Promise.resolve();let x=d?d.bookmark:h,b=x?{..._,bookmarks:[x]}:_;p((0,r.LQ)(a,_,!0));let S=u??i.Z.create;return S(a,b).callGet(void 0,g).then(t=>(e&&t.resource&&e(t),t)).then(e=>{let[n]=e.bookmarks||[],{data:m}=e.resource_response,{normalizedResponse:g,resourceSchema:v}=(0,o.f)({data:m,opts:{bookmark:h,options:_,schema:f},resource:a})||{normalizedResponse:null,resourceSchema:void 0},x=e.resource?null:e;if(e.resource){n=e.resource_response.bookmark||"";let t=(0,s.Z)(e);g=t.normalizedResponse,v=t.schema,x=t.response}if(Array.isArray(m)&&0===m.length&&n&&n!==l.qx){let e=d?d.count:0,i=e>=l.s9;if(!i)return p(c({resource:a,fetchOptions:t,retry:{count:e+1,bookmark:n},resourceCreator:u}))}return x&&(h?(p((0,r.Dm)(a,_,x,g,v)),i.Z.fetchMoreCompleteCallback&&i.Z.fetchMoreCompleteCallback({resource:a,options:_,response:x,normalizedResponse:g,refresh:y,resourceSchema:v})):(p((0,r.Sr)(a,_,x,g,y,v)),i.Z.fetchCompleteCallback&&i.Z.fetchCompleteCallback({resource:a,options:_,response:x,normalizedResponse:g,refresh:y,resourceSchema:v}))),Promise.resolve()},e=>{p((0,r.Tl)(a,_,e))})}}let u=(e,{bookmark:t,headers:a,options:i,schema:n},l,r)=>c({resource:e,fetchOptions:{bookmark:t,headers:a,options:i,refresh:!1,schema:n},resourceCreator:l,addSuspenseResourceSSRData:r}),d=(e,{headers:t,options:a,schema:i},n)=>c({resource:e,fetchOptions:{headers:t,options:a,refresh:!0,schema:i},resourceCreator:n})},827625:(e,t,a)=>{"use strict";a.d(t,{Dm:()=>o,LQ:()=>l,Sr:()=>s,Tl:()=>r,XM:()=>n,jB:()=>c});var i=a(419821);function n(e,t,a,n){return{type:i.AF,payload:{resource:e,options:t,response:a,normalizedResponse:n}}}function l(e,t,a){return{type:i.KK,payload:{resource:e,options:t,isFetching:a}}}let r=(e,t,a)=>({type:i.cR,payload:{resource:e,options:t,error:a}});function s(e,t,a,n,l,r){return{type:i.zP,payload:{isRefresh:l,normalizedResponse:n,options:t,resource:e,response:a,schema:r}}}function o(e,t,a,n,l){return{type:i.aW,payload:{resource:e,options:t,response:a,normalizedResponse:n,schema:l}}}function c(e,t){return{type:i.se,payload:{resource:e,optionsOrOptionsKey:t}}}},197036:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(782677),n=a(888037),l=a(838458);function r(e){let{resource:t,resource_response:a}=e,{name:r,options:s}=t,o=(0,n.Z)(a),{data:c,error:u}=a,d=(0,l.J)(r,{options:s}),p=d&&c?(0,i.Fv)(c,d):null;return{error:u,isRefresh:!1,normalizedResponse:p,options:s,resource:r,response:{auxData:o,resource_response:{data:c,error:u}},schema:d}}},637253:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var i=a(667294),n=a(702664),l=a(288240),r=a(5859),s=a(227258),o=a(839967),c=a(569372),u=a(638747),d=a(342513);let{Provider:p,useMaybeHook:m}=(0,d.Z)("SuspensefulResource"),h=({httpStatus:e})=>!e||e>=500;function g(e,t,a,d){let{headers:p,name:g,noCache:_,options:y,schema:f}=e;m();let v=function(){let e=m();return e?t=>e.addToBeSentData(t):()=>{}}(),x=(0,u.vL)(),b=(0,n.useDispatch)(),S=(0,l.Z)(y),k=(0,i.useRef)(),w=e=>(e[g]||o.U_)[S]||o.U_,P=(0,n.useSelector)(({resources:e})=>{let t=w(e);return!!t.error||void 0!==t.data}),T=(0,n.useSelector)(({resources:e})=>w(e).error),E=(0,n.useSelector)(({resources:e})=>!!w(e).fetching),I=(0,i.useCallback)(e=>{let t=b((0,s.U)(g,{options:y,schema:f,bookmark:e,headers:p},x,v));c.Z.add(g,S,t)},[b,g,S,f,p]),C=(0,i.useCallback)(()=>{let e=b((0,s.b)(g,{options:y,schema:f,headers:p},x));c.Z.add(g,S,e)},[b,g,S,f,p]),{isBot:j}=(0,r.B)(),A=(0,i.useCallback)(()=>{if(!(E||c.Z.get(g,S))&&!a&&k.current!==S){let e=void 0===k.current;k.current=S,!P||d&&e&&T&&h(T)?I():(!j&&_||t)&&C()}},[d,I,C,a,T,j,E,P,t,g,_,S]),F=(0,i.useMemo)(()=>({name:g,optionsKey:S}),[g,S]),R=(0,i.useMemo)(()=>({fetchResource:A,dispatchGet:I,dispatchRefresh:C,ref:F}),[A,I,C,F]);return R}},757640:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var i=a(667294),n=a(702664),l=a(616550),r=a(288240),s=a(227258),o=a(839967),c=a(637253);function u(e){let{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:a,headers:u,name:d,noCache:p,options:m,schema:h}=e??{name:o.fY,options:null},g=!e,_=(0,r.Z)(m),y=(0,i.useRef)(null),f=(0,l.k6)(),v=f&&"POP"!==f.action,x=e=>(e[d]||o.U_)[_]||o.U_,b=(0,n.useSelector)(({resources:e})=>x(e).nextBookmark),S=(0,n.useSelector)(({resources:e})=>x(e).data),k=(0,n.useSelector)(({resources:e})=>x(e).auxData),w=(0,n.useSelector)(({resources:e})=>x(e).error),P=(0,n.useSelector)(({resources:e})=>!!x(e).fetching),T=!!w||void 0!==S,E=T&&!P&&b===o.qx,I=!!(T&&t&&v&&!g),[C,j]=(0,i.useState)(I),{fetchResource:A,dispatchGet:F,dispatchRefresh:R}=(0,c.Z)({headers:u,name:d,noCache:p,options:m,schema:h},I,g,!0);(0,i.useEffect)(()=>{a||A()}),a&&A();let O=(0,i.useCallback)(()=>{g||(R(),j(!0))},[g,s.b,d,_,u,j]),D=(0,i.useCallback)(()=>{!b||E||P||g||F(b)},[g,F,b,E,P]);if(y.current){if(T&&!P)y.current=null;else if(a)throw y.current}let L=(0,i.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:D,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:O}),M={auxData:k,data:S,error:w,fetchMore:D,isAtEnd:E,isFetching:P,isLoaded:T,isRefreshing:C,nextBookmark:b,refresh:O};return(0,n.shallowEqual)(M,L.current)||(C&&(L.current.data||!I)&&!(0,n.shallowEqual)(M.data,L.current.data)&&(M.isRefreshing=!1,j(!1)),L.current=M),L.current}},7829:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(757640),n=a(149722),l=a(616550),r=a(5859),s=a(554786),o=a(624797);function c({getOptions:e,checkExperiments:t,disableFetch:a,...c}){let u=function(){let e=(0,n.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:d,fetchDisabled:p}=function({checkExperiments:e,disableFetch:t,viewer:a}){let i=(0,l.TH)(),n=(0,l.$B)(),c=(0,r.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:a,search:i},inviteCode:n,match:{params:l,path:r},viewer:s}){let c={inviteCode:n,matchPath:r,params:l,parsedSearch:(0,o.mB)(i),pathname:a,search:i},u={country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0};return{advertiser:e,deviceType:t,routeData:c,user:u}}({advertiser:c.advertiser,deviceType:(0,s.Mq)(c),location:i,match:n,viewer:a,inviteCode:c.inviteCode??""}),d=!!t&&t(u),p=!!d||!e||e(c.experimentsClient);return{args:u,fetchDisabled:d||!p}}({checkExperiments:t,disableFetch:a,viewer:u}),m=e?e(d):void 0;return(0,i.Z)(p?null:{options:m,...c})}},177021:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(785893);let n=e=>{let t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,i.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},14583:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(667294),n=a(785893);function l({children:e,fallback:t}){return(0,n.jsx)(i.Suspense,{fallback:t||null,children:e})}},233440:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(301923);let n=(0,i.Z)({type:"session"}),l=n},156725:(e,t,a)=>{"use strict";function i(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}a.d(t,{Z:()=>i})},873955:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(958881);let n=/\{\{\s*(\w+)\s*\}\}/g,l=(e,t)=>(0,i.Z)(n,e,t)},498659:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},958881:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(e,t,a)=>t?t.replace(e,(e,t)=>a&&Object.prototype.hasOwnProperty.call(a,t)?a[t]:""):""},427514:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(873955),n=a(498659);let l=(e,t)=>{let a={};return Object.keys(t).forEach(e=>{a[e]=t[e]?(0,n.Z)(t[e].toString()):""}),(0,i.Z)(e,a)}},564855:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n,mP:()=>i});let i="…";function n(e,t=80,a=i,n=!1){let l;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||n)l=e.substring(0,t);else{let a=e.lastIndexOf(" ",t);l=e.substring(0,a)}return(l=l.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a}},325362:(e,t,a)=>{"use strict";function i(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}a.d(t,{Z:()=>i})},627408:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var i=a(667294),n=a(541841),l=a(901855),r=a(5859),s=a(520893),o=a(503325),c=a(342513);let{Provider:u,useMaybeHook:d}=(0,c.Z)("timeSpentContext");var p=a(822987),m=a(19447),h=a(785893);function g(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends i.Component{constructor(e){super(e),g(this,"componentWillUnmount",()=>{this.unregisterComponent()}),g(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:a,objectId:i,timeSpentContext:n,view:l,viewParameter:r}=this.props;return{view:l||n?.view,viewParameter:r||n?.viewParameter,component:t||n?.component,element:a,objectId:i||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),g(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),g(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),g(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),g(this,"getTimedPair",()=>this.state.timedPair),g(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),g(this,"isRegistered",!1),g(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),g(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),g(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:a,left:i,right:n,top:l}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===a&&0===i&&0===n&&0===l?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new o.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,s.Z)(e.auxData,this.props.auxData)&&(0,s.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e}=this.props;return(0,h.jsx)(u,{value:this.getContext(),children:(0,h.jsx)(n.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:i.Children.only(e)})})}}function y(e){let t=(0,l.Hv)(),a=d(),n=(0,p.w)(),s=(0,m.H0)(),{requestIdentifier:o=""}=(0,r.B)(),c={app_instance_id:o.slice(0,8),...e.auxData??{}};return(0,i.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,i.useEffect)(()=>{n?.setPins(s??{})},[s,n]),n?(0,h.jsx)(_,{...e,auxData:c,timeSpentContext:a,timeSpentManager:n,children:e.children}):e.children}y.displayName="TimeSpent";let f=y},274262:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({ariaHidden:e=!1,color:t="darkGray",size:a}){return(0,n.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,n.jsx)(i.xv,{color:t,inline:!0,size:a??"200",children:"\xb7"})})}},13848:(e,t,a)=>{"use strict";a.d(t,{F9:()=>l,Zo:()=>n});var i=a(342513);let{Provider:n,useHook:l}=(0,i.Z)("toastManagerContext")},862249:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(968946);let n=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,i.Z)(e))},689390:(e,t,a)=>{"use strict";function i(e){if((e||"").includes("--")){let t=e.split("--"),a=t.pop();return{text:t.join("--"),pinId:a}}return{text:"",pinId:e}}a.d(t,{Z:()=>i})},494125:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(667294);let n=e=>{(0,i.useEffect)(e,[])}},760101:(e,t,a)=>{"use strict";a.d(t,{G:()=>s,Z:()=>o});var i=a(667294),n=a(616550),l=a(785893);let r=(0,i.createContext)(!0);function s({children:e}){let t=(0,n.TH)(),[a,s]=(0,i.useState)(!0),o=(0,i.useRef)(t);return(0,i.useEffect)(()=>{o.current!==t&&(o.current=t,s(!1))},[t]),(0,l.jsx)(r.Provider,{value:a,children:e})}function o(){return(0,i.useContext)(r)}},429218:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(667294);let n=()=>{let e=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},250790:(e,t,a)=>{"use strict";function i(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}a.d(t,{Z:()=>i})},40770:(e,t,a)=>{"use strict";function i({cropSource:e,surfaceType:t,isProductPage:a}){return"stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null}a.d(t,{Z:()=>i})},129675:(e,t,a)=>{"use strict";function i({cropArea:{x:e,y:t,w:a,h:i},scaledWidth:n,scaledHeight:l}){return{x:e/n,y:t/l,w:a/n,h:i/l}}a.d(t,{Z:()=>i})},520846:(e,t,a)=>{"use strict";function i({cropArea:e,scaledWidth:t,scaledHeight:a}){let i=e.h||0,n=e.w||0,l=e.x||0,r=e.y||0;return{h:Math.floor(i*a),w:Math.floor(n*t),x:Math.floor(l*t),y:Math.floor(r*a)}}a.d(t,{Z:()=>i})},258194:(e,t,a)=>{"use strict";function i({cropArea:e,cropSource:t,requestParams:a,searchQuery:i,surfaceType:n,title:l,trafficSource:r}){let s=[];if(e){let{x:t,y:a,w:i,h:n}=e;t>=0&&a>=0&&i>=0&&n>=0&&s.push(`x=${t}`,`y=${a}`,`w=${i}`,`h=${n}`)}t&&s.push(`cropSource=${t}`),n&&s.push(`surfaceType=${n}`),l&&s.push(`full_feed_title=${encodeURIComponent(l)}`),i&&s.push(`q=${i}`),r&&"unknown"!==r&&s.push(`rs=${r}`),a&&s.push(`requestParams=${encodeURIComponent(a)}`);let o=s.length?`?${s.join("&")}`:"";return o}a.d(t,{Z:()=>i})},755453:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(258194);function n({cropArea:e,cropSource:t,isProductPage:a,pinId:n,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:c}){let u=(0,i.Z)({cropArea:e,cropSource:t,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:c}),d="";return a&&(d="products/"),`/pin/${n}/visual-search/${d}${u}`}},446653:(e,t,a)=>{"use strict";a.d(t,{r:()=>x,K:()=>v});var i=a(667294),n=a(342513),l=a(340523),r=a(757640),s=a(149722),o=a(998577),c=a(573810),u=a(325362);let d=e=>{let t={};for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&("object"!=typeof e[a]||null===e[a]||Array.isArray(e[a])?t[(0,u.Z)(a)]=e[a]:t[(0,u.Z)(a)]=d(e[a]));return t},p=(e,t)=>{let a=[];for(let i in e)i!==t&&a.push({id:i,...d(e[i])});let i=a.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of i)n.set(e.id,e);return n},m={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=({dispatch:e,isEnabled:t,state:a})=>{let{orbacVisibility:n,disableProfileChanger:l,headerVisible:r}=a,s=(0,i.useCallback)(a=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:a})},[t,e]),o=(0,i.useCallback)(a=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:a??!n})},[t,e,n]),c=(0,i.useCallback)(a=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:a??!l})},[t,e,l]),u=(0,i.useCallback)(a=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:a??!r})},[t,e,r]);return{changeProfile:s,toggleORBACVisibility:o,toggleDisableProfileChanger:c,toggleHeaderVisibility:u}},_=e=>{let[t,a]=(0,i.useReducer)(h,m),n=g({dispatch:a,isEnabled:e,state:t}),{activeProfile:l,orbacVisibility:r}=t;(0,i.useEffect)(()=>{let e=(0,c.qn)("orbacActiveProfile",!1);e&&a({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,c.qn)("orbacVisibilty",!1);e&&a({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,c.Nh)("orbacVisibility",r)},[r]),(0,i.useEffect)(()=>{(0,c.Nh)("orbacActiveProfile",l)},[l]);let s=(0,i.useCallback)((e,t)=>{a({type:"LOAD_PROFILES",payload:p(e,t)})},[a]);return{state:t,actions:n,receiveProfiles:s}};var y=a(785893);let{Provider:f,useMaybeHook:v}=(0,n.Z)("RoleBasedAccessControlContext"),x=({children:e})=>{let t;let{checkExperiment:a}=(0,l.F)(),n=(0,s.Z)(),c=!!(n.isAuth&&n.isPartner&&a("web_m10n_business_access_orbac_www").anyEnabled),{state:u,actions:d,receiveProfiles:p}=_(c),{activeProfile:m,headerVisible:h,profiles:g=[]}=u,v=g?Array.from(g.values()):[],x=(0,o.Z)(v),b=!!n.isAuth&&v.length>0&&x,S=n.isAuth?n.id:"",k=n.isAuth?n.username:"",{changeProfile:w,toggleORBACVisibility:P,toggleDisableProfileChanger:T,toggleHeaderVisibility:E}=d;(0,i.useEffect)(()=>{if(c){if("string"==typeof x){w(x);return}m||w(S)}},[x,S,c,w,m]),(0,i.useEffect)(()=>{c&&(b&&!h&&E(!0),!b&&h&&E(!1))},[E,b,c,h,g]);let{data:I}=(0,r.Z)(c?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),C=I?.profiles;n&&n.isAuth&&u.activeProfile===n.id?t={id:n.id,permissions:["OWNER"],user:{username:k,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:m&&u.profiles&&(t=u.profiles.get(m)),(0,i.useEffect)(()=>{C&&p(C,S)},[p,C,S]);let j=u.profiles?Array.from(u.profiles.values()):[];return(0,y.jsx)(f,{value:{profiles:j,headerVisible:u.headerVisible,activeProfile:t,changeProfile:w,toggleORBACVisibility:P,toggleDisableProfileChanger:T,toggleHeaderVisibility:E},children:e})}},785059:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(340523),n=a(446653),l=a(998577);let r=()=>{let{checkExperiment:e}=(0,i.F)(),t=(0,n.K)(),{activeProfile:a}=t||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,s=(0,l.Z)(t?.profiles||[]),{anyEnabled:o}=e("useorbacroutematcher_in_useorbacactingas");return r&&(!o||s)&&a&&(a.viewerMeetsMfaRequirement||(a.permissions||[]).includes("OWNER"))?a:Object.freeze({})}},998577:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(616550),n=a(96157),l=a(340523),r=a(149722),s=a(19447);let o=e=>{let t=(0,i.TH)(),a=(0,r.Z)(),o=(0,s.S6)(),{anyEnabled:c}=(0,l.F)().checkExperiment("web_m10n_business_access_orbac_www"),u=(0,i.$B)("/:username"),d=u?.params?.username,p=(0,i.$B)("/pin/:id"),m=!!p?.params?.id&&o(p.params.id)?.pinner?.id;if((0,n.ej)(t))return!1;if((0,n.RU)(t))return!0;if((0,n.mY)(t))return c;let h=e.concat(a.isAuth?{user:{username:a.username},id:a.id}:{}).find(e=>{let{user:t={},id:a}=e||{},{username:i}=t;return(!!i&&!!d||!!m&&!!a)&&(i===d||m===a)});return!!h&&h.id}},199677:(e,t,a)=>{"use strict";a.d(t,{D3:()=>c,DX:()=>s,KY:()=>u,Ms:()=>i,N1:()=>d,_P:()=>r,lJ:()=>l,nl:()=>n,q6:()=>o});let i=(e,t)=>{let a=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(a=t.user.username),a},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),l=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",r=(e,t,a)=>a&&a.user&&t&&t.isAuth&&a.id!==t.id?a.user.merchantId:e.advertiser?.merchant_id,s=(e,t,a)=>a&&a.user&&e.isAuth&&a.id!==e.id?a.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,o=(e,t,a)=>{let i=e&&e.isAuth&&a&&a.id&&a.id!==e.id&&a.id===t;return!!i},c=(e,t,a)=>{let i=o(e,t,a)||e&&e.isAuth&&t===e.id;return!!i},u=(e,t,a)=>{let i=t&&t.owner&&t.owner.id||"";return c(e,i,a)};function d(e,t,a){let i=t?t.id:"";return c(e,i,a)}},154792:(e,t,a)=>{"use strict";a.d(t,{X:()=>n,Z:()=>l});var i=a(667294);let n=120;function l(e,t=0,a=n){let[l,r]=(0,i.useState)(e?"active":"inactive");return(0,i.useEffect)(()=>{if(e){if(t){let e=setTimeout(()=>r("active"),t);return()=>{clearTimeout(e)}}r("active")}else{let e=setTimeout(()=>r("inactive"),a);return()=>{clearTimeout(e)}}},[e]),l}},259239:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({children:e,additionalStyles:t={}}){return(0,n.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",left:!0,position:"absolute",right:!0,top:!0,children:e})}},97538:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(883119),n=a(154792),l=a(785893);function r({children:e,fadeInDuration:t=0,fadeOutDuration:a=n.X,visibility:r}){return"none"!==r&&e?(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:a?`opacity ${a}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[r]},children:e}):null}},301551:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(422210),n=a(588664);let l=["US","GB","DE","CA","FR"];function r(e){return!(0,i.Z)(e.createdAt)&&!(0,n.Z)(null,e)&&l.includes(e.country)}},254292:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({text:e}){return(0,n.jsx)(i.xu,{display:"visuallyHidden",children:(0,n.jsx)(i.X6,{accessibilityLevel:1,children:e})})}},425040:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l,w:()=>r});var i=a(883119),n=a(232887);let l=new i.H3([n.Z]),r=160},810052:(e,t,a)=>{"use strict";a.d(t,{D:()=>n,a:()=>l});var i=a(342513);let{Provider:n,useMaybeHook:l}=(0,i.Z)("unauthPageWrapperContext")},676554:(e,t,a)=>{"use strict";a.d(t,{F4:()=>y,ZP:()=>T,hW:()=>_,jz:()=>f,q:()=>g,rX:()=>E}),a(167912);var i,n,l,r,s=a(240684),o=a(207012),c=a(554786),u=a(149722),d=a(19447),p=a(118923),m=a(832853),h=a(785893);let g=(0,s.ZP)({resolved:{},chunkName:()=>"AuthDesktopPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(4254),a.e(38756),a.e(72069),a.e(2984)]).then(a.bind(a,912849)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return a(t)},resolve:()=>912849}),_=(0,s.ZP)({resolved:{},chunkName:()=>"DefaultPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(97270),a.e(87348),a.e(3717),a.e(97419),a.e(39921)]).then(a.bind(a,879089)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return a(t)},resolve:()=>879089}),y=(0,m.Z)(()=>Promise.all([a.e(4254),a.e(38756),a.e(72069),a.e(2984)]).then(a.bind(a,912849)),void 0,"AuthDesktopPinRep"),f=(0,m.Z)(()=>Promise.all([a.e(97270),a.e(87348),a.e(3717),a.e(97419),a.e(39921)]).then(a.bind(a,879089)),void 0,"DefaultPinRep"),v=void 0!==i?i:i=a(910982),x=void 0!==n?n:n=a(770181),b=void 0!==l?l:l=a(903414),S=e=>{let t=(0,p.b)(),{pinKey:a,...i}=e,n=(0,o.Z)(b,a);return t?(0,h.jsx)(y,{...i,pinKey:n}):(0,h.jsx)(g,{...i,pinKey:n})},k=e=>{let t=(0,p.b)(),{pinId:a,pin:i,...n}=e,l=(0,d.S6)(),r=a?l(a):null,s=r||i;return t?(0,h.jsx)(y,{...n,pinKey:{type:"deprecated",data:s}}):(0,h.jsx)(g,{...n,pinKey:{type:"deprecated",data:s}})},w=void 0!==r?r:r=a(700554),P=e=>{let{pinKey:t,...a}=e,i=(0,p.b)(),n=(0,o.Z)(w,e.pinKey);return i?(0,h.jsx)(f,{...a,duploQueryRef:n}):(0,h.jsx)(_,{...a,duploQueryRef:n})};function T(e){let t=(0,c.HG)(),a=(0,u.Z)(),i=a&&a.isAuth&&t,n=(0,o.Z)(v,e.duploQueryRef);if(i&&!e.duploQueryRef){let{disableReaction:t,disableRounding:a,disableAppUpsell:i,duploDedupeVisualAnnotations:n,duploDisablePinCardPadding:l,duploFeedItemProps:r,duploIsSquarePin:s,duploLazyLoadImage:o,duploOneTapSave:c,duploPinCardDetailsMargin:u,duploPriorityFetchImage:d,duploQueryRef:p,duploShouldAddNiiSearchParamToImageUrls:m,duploShouldAllowProductPriceIndicator:g,duploConversationPin:_,topLevelTrafficSource:y,topLevelTrafficSourceDepth:f,trafficSource:v,...x}=e;return(0,h.jsx)(k,{...x})}let{attributionOption:l,blockClickEvents:r,borderStyle:s,disableHover:d,imageHeightModifier:p,imageOnlyOption:m,onError:g,onLoad:_,pin:y,pinImageCrop:f,pinImageFit:x,resolution:b,rounding:S,saveButtonOptions:w,authDesktopSelectionState:T,authDesktopSurface:E,pinOwner:I,duploQueryRef:C,...j}=e;return(0,h.jsx)(P,{...j,pinKey:n})}function E(e){let t=(0,c.HG)(),a=(0,u.Z)(),i=a&&a.isAuth&&t,n=(0,o.Z)(v,e.duploQueryRef),l=(0,o.Z)(x,e.pinKey);if(i&&!e.duploQueryRef&&null!=l&&null!=e.pinKey){let{disableReaction:t,disableRounding:a,disableAppUpsell:i,duploDedupeVisualAnnotations:n,duploDisablePinCardPadding:r,duploFeedItemProps:s,duploIsSquarePin:o,duploLazyLoadImage:c,duploOneTapSave:u,duploPinCardDetailsMargin:d,duploPriorityFetchImage:p,duploQueryRef:m,duploShouldAddNiiSearchParamToImageUrls:g,duploShouldAllowProductPriceIndicator:_,duploConversationPin:y,topLevelTrafficSource:f,topLevelTrafficSourceDepth:v,trafficSource:x,pinKey:b,...k}=e,{pin:w,pinId:P,...T}=k;return(0,h.jsx)(S,{...T,pinKey:l})}let{attributionOption:r,blockClickEvents:s,borderStyle:d,disableHover:p,imageHeightModifier:m,imageOnlyOption:g,onError:_,onLoad:y,pin:f,pinImageCrop:b,pinImageFit:k,resolution:w,rounding:T,saveButtonOptions:E,authDesktopSelectionState:I,authDesktopSurface:C,pinOwner:j,duploQueryRef:A,...F}=e;return(0,h.jsx)(P,{...F,pinKey:n})}},19447:(e,t,a)=>{"use strict";a.d(t,{AF:()=>s,H0:()=>o,S6:()=>c,_S:()=>u});var i=a(702664),n=a(342513),l=a(785893);let{Provider:r,useHook:s,useMaybeHook:o}=(0,n.Z)("Pins");function c(){let e=s();return t=>e[t]}function u({children:e}){let t=(0,i.useSelector)(({pins:e})=>e,i.shallowEqual);return(0,l.jsx)(r,{value:t,children:e})}},386008:(e,t,a)=>{"use strict";a.d(t,{Tt:()=>d,cm:()=>u,kW:()=>o,kY:()=>p,mN:()=>c});var i=a(702664),n=a(342513),l=a(149722),r=a(785893);let{Provider:s,useHook:o}=(0,n.Z)("Users");function c(){let e=o();return t=>e[t]}function u(){let e=o();return(t,a=!1)=>{let i=Object.keys(e).find(a=>e[a].username===t);if(i||!a)return e[i??""]}}function d(){let{id:e}=(0,l.Z)(),t=o();return t[e??""]}function p({children:e}){let t=(0,i.useSelector)(({users:e})=>e,i.shallowEqual);return(0,r.jsx)(s,{value:t,children:e})}},774812:(e,t,a)=>{"use strict";a.d(t,{G:()=>g,Z:()=>_});var i=a(667294),n=a(883119),l=a(775089),r=a(213377),s=a(493538),o=a(823987),c=a(554786),u=a(494125),d=a(771881),p=a(184972),m=a(187156),h=a(785893);let g=25;function _({customLayoutType:e,emptyState:t,feedItems:a,feedKey:g,maxColumns:_,pagination:{hasNext:y,isLoadingNext:f,loadNext:v,refetch:x},pullToRefresh:b,renderFeedItem:S,serverRender:k}){let w=(0,c.HG)(),[P,T]=(0,i.useState)(!1),E="userSearch"===e?window.innerWidth-16:200,I=f&&0===a.length&&!P,C="desktopFlashlight"===e?0:r.qG;return(0,u.Z)(()=>(window.addEventListener("online",v),()=>window.removeEventListener("online",v))),(0,h.jsxs)(n.xu,{"data-test-id":"MobileFeed",children:[(0,h.jsx)(p.Z,{enabled:!!b,onPull:()=>{x(),T(!0)},refreshing:P}),(0,h.jsxs)(n.xu,{"data-test-id":"grid",marginEnd:C,marginStart:C,opacity:P?.5:1,children:[(0,h.jsx)(s.Z,{isAtEndOfFeed:!y,itemCount:a.length,children:a.length?(0,h.jsx)(n.xu,{"data-test-id":"feed",marginTop:(0,d.kk)({isDesktop:w}),children:(0,h.jsx)(o.Z.Consumer,{children:t=>(0,h.jsx)(i.Fragment,{children:(0,h.jsx)(d.c$,{children:(0,h.jsx)(l.default,{cacheKey:g,columnWidth:w?r.yF:E,gutterWidth:w?4*r.jC:void 0,id:k?g:void 0,items:a,loadItems:v,maxColumns:_,minCols:"userSearch"===e?1:2,renderItem:({data:e,itemIdx:t})=>S(e,t),scrollContainerRef:t,serverRender:k})})})})}):f?(0,h.jsx)(d.gG,{}):t??null}),I&&(0,h.jsx)(n.xu,{column:12,paddingY:2,children:(0,h.jsx)(m.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},801690:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(667294),n=a(525364),l=a(105737),r=a(766311),s=a(785893);class o extends i.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:a,viewType:i}=this.props;e({viewData:t,viewParameter:a,viewType:i})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:a,viewParameter:i,viewType:n}=this.props;i===e.viewParameter&&n===e.viewType&&(0,l.ZP)(a,e.viewData)||t({viewData:a,viewParameter:i,viewType:n})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,clientTrackingParams:c}=this.props;return(0,s.jsx)(r.Z,{auxData:e,clientTrackingParams:c,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,children:t})}}function c(e){let{setViewContextData:t,clearViewContextData:a}=(0,n.sV)();return(0,s.jsx)(o,{...e,clearCurrentPageData:a,setCurrentPageData:t})}},168477:(e,t,a)=>{"use strict";a.d(t,{FC:()=>s,FP:()=>l,M0:()=>n,Xq:()=>o,s0:()=>i,z9:()=>r});let i=44,n=236,l=157,r=320,s=213,o=7},153896:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i=a(667294),n=a(883119),l=a(160408),r=a(214877),s=a(340523),o=a(5859),c=a(554786),u=a(923368),d=a(785893);function p({auxData:e,children:t,collapseButtonElementType:a,collapseByDefault:p=!0,componentType:m,displayViewState:h,expandButtonElementType:g,forceTappableHeader:_,headerHeight:y,headerPaddingRight:f,headerPreview:v,heading:x,viewParameter:b,viewType:S}){let k=(0,c.ml)(),{checkExperiment:w}=(0,s.F)(),{isAuthenticated:P,isBot:T}=(0,o.B)(),{logContextEvent:E}=(0,r.v)(),{setIsShoppingModuleExpanded:I}=(0,u.x4)(),C=k&&w(P?"closeup_auth_mweb_collapsable_modules":"closeup_unauth_mweb_collapsable_modules").group||"",j=["no_collapse_by_default","collapse_by_default"].includes(C),A="collapse_by_default"===C,[F,R]=(0,i.useState)(j&&!T&&A&&p||[1,2].includes(h));return(0,i.useEffect)(()=>{I(!F)},[]),(0,d.jsxs)(n.kC,{dataTestId:"collapsible-layout",direction:"column",gap:j?4:0,children:[(0,d.jsx)(l.Z,{collapsed:F,displayViewState:h,forceTappableHeader:_,headerHeight:y,headerPaddingRight:f,headerPreview:v,heading:x,onClick:()=>{R(!F),I&&I(F),E({aux_data:e,component:m,element:F?g:a,event_type:k?102:101,view_parameter:b,view_type:S})},showArrow:!0}),!F&&(0,d.jsx)(n.xu,{children:t})]})}},336184:(e,t,a)=>{"use strict";a.d(t,{Z:()=>k});var i=a(667294),n=a(883119),l=a(140017),r=a(340523),s=a(448318),o=a(5859),c=a(71328),u=a(554786),d=a(760101),p=a(894965),m=a(785893);function h({children:e,isImagePinForUnauthOnTablet:t}){let{isAuthenticated:a}=(0,o.B)();return(0,m.jsxs)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:a?void 0:p.e,children:[(0,m.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}var g=a(616550),_=a(48481),y=a(233440),f=a(217058),v=a(623409);function x({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:s,imageSignature:o,pinId:c}){let d=(0,l.ZP)(),p=(0,v.Z)(),h=(0,_.Z)(),{checkExperiment:x}=(0,r.F)(),b=(0,i.useRef)(),S=(0,u.ZP)(),k="desktop"===S,w=s&&a,P=k&&x("dweb_unauth_main_pin_visual_search_v2").group,T="enabled_2_no_upsell"===P||"enabled_rollout"===P||"enabled_1_nav_upsell_post_land"===P,E=w&&(d._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",s),I=T?d._('See something you like? Tap to search inside this image', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'):d._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),C=d._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),j=(0,g.k6)();return(0,m.jsx)(n.iP,{onMouseEnter:()=>{w&&(0,f.My)("dweb.main_pin.social.wash.view"),(0,f.My)("dweb.pin.wash.view")},onMouseLeave:()=>{w?p({action:"dismiss",item:"main-pin-social-wash"}):p({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{if(k){if(e.preventDefault(),p({action:"click",item:"pin-image"}),a&&s&&p({action:"click",item:"main-pin-social-wash"}),T){let e=`/pin/${c}/visual-search/?`;o&&(e+=`imageSignature=${o}`),j.push(e),y.Z.setItem("VISUAL_SEARCH_SOURCE","MAIN_PIN_WASH")}else p({action:"click",item:"main-pin-image-signup-modal"}),h({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}});t&&p({action:"click",item:"pdp-pin-image"})}},children:(0,m.jsxs)(n.xu,{zIndex:new n.Ry(2),children:[(0,m.jsx)(n.xu,{ref:b,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,m.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:T?260:240,paddingY:10,children:(0,m.jsx)(n.xu,{marginTop:8,children:(0,m.jsx)(n.X6,{align:"center",color:"light",size:w?"500":"400",children:k?E||I:C})})})}),!k&&(0,m.jsx)(n.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,m.jsx)(n.hU,{accessibilityLabel:d._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),p({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var b=a(174281),S=a(810052);let k=e=>{let t=(0,l.ZP)(),{alt:a,clickthroughOverlayOptions:p,color:g,isFlashlightPage:_,naturalHeight:y,naturalWidth:f,placeholder:v,pinImageResizePercent:k=100,pwtElementTimingId:w,pwtSurfaceContext:P,setShowClickthroughOverlay:T,showSpinner:E,src:I,stickyFooter:C,isEligibleForPdp:j,pinId:A,imageSignature:F}=e,R=(0,d.Z)(),{checkExperiment:O}=(0,r.F)(),D=!R,{isAuthenticated:L}=(0,o.B)(),M=(0,u.ZP)(),Z="desktop"===M,N=L&&!Z&&O("auth_mweb_inline_action_bar").anyEnabled,K=(0,i.useRef)(),[z,H]=(0,i.useState)(!D||!!I&&!!v&&v===I),U=(0,i.useRef)(""),V=()=>{P&&P.markConstraintComplete("PinPageMainImageRendered")};(0,i.useEffect)(()=>{let e=new Image;e.onload=()=>H(!0),e.src=I},[]);let $=(0,i.useRef)(S.a()?.setHasScrolledPastMainContent);(0,i.useEffect)(()=>{let e=(0,c.Z)(()=>{if(K.current){let t=window.scrollY>K.current.offsetTop+K.current.offsetHeight;$.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[G,B]=(0,i.useState)();(0,i.useEffect)(()=>{K.current&&B(K.current.scrollHeight)},[]);let W=!_&&"tablet"===M,Y=D?(0,m.jsx)(s.Z,{alt:a,color:g,elementTiming:w,naturalHeight:y,naturalWidth:f,onLoad:V,src:v}):null;return(0,m.jsxs)(n.xu,{ref:K,dangerouslySetInlineStyle:{__style:{transition:100===k?"":"width 500ms ease-in-out"}},"data-test-id":"pin-closeup-image",marginTop:"tablet"===M&&N?12:0,maxHeight:"100%",maxWidth:"tablet"===M?b.g6:void 0,minHeight:100===k?G:void 0,overflow:C?void 0:"hidden",position:"relative",rounding:_||"phone"===M?0:6,width:_||"phone"===M?`${k}%`:Z?508:b.Hg,children:[!L&&p&&"enabled_3_no_wash_upsell_post_land"!==O("dweb_unauth_main_pin_visual_search_v2").group&&(0,m.jsx)(h,{isImagePinForUnauthOnTablet:!1,children:(0,m.jsx)(x,{imageSignature:F||"",inviterFirstName:U.current,isEligibleForPdp:j,pinId:A||"",setShowClickthroughOverlay:T})}),Y&&(W?(0,m.jsx)(n.xu,{overflow:"hidden",rounding:6,children:Y}):Y),(0,m.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?1:0,transition:z&&!Z?"opacity .5s ease-in-out":void 0,backgroundColor:g}},left:!0,overflow:W?"hidden":void 0,position:D?"absolute":"relative",right:!0,rounding:W?6:5,top:!0,children:D?(0,m.jsx)(n.Ee,{alt:a,naturalHeight:y,naturalWidth:f,src:I}):(0,m.jsx)(s.Z,{alt:a,color:g,elementTiming:w,naturalHeight:y,naturalWidth:f,onLoad:V,src:I})}),E&&(0,m.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?0:1,transition:z?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!z&&(0,m.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,m.jsx)(n.$j,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),C]})}},232887:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(883119),n=a(894965);let l=new i.H3([n.e]),r=l},894965:(e,t,a)=>{"use strict";a.d(t,{e:()=>l,x:()=>n});var i=a(883119);let n=2,l=new i.Ry(1)},237040:(e,t,a)=>{"use strict";a.d(t,{J1:()=>c,Uw:()=>o,Yg:()=>d,ib:()=>m,jT:()=>_,nF:()=>g,xX:()=>h});var i=a(340523),n=a(5859),l=a(554786),r=a(953565);let s=()=>{let{isAuthenticated:e,isBot:t}=(0,n.B)();return t?"bot":e?"auth":"unauth"},o=({isDesktop:e,viewerType:t})=>"bot"===t?"seo_graphql_pin_page":"auth"===t?e?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page":e?"unauth_dweb_graphql_pin_page":"unauth_mweb_graphql_pin_page",c=()=>{let e=(0,l.HG)(),t=s();return o({isDesktop:e,viewerType:t})},u=({checkExperiment:e,isAuthMweb:t})=>{let a=t&&e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0}).group;return a?e=>(0,r.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a}}):null},d=()=>{let{isAuthenticated:e}=(0,n.B)(),t=(0,l.HG)(),{checkExperiment:a}=(0,i.F)();return u({checkExperiment:a,isAuthMweb:e&&!t})},p=0,m=({checkExperiment:e,isAuthMweb:t})=>{let a=u({checkExperiment:e,isAuthMweb:t});a&&(p+=1)<10&&a(`repin_${p}`)};function h(e,t,a){let i=o({isDesktop:t,viewerType:a});switch(i){case"auth_dweb_graphql_pin_page":return e(i),{isGraphQLEnabledForRelatedPins:!1,isGraphQLEnabledInGeneral:!1,closeupPageSuspenseBehavior:null,experimentName:i};case"seo_graphql_pin_page":case"unauth_dweb_graphql_pin_page":case"unauth_mweb_graphql_pin_page":return e(i),{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",experimentName:i};case"auth_mweb_graphql_pin_page":{let{anyEnabled:t,group:a}=e(i);if(t)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",experimentName:i};if("only_related_pins"===a)return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,experimentName:i};if("should_render_with_missing_data"===a)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingData",experimentName:i};if("render_and_subscribe"===a)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingDataAndSubscribe",experimentName:i};else return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,experimentName:i}}default:throw Error("Unexpected case")}}function g(){let{checkExperiment:e}=(0,i.F)(),t=(0,l.HG)(),a=s();return h(e,t,a)}function _(){let e=g();return"auth_mweb_graphql_pin_page"===e.experimentName?e.isGraphQLEnabledInGeneral&&e.isGraphQLEnabledForRelatedPins?"enabled":e.isGraphQLEnabledForRelatedPins?"only_related_pins":"disabled":"auth_dweb_graphql_pin_page"===e.experimentName?"":"enabled"}},822592:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(883119),n=a(67664),l=a(785893);function r({coverImages:e,height:t,isHovered:a,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:c,text:u,url:d,width:p}){let m=e&&(e["236x"]||e["280x280"]);return(0,l.jsx)(n.Z,{backgroundColor:"gray",coverImage:m,height:t,isHovered:a,onClick:r,onMouseEnter:s,onMouseLeave:o,url:d,width:p,children:(0,l.jsx)(i.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===c?(0,l.jsx)(i.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,l.jsx)(i.X6,{align:"center",color:"light",size:"500",children:u})}):(0,l.jsx)(i.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,l.jsx)(i.xv,{align:"center",weight:"bold",children:u})})})})}},67664:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,Z:()=>s});var i=a(667294),n=a(883119),l=a(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:a,disableTabIndex:s,height:o,id:c,isHovered:u,onClick:d,onMouseDown:p,onMouseEnter:m,onMouseLeave:h,searchBoxRenderStopwatch:g,url:_,width:y}){let[f,v]=(0,i.useState)(!1),x=()=>{m?m():v(!0)},b=()=>{h?h():v(!1)},S=u||f,k=S?r.hoverOverlay:r.bubbleOverlay;return(0,l.jsx)(n.Tg,{href:_,onBlur:b,onFocus:x,onMouseDown:p,onMouseEnter:x,onMouseLeave:b,onTap:()=>{d?.(c)},rounding:4,tabIndex:s?-1:void 0,children:(0,l.jsx)(n.zd,{height:o,rounding:4,width:y||"100%",children:a?.url?(0,l.jsxs)(n.Ee,{alt:"",color:e,fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,onLoad:()=>{g?.stop()},role:"presentation",src:a.url,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:k},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},270766:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ek});var i,n,l,r,s=a(167912),o=a(616550),c=a(883119),u=a(695238),d=a(140017),p=a(340523),m=a(757640),h=a(689390),g=a(667294),_=a(735382),y=a(82205),f=a(205841),v=a(207012),x=a(339001),b=a(217058),S=a(785893);let k=void 0!==i?i:i=a(453364),w=()=>{(0,b.NC)("click_best_pin_board",!0)},P=()=>{(0,b.NC)("click_best_pin_profile",!0)},T=({pin:e})=>{let{pinner:t}=e,{username:a,fullName:i}=t??{},n=t?.imageMediumUrl||t?.imageSmallUrl,l=`/${a??""}/`;return(0,S.jsx)(c.Tg,{fullWidth:!1,href:l,onTap:P,rounding:"circle",children:(0,S.jsx)(f.qE,{name:i??"",outline:!0,size:"sm",src:n??""})})},E=({pin:e})=>{let t=(0,d.ZP)(),{board:a,pinner:i}=e,{name:n,privacy:l,url:r}=a??{},s=a?.entityId||"",{username:o,fullName:u}=i??{},p=`/${o??""}/`,m=(0,S.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(c.rU,{display:"inlineBlock",href:p,onClick:P,underline:"hover",children:u})},u);return"protected"===l?(0,x.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:m}):(0,x.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:m,boardName:(0,S.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(c.rU,{href:r??"",onClick:w,children:n},"board")},s)})},I=({pinKey:e})=>{let t=(0,v.Z)(k,e);return(0,S.jsxs)(c.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,S.jsx)(T,{pin:t}),(0,S.jsx)(c.xu,{marginEnd:2}),(0,S.jsx)(c.xv,{size:"200",children:(0,S.jsx)(E,{pin:t})})]})};var C=a(587703);function j({pageType:e,pinCreditPrefix:t,pin:a,pinLink:i,viewParameter:n}){let l=(0,d.ZP)(),r=(0,C.Z)();if("topic"!==e.page&&(!a.domain||"Uploaded by user"===a.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!a.nativeCreator,u=o?a.nativeCreator?.fullName:a.domain;return(0,S.jsx)(c.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(c.rU,{display:"inlineBlock",href:o?`/${a.nativeCreator?.username||""}/`:i,onClick:()=>{"topic"===e.page?(0,b.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:a.entityId,component:85,view_parameter:n})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(c.xv,{size:s,children:(0,x.nk)(l._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,S.jsx)(c.xv,{inline:!0,size:s,weight:"bold",children:(e.page,u)},o?"creatorProfile":"pinLinkDomain")})})})})}var A=a(92785),F=a(388769),R=a(391884),O=a(189469),D=a(567344),L=a(781705),M=a(661428),Z=a(414131),N=a(909886),K=a(686769);let z=void 0!==n?n:n=a(567637);function H({recipeKey:e}){let t=(0,v.Z)(z,e);if(t?.aggregateRating?.ratingValue&&t.aggregateRating.reviewCount){let e="number"==typeof t.cookTimes?.cook?.m&&"number"==typeof t.cookTimes.prep?.m?`${t.cookTimes.cook.m+t.cookTimes.prep.m} minutes \xb7 `:"";return(0,S.jsxs)(g.Fragment,{children:[(0,S.jsx)(K.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,S.jsx)(c.xv,{inline:!0,size:"200",children:` ${t.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var U=a(5859);let V=void 0!==l?l:l=a(516658),$=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let a=null;return(e.createdAt&&(a=new Date(e.createdAt)),t)?a?t>a?t:a:t:a},G=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let a=$(e);if(a&&a.getFullYear()===new Date().getFullYear()){let i=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:n}=e;i.has(n)&&(t=a?(0,S.jsx)(A.Z,{dateFormatType:A.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):"")}return t},B=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),W=(e,t)=>{let a=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),i=a.getTime(),n=new Date().getTime();return null==t||n-i<=31536e6*t?(0,S.jsx)(A.Z,{dateFormatType:A.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):""};function Y(e){let{pinKey:t,viewportSize:a,pageType:i}=e,n=(0,v.Z)(V,t),{pinCreditPrefix:l,pinLink:r}=(0,L.Z)(n),s=(0,M.Z)(n),{description:o}=(0,D.eK)({richMetadataDescription:n.richMetadata?.description,richSummaryDisplayName:n.richSummary?.displayName,closeupUnifiedDescription:n.closeupUnifiedDescription});"videos_category"===i.page&&(o=(0,D.kt)(o,n.nativeCreator?.username||""));let u="wide"===a,d=(0,D.Ly)({pinTitle:n.title,gridTitle:n.gridTitle,richSummaryDisplayName:n.richSummary?.displayName??"",richMetadataTitle:n.richMetadata?.title??"",storyPinDataId:n.storyPinDataId,storyPinDataMetadataPinTitle:n.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:n.pinJoin?.visualAnnotation});(n.gridTitle||"").trim()&&d!==n.gridTitle&&(d=(0,D.EU)(n.gridTitle,200));let p=(0,O.r)(n.richMetadata?.recipe?.name,!!n.richMetadata?.recipe?.categorizedIngredients,n.richMetadata?.recipe?.fromAggregatedData??!1)?n.richMetadata?.recipe:null,m=B(n)&&W(n,2),h=G(n)||m,{isBot:g,isSocialBot:_}=(0,U.B)();return(0,S.jsx)(c.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,S.jsxs)(c.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,S.jsx)(j,{pageType:i,pin:{entityId:n.entityId,domain:n.domain||"",nativeCreator:n.nativeCreator&&{fullName:n.nativeCreator.fullName,username:n.nativeCreator.username}},pinCreditPrefix:"topic"===i.page&&n.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,Z.Z)({hasPin:!0,hasPinRichMetadata:!!n.richMetadata,hasPinRichMetadataProducts:!!n.richMetadata?.products,hasPinRichMetadataArticle:!!n.richMetadata?.article,hasPinRichMetadataRecipe:!!n.richMetadata?.recipe,hasPinStoryPinData:!!n.storyPinData})}),(0,S.jsx)(c.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(c.xu,{display:"flex",marginEnd:u?0:3,marginTop:u?3:0,overflow:"hidden",children:d&&(0,S.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:d})})}),h?(0,S.jsx)(c.xu,{marginTop:1,children:(0,S.jsx)(c.xv,{color:"subtle",children:h})}):null,o&&(0,S.jsx)(c.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[p&&(0,S.jsx)(H,{recipeKey:p}),o]})}),p&&(0,S.jsx)(N.Z,{marginOverrides:p?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:p.categorizedIngredients,name:p.name,image:(0,R.Z)({imagesUrls:s,embedSrc:n.embed?.src,embedType:n.embed?.type,excludeOriginals:!g&&!_})}}}),(0,S.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,S.jsx)(I,{pinKey:n}),(0,S.jsx)(c.kC,{alignItems:"stretch",justifyContent:"end",children:!n.repinCount||n.repinCount<1?null:(0,S.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,S.jsx)(c.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,S.jsx)(c.xv,{color:"default",inline:!0,size:"100",children:(0,S.jsx)(F.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:n.repinCount})})]})})]})]})})}var q=a(922725),Q=a(582158),X=a(96157),J=a(777609),ee=a(627408),et=a(160567),ea=a(624797),ei=a(494125),en=a(129675),el=a(520846),er=a(258194),es=a(755453),eo=a(676554),ec=a(125768),eu=a(774812);let ed=0,ep="";function em(e){let{images:t,image_signature:a}=e,i=t?.["564x"]&&t.orig,{url:n}=i??{},{width:l=1,height:r}=i??{};return"number"==typeof l&&"number"==typeof r&&l>564&&(r*=564/l,l=564),{width:l,height:r,url:n,imageSignature:a}}let eh=({data:e,index:t,viewParameter:a,productsURL:i})=>{switch(e.type){case"pin":return(0,S.jsx)(eo.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:a,viewType:72});case"story":return i&&(0,S.jsx)(y.Z,{dangerouslySetActionUrl:i,slotIndex:t,story:e});default:return null}},eg=({resourceOptions:e})=>{let t=(0,d.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,m.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,o.TH)(),s=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(g.Fragment,{children:[a&&(0,S.jsx)(eu.Z,{customLayoutType:"desktopFlashlight",feedItems:a.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eh({data:e,index:t,viewParameter:3050,productsURL:s})}),(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:n})]})},e_=({resourceOptions:e})=>{let t=(0,d.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,m.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(g.Fragment,{children:[a&&(0,S.jsx)(eu.Z,{customLayoutType:"desktopFlashlight",feedItems:a||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eh({data:e,index:t,viewParameter:3334})}),(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:n})]})};function ey({pinResponse:e}){let t=(0,d.ZP)(),{isRTL:a}=(0,U.B)(),i=(0,C.Z)(),n=(0,o.k6)(),l=(0,o.TH)(),r=(0,o.$B)(),s=(0,g.useRef)(),{pin:u,isLoaded:p}=e,{pinId:m}=(0,h.Z)(r.params.id||""),y=(0,ea.mB)(l.search),f=(0,_.Z)(l),v=function(e){let t=parseInt(e,10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(y.cropSource),x=(0,X.hd)(l),{getNormalizedPinImage:k}=(0,J.Z)({pinKey:null!=u?{type:"deprecated",data:u}:null});if((0,g.useEffect)(()=>{if(!f&&u){let{width:e,height:t}=k(),a=(0,es.Z)({cropArea:{h:t-2*q.S,w:e-2*q.S,x:q.S,y:q.S},isProductPage:x,pinId:m,surfaceType:"flashlight"});n.replace(a)}},[k,n,f,x,u,m]),(0,ei.Z)(()=>{i({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:m}}),(0,b.My)("unauth.flashlight_page")}),(0,g.useEffect)(()=>{let e=s.current;return e&&ep===m&&(e.scrollTop=ed),()=>{e&&(ed=e.scrollTop,ep=m)}}),!p)return(0,S.jsx)(ee.Z,{objectId:"",view:72,children:(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:et.Pw}},position:"relative",children:(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})})});if(!u)return null;let{image_signature:w,description:P}=u,{width:T,height:E,url:I}=em(u),j=function({initialCropArea:e,pin:t}){let a;if(e)a={...e};else{let{visual_objects:e}=t,{width:i=1,height:n=1}=em(t);if(e&&e.length){let{x:t,y:l,w:r,h:s}=e[0];a=(0,el.Z)({cropArea:{x:t,y:l,w:r,h:s},scaledWidth:i,scaledHeight:n})}else{let[e,t]=[i/6,n/6],[l,r]=[i-2*e,n-2*t];a={x:e,y:t,w:l,h:r}}}return{x:Math.floor(a.x??0),y:Math.floor(a.y??0),w:Math.floor(a.w??0),h:Math.floor(a.h??0)}}({initialCropArea:f,pin:u}),A=l.state&&l.state.internalNavigation,F=T+20,R=(F??1)+24,O={pin_id:m,image_signature:w,crop:(0,en.Z)({cropArea:j,scaledWidth:T,scaledHeight:E}),crop_source:v||5},D={__style:{top:140}};return(0,S.jsx)(ee.Z,{objectId:"",view:72,children:(0,S.jsxs)(g.Fragment,{children:[(0,S.jsxs)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new c.Ry(4),children:[(0,S.jsx)(c.xu,{left:!0,position:"absolute",children:(0,S.jsx)(ec.Z,{})}),(0,S.jsx)(c.xu,{flex:"grow",children:(0,S.jsx)(c.X6,{align:"center",size:"400",children:x?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),x?(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:D,position:"relative",children:(0,S.jsx)(e_,{resourceOptions:O})}):(0,S.jsxs)(c.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(c.xu,{ref:s,dangerouslySetInlineStyle:D,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:F,zIndex:new c.Ry(4),children:[(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{width:T,height:E}},"data-test-id":"flashlight-enabled-image",children:(0,S.jsxs)(c.zd,{height:E,rounding:2,width:T,children:[(0,S.jsx)(c.Ee,{alt:P??"",naturalHeight:E??1,naturalWidth:T??1,src:I??""}),(0,S.jsx)(Q.Z,{customCropper:function({origCrop:e,cropSource:t}){let a=window.location.pathname+window.location.search,i=(0,es.Z)({cropArea:e,cropSource:t??6,isProductPage:x,pinId:m,surfaceType:"flashlight"});(0,b.My)("unauth.flashlight_page.cropper_changed"),i!==a&&m&&n.replace({pathname:`/pin/${m}/visual-search/`,search:(0,er.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:w,imageSize:{h:E,w:T},initialCropArea:j,pinKey:{type:"deprecated",data:u},showAnimation:!A,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,S.jsx)(c.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:T??1,position:"relative",children:(0,S.jsx)(Y,{pageType:{isAuth:!1,page:"flashlight"},pinKey:{type:"deprecated",data:u},viewportSize:"narrow"})})]}),(0,S.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...D.__style,...a?{marginRight:`${R}px`}:{marginLeft:`${R}px`}}},position:"relative",width:"100%",children:(0,S.jsx)(eg,{resourceOptions:O})})]})]})})}let ef=void 0!==r?r:r=a(23136);function ev(e){return e?.map(e=>{var t,a;return{name:e.name??"",offer_summary:{in_stock:e.offerSummary?.inStock??!1},additional_images:function(e){let t=[];return e.forEach(({additionalImagesSpec:e,spec:a})=>{t.push(...function({additionalImagesSpec:e,spec:t}){return e?.map(e=>({canonical_images:{[t]:{height:e.canonicalImage?.height??0,url:e.canonicalImage?.url??"",width:e.canonicalImage?.width??0}},image_signature:e.imageSignature??""}))}({additionalImagesSpec:e,spec:a})??[])}),t}([{additionalImagesSpec:e.additionalImageOrig,spec:"orig"},{additionalImagesSpec:e.additionalImage736x,spec:"736x"},{additionalImagesSpec:e.additionalImage564x,spec:"564x"},{additionalImagesSpec:e.additionalImage474x,spec:"474x"},{additionalImagesSpec:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(a=t?.variants,a?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}function ex(e){return{username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl}}function eb(e){return{id:e?.entityId??"",username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl,type:"user"}}let eS=(0,u.Z)({useGraphQLAdapter:function({pinId:e}){var t,a,i,n,l,r,o;let c=(0,s.useLazyLoadQuery)(ef,{pinId:e}),u=c.v3GetPinQuery?.data;if(!u)return null;let d={id:u.entityId??"",is_eligible_for_related_products:u.isEligibleForRelatedProducts??!1,description:u.description??"",image_signature:u.imageSignature??"",images:function(e){let t={};return e.forEach(e=>{let{image:a,spec:i}=e;a&&(t[i]={width:a.width??0,url:a.url??"",type:a.type??"",height:a.height??0,dominant_color:a.dominantColor??""})}),t}([{image:u.imageOrig,spec:"orig"},{image:u.image736x,spec:"736x"},{image:u.image564x,spec:"564x"},{image:u.image474x,spec:"474x"},{image:u.image236x,spec:"236x"}])??{},rich_metadata:(t=u.richMetadata,{products:ev(t?.products)??[],description:t?.description??"",title:t?.title??"",recipe:(a=t?.recipe,{name:a?.name??"",from_aggregated_data:a?.fromAggregatedData??!1,categorized_ingredients:a?.categorizedIngredients?.map(e=>({category:e.category??""}))}??{}),article:{date_published:t?.article?.datePublished??""},tutorial:{id:t?.tutorial?.name??"",type:"makecardtutorialmetadata"}}),rich_summary:(i=u.richSummary,{products:ev(i?.products)??[],display_name:i?.displayName??""}),visual_objects:(n=u.visualObjects,n?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),closeup_unified_description:u.closeupUnifiedDescription,grid_title:u.gridTitle??"",story_pin_data_id:u.storyPinDataId,repin_count:u.repinCount??0,tracked_link:u.trackedLink,link:u.link,domain:u.domain??"",closeup_attribution:ex(u.closeupAttribution),link_domain:{official_user:ex(u.linkDomain?.officialUser)},native_creator:eb(u.nativeCreator),pinner:eb(u.pinner),origin_pinner:eb(u.originPinner),board:(l=u.board,{id:l?.entityId??"",image_thumbnail_url:l?.imageThumbnailUrl??"",name:l?.name??"",privacy:"protected"===(r=l?.privacy)||"public"===r||"secret"===r?r:"secret",url:l?.url??"",type:"board"}),pin_join:{annotations_with_links_array:(o=u.pinJoin?.annotationsWithLinksArray,o?.map(e=>({name:e.name,url:e.url}))??[]),visual_annotation:u.pinJoin?.visualAnnotation??[]},story_pin_data:{metadata:{pin_title:u.storyPinData?.metadata?.pinTitle}},type:"pin"};return{pin:d,isLoaded:!0}},useLegacyAdapter:function({pinId:e}){let{data:t,isLoaded:a}=(0,m.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}});return{pin:t,isLoaded:a}}});function ek(){let{checkExperiment:e}=(0,p.F)(),t=(0,d.ZP)(),a=(0,o.$B)(),{pinId:i}=(0,h.Z)(a.params.id||"");return(0,S.jsx)(eS,{input:e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:i},suspense:{fallback:(0,S.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:i}},children:({data:e})=>!!e&&(0,S.jsx)(ey,{pinResponse:e})})}},943484:(e,t,a)=>{"use strict";function i(e){return e&&5!==e?4===e?"stela":null:"related_products"}a.d(t,{Z:()=>i})},838458:(e,t,a)=>{"use strict";a.d(t,{J:()=>l,f:()=>r});var i=a(782677),n=a(539426);let l=(e,{bookmark:t,options:a,schema:i})=>{let l=i||n.Z[e];return"function"==typeof l?l({resource:e,options:a,bookmark:t}):l};function r({data:e,opts:{bookmark:t,options:a,schema:n},resource:r}){let s=l(r,{bookmark:t,options:a,schema:n}),o=s&&e?(0,i.Fv)(e,s):null;return{normalizedResponse:o,resourceSchema:s}}},174281:(e,t,a)=>{"use strict";a.d(t,{D5:()=>s,Hg:()=>n,T_:()=>r,g6:()=>l,w6:()=>i});let i=(e,t)=>Array.from({length:t-e},(t,a)=>a+e),n=508,l=600;function r(e,t){if(!t.startsWith("en"))return e;let a=e.split(" ").map(e=>{let t=e===e.toUpperCase();return t?e:e.toLowerCase()});return a.join(" ")}let s=()=>{let e=new URL(window.location.href),t=e.hostname.replace("www.",""),a=e.pathname;return`${t}${a=a.replace(/\/\d+\//,"/").replace(/\/$/,"")}`}},166770:(e,t,a)=>{"use strict";a.d(t,{H:()=>l,o:()=>n});var i=a(342513);let{Provider:n,useHook:l}=(0,i.Z)("LimitedLogin")},729473:(e,t,a)=>{"use strict";a.d(t,{Z:()=>e2});var i,n,l,r,s,o,c,u,d,p,m,h=a(167912),g=a(883119),_=a(695238),y=a(140017),f=a(340523),v=a(7829),x=a(689390),b=a(667294),S=a(616550),k=a(735382),w=a(922725),P=a(207012),T=a(777609),E=a(513911);let I=void 0!==i?i:i=a(73129);var C=a(624797),j=a(250790),A=a(40770),F=a(129675),R=a(785893);let O=(0,b.createContext)({cropArea:{x:0,y:0,w:1,h:1},cropSource:5,entrySource:"flashlight",isProductPage:!1,surfaceType:null,title:""});function D({children:e,value:t}){return(0,R.jsx)(O.Provider,{value:t,children:e})}var L=a(757640),M=a(172618),Z=a(819429),N=a(214877),K=a(30378),z=a(5859),H=a(71980);function U({buttonText:e,handleDrawerClose:t,isDrawerOpen:a,onClick:i,largeSize:n=!1,reversed:l=!1,invertWhenDrawerIsOpen:r=!1,hasProductFiltersApplied:s=!1}){let o=(0,y.ZP)(),c=r&&a,u=(0,R.jsx)(g.JO,{accessibilityLabel:"",color:c?"light":"dark",icon:"filter"},"filterIcon"),d=e&&(0,R.jsx)(g.xv,{align:"center",color:c?"inverse":"default",weight:"bold",children:e},e);return(0,R.jsx)(g.iP,{accessibilityLabel:o._('Filter', 'productsFilterButton', 'Button to filter products results'),onTap:()=>{a?t():i()},rounding:"pill",children:(0,R.jsxs)(g.xu,{position:"relative",children:[(0,R.jsx)(g.xu,{alignContent:"center",color:c?"dark":"secondary",dangerouslySetInlineStyle:n?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,R.jsx)(g.kC,{alignItems:"center",gap:{row:2,column:0},children:l?[d,u]:[u,d]})}),s&&(0,R.jsx)(g.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}function V({filtersText:e,handleDrawerClose:t,handleDrawerOpen:a,isDrawerOpen:i,isProductOnlyFeed:n,pinId:l,showFilter:r,title:s,viewParameter:o,viewType:c}){let{logContextEvent:u}=(0,N.v)(),{isRTL:d}=(0,z.B)(),p=(0,b.useRef)(null);(0,b.useEffect)(()=>(r&&u({event_type:120,view_type:c,component:13467,element:11735,view_parameter:o}),p.current&&K.Z.addObstruction("top",p.current),()=>{p.current&&K.Z.removeObstruction("top",p.current)}),[r]);let m=()=>{u({event_type:101,view_type:c,component:13467,element:11735,view_parameter:o}),a&&a()};return(0,R.jsx)(H.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,R.jsxs)(g.xu,{ref:p,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",justifyContent:"center",minHeight:60,position:"absolute",top:!0,width:"100%",children:[(0,R.jsx)(g.xu,{left:!d,marginStart:5,position:"absolute",right:d,children:(0,R.jsx)(M.Z,{arrowType:n?"directional-arrow-left":"cancel",pinId:l,viewParameter:o,viewType:c})}),(0,R.jsx)(Z.Z,{title:s}),r&&"boolean"==typeof i&&m&&e&&t&&(0,R.jsx)(g.xu,{"data-test-id":"filter-button",left:d,marginEnd:12,position:"absolute",right:!d,children:(0,R.jsx)(U,{buttonText:e,handleDrawerClose:t,isDrawerOpen:i,onClick:m})})]})})}var $=a(582158),G=a(906623);let B=void 0!==n?n:n=a(75306);function W({cropArea:e,description:t,height:a,imageSignature:i,imageUrl:n,pinKey:l,requestParams:r,showAnimation:s,surfaceType:o,trafficSource:c,viewParameter:u,width:d}){let p=(0,P.Z)(B,l),m=(0,G.E)();return(0,R.jsx)(g.xu,{"data-test-id":"flashlight-enabled-image",height:a,width:d,children:(0,R.jsxs)(g.zd,{height:a,rounding:4,width:d,children:[(0,R.jsx)(g.Ee,{alt:t,naturalHeight:a,naturalWidth:d,onLoad:()=>{m&&m.markConstraintComplete("visualSearchMainPinImageRender")},src:n}),(0,R.jsx)($.Z,{imageSignature:i,imageSize:{h:a,w:d},initialCropArea:e,pinKey:p,requestParams:r,showAnimation:!!s,surfaceType:o,trafficSource:c,viewParameter:u})]})})}var Y=a(706308),q=a(431377);function Q({title:e}){return(0,R.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,R.jsx)(g.X6,{accessibilityLevel:2,size:"400",children:e})})}var X=a(408206),J=a(156725),ee=a(149722),et=a(301551),ea=a(939809);let ei={flashlight:72,stela:427,stl:427};function en({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:a}){let i=(0,S.TH)(),n=(0,ee.Z)(),{checkExperiment:l}=(0,f.F)(),r=(0,X.Z)(),{data:s,isLoaded:o}=a,c=s?.results||[],u=t?ei[t]:72;return r&&(!c&&o||c&&!c.some(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type))&&r("remove"),(0,R.jsx)(b.Fragment,{children:c.filter(e=>"story"===e.type).map((t,a)=>{if("story"!==t.type)return null;let{action:r,id:s,objects:o,story_type:c,title:d}=t,p=d.format||"",m=(0,et.Z)(n)&&"holdout"!==l("product_pin_rep_holdout").group,h=(0,C.mB)(i.search),_=(0,C.mB)(r?.url).full_feed_title||"";h.full_feed_title=(0,J.Z)(_);let y=(0,C.XP)(h),f=`/pin/${e}/visual-search/products/?${y}`;switch(c){case"stela_shop":case"unified_visual_feed_product_upsell":return(0,R.jsx)(ea.qS,{auxData:{story_type:c},component:14339,loggingId:s,objectIdStr:s,slotIndex:a,viewParameter:3462,viewType:u,children:({impressionTrackerRef:e})=>(0,R.jsxs)(g.xu,{ref:e,children:[p&&(0,R.jsx)(Q,{title:p}),(0,R.jsx)(g.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,R.jsx)(q.Z,{action:r,component:14339,contextLogData:{story_type:c},dangerouslySetActionUrl:f,element:179,hasPwtConstraint:!0,id:s,objects:o,surface:m?"ShoppingModule":void 0,viewParameter:3462,viewType:u})})]})},s);case"unified_visual_feed_organic_header":return(0,R.jsx)(ea.qS,{auxData:{story_type:c},component:14339,loggingId:s,objectIdStr:s,slotIndex:a,viewParameter:3462,viewType:u,children:({impressionTrackerRef:e})=>(0,R.jsx)(g.xu,{ref:e,marginBottom:4,children:(0,R.jsx)(Q,{title:t.title.format||""})})},s);default:return null}})})}var el=a(430062);let er=void 0!==l?l:l=a(237583);function es({isFilterOpened:e,isProductOnlyFeed:t,pinKey:a,surfaceType:i,viewParameter:n,viewType:l,visualSearchFlashlightUnifiedResource:r}){let s=(0,P.Z)(er,a),o="stl"===i,c=o||t,{data:u}=r,d=u?.search_identifier;return(0,R.jsxs)(b.Fragment,{children:[!o&&(0,R.jsx)(en,{pinId:s.entityId,surfaceType:i,visualSearchFlashlightUnifiedResource:r}),(0,R.jsx)(el.Z,{commerceData:{is_product_only_feed:c},isFilterOpened:e,isProductFeed:c,searchId:d,viewParameter:n,viewType:l,visualSearchFlashlightUnifiedResource:r})]})}var eo=a(549629),ec=a(213377),eu=a(603642),ed=a(71328),ep=a(627408),em=a(339001),eh=a(755453);a(422578);var eg=a(268127);let e_=void 0!==r?r:r=a(684824);var ey=a(775089),ef=a(493538),ev=a(676554),ex=a(19447);let eb=({data:e,itemIdx:t})=>{let a=(0,ex.S6)(),i=e.id?a(e.id):null,n=i||e;return(0,R.jsx)(ev.rX,{authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,pinId:n.id,pinKey:null!=n?{type:"deprecated",data:n}:null,slotIndex:t,viewParameter:3334,viewType:72})};function eS({visualLiveSearchProductFeedResourceData:e}){let t=(0,y.ZP)(),{data:a,isAtEnd:i,isLoaded:n,isFetching:l,fetchMore:r}=e,s=Array.isArray(a)?a:a?.results;return n?s&&0!==s.length?(0,R.jsx)(ef.Z,{isAtEndOfFeed:i,itemCount:s.length,children:(0,R.jsx)(ey.default,{columnWidth:ec.yF,items:s,loadItems:()=>{l||i||r()},renderItem:e=>(0,R.jsx)(eb,{...e}),scrollContainer:()=>window,virtualize:!1})}):null:(0,R.jsx)(g.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,R.jsx)(g.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})})}var ek=a(892254),ew=a(82205);let eP=void 0!==s?s:s=a(163431);function eT({pinKey:e,viewParameter:t,visualLiveSearchResourceData:a}){let i=(0,y.ZP)(),{hasSimplifiedPinGridExpLoaded:n}=(0,ek.$)(),l=(0,P.Z)(eP,e),{data:r,isFetching:s,fetchMore:o}=a,c=r?.results,u=r?.search_identifier;return(0,R.jsxs)(b.Fragment,{children:[c&&u&&(0,R.jsx)(g.Rk,{columnWidth:ec.yF,items:c,loadItems:o,minCols:1,renderItem:({data:e,itemIdx:a})=>(function({data:e,itemIdx:a}){let i=`${window.location.pathname}products/${window.location.search}&full_feed_title=${encodeURIComponent("Shop similar items")}`;return"story"===e.type?(0,R.jsx)(ew.Z,{dangerouslySetActionUrl:i,slotIndex:a,story:e}):"pin"===e.type?(0,R.jsx)(ev.ZP,{authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:u,image_signature:l.imageSignature},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:a,viewData:{search_identifier:u},viewParameter:t,viewType:72}):null})({data:e,itemIdx:a}),scrollContainer:()=>window}),(0,R.jsx)(g.$j,{accessibilityLabel:i._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:s||!u||!n})]})}var eE=a(136359),eI=a(597553),eC=a(306320),ej=a(400119),eA=a(955391),eF=a(494125),eR=a(561916);function eO({categoryFilters:e,cropSource:t,handleCategoryChange:a,viewParameter:i,viewType:n}){let{logContextEvent:l}=(0,N.v)(),r=(0,y.ZP)(),[s,o]=(0,b.useState)(!0);return(0,R.jsxs)(b.Fragment,{children:[(0,R.jsxs)(g.kC,{alignItems:"center",justifyContent:"between",children:[(0,R.jsx)(g.xv,{weight:"bold",children:r._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,R.jsx)(g.xu,{flex:"none",children:(0,R.jsx)(g.hU,{accessibilityLabel:r._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),icon:s?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{o(!s),l({event_type:101,component:13535,element:11547,view_type:n,view_parameter:i,aux_data:{commerce_data:JSON.stringify({filter:s?"collapsed":"expanded"})}}),s||l({event_type:13,component:13535,view_type:n,view_parameter:i,aux_data:{commerce_data:JSON.stringify({source:(0,eR.Z)({cropSource:t,viewType:n})})}})},size:"sm"})})]}),s?(0,R.jsx)(b.Fragment,{children:e.slice(0,5).map((e,t)=>(0,R.jsxs)(g.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,R.jsx)(g.xu,{flex:"grow",children:(0,R.jsx)(g.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,R.jsx)(g.xu,{children:(0,R.jsx)(g.hU,{accessibilityLabel:r._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),icon:e.checked?"check-circle":"circle",iconColor:"darkGray",onClick:()=>a(t),size:"sm"})})]},e.label))}):(0,R.jsx)(g.xu,{width:"80%",children:(0,R.jsx)(g.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),i=a.length,n=0===i?t._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${i}) ${a.map(e=>e.label).join(", ")}`;return n}(e,r)})})]})}var eD=a(490972);function eL(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function eM(e){return e.map(e=>({...e,checked:!1}))}function eZ({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:a,component:i,viewType:n,viewParameter:l}){let{logContextEvent:r}=(0,N.v)(),[s,o]=(0,b.useState)([]),[c,u]=(0,b.useState)(""),[d,p]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{if(e){let i=eM(e),n=t?function(e,t,a){if(e){let i=decodeURI(e).split(",");return t.map(e=>i.includes(e[a])?{...e,checked:!0}:e)}return t}(t,i,a):i;o(n);let l=eL(n,a);u(l)}},[e,t,a]),{filters:s,setFilters:o,submittedFilters:c,submitFilters:function(e){e!==c&&r({event_type:7472,component:i,view_type:n,view_parameter:l}),u(e),p(!1)},isFilterChanged:d,clearFilters:()=>eM(s),getSelected:e=>eL(e,a),handleFilterChange:function({index:e,pinId:t,auxCommerceData:u}){let d=!s[e].checked,m=[...s.slice(0,e),{...s[e],checked:d},...s.slice(e+1)];o(m),p(c!==eL(m,a)),r({event_type:101,component:i,element:11548,view_type:n,view_parameter:l,aux_data:{pin_id:t,commerce_data:JSON.stringify({[a]:s[e][a],select:d,...u})}})}}}function eN({categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:i,handleFilterChange:n,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:c,width:u,viewParameter:d,viewType:p}){let{logContextEvent:m}=(0,N.v)(),h=(0,y.ZP)();(0,eF.Z)(()=>{m({event_type:13,component:13467,view_type:p,view_parameter:d,aux_data:{commerce_data:JSON.stringify({source:(0,eR.Z)({cropSource:t,viewType:p})})}})});let{category:_,domain:f,max:v,min:x}=o||{},{filters:S,setFilters:k,submittedFilters:w,submitFilters:P,isFilterChanged:T,clearFilters:E,getSelected:I,handleFilterChange:C}=eZ({listOfAvailableFiltersFromAPI:a,appliedFilterValues:f,key:"domain",component:13469,viewType:p,viewParameter:d}),{filters:j,setFilters:A,submittedFilters:F,submitFilters:O,isFilterChanged:D,clearFilters:L,getSelected:M,handleFilterChange:Z}=eZ({listOfAvailableFiltersFromAPI:e,appliedFilterValues:_,key:"label",component:13535,viewType:p,viewParameter:d}),[K,z]=(0,b.useState)(s),[H,U]=(0,b.useState)(-1),[V,$]=(0,b.useState)(-1),[G,B]=(0,b.useState)(-1),[W,Y]=(0,b.useState)(-1),[q,Q]=(0,b.useState)(!1);(0,b.useEffect)(()=>{if(!s||v&&x||z(s),x){let e=parseInt(x,10);Y(e),$(e)}else $(s?.min_value??-1),Y(s?.min_value??-1);if(v){let e=parseInt(v,10);B(e),U(e)}else U(s?.max_value??-1),B(s?.max_value??-1)},[s,v,x]);let{max_value:X,min_value:J,currency_type:ee}=K||{},et=e=>t=>{let a,i;let n=0>(t||0)?0:t;n&&m({event_type:7472,component:13468,view_type:p,view_parameter:d});let l=!1;"max"===e?(a=n||X,-1===(i=V)&&(i=J),i>a&&(i=Math.max(a-eC.$,0))):(i=n||0,-1===(a=H)&&(a=X),a<i&&(a=i+eC.$)),Q(l=l||W!==i||G!==a),$(i),U(a)};(0,b.useEffect)(()=>{c&&c(function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i},n){let l=n._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i}){let n=t?t.split(",").length:0,l=e?e.split(",").length:0;return(i||a?1:0)+n+l}({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i}),s=r>0?` (${r})`:"";return`${l}${s}`}({categoryFilters:F,domainFilters:w,maxPrice:-1===G||G===X?void 0:G,minPrice:-1===W||W===J?void 0:W},h))},[h,G,W,F,w,c,X,J]);let ea=({categoryParam:e,domainParam:t,maxPrice:a,minPrice:i})=>{n({categoryParam:e,domainParam:t,maxPrice:-1!==a?a:void 0,minPrice:-1!==i?i:void 0}),B(a),Y(i),Q(!1),(G!==a||W!==i)&&m({event_type:7472,component:13468,view_type:p,view_parameter:d}),P(t),O(e);let r=-1!==i,s=-1!==a,o=""!==t,c=""!==e,u=r?i.toString():"",h=s?a.toString():"",g=o?encodeURI(t):"",_=c?encodeURI(e):"";l&&l({category:_,domain:g,max:h,min:u})};return(0,R.jsxs)(b.Fragment,{children:[(0,R.jsxs)(g.xu,{direction:"column",display:"flex",height:i-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,R.jsxs)(g.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,R.jsx)(g.xv,{weight:"bold",children:h._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,R.jsx)(g.zx,{onClick:()=>{U(-1),$(-1),k(E()),A(L()),ea({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),m({event_type:101,component:13467,element:11545,view_type:p,view_parameter:d})},size:"md",text:h._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!K&&-1!==V&&-1!==H&&(0,R.jsx)(eD.Z,{children:(0,R.jsx)(eA.Z,{cropSource:t,currencyCode:ee,defaultMaxPrice:X,defaultMinPrice:J,disableAutoFormatOnChange:!0,handleMaxPriceChange:et("max"),handleMinPriceChange:et("min"),maxPrice:H,minPrice:V,uiType:"slider",viewParameter:d,viewType:p})}),!!j&&j.length>0&&4!==t&&(0,R.jsx)(eD.Z,{children:(0,R.jsx)(eO,{categoryFilters:j,cropSource:t,handleCategoryChange:e=>{Z({index:e,pinId:r})},viewParameter:d,viewType:p})}),!!S&&S.length>0&&(0,R.jsx)(eD.Z,{children:(0,R.jsx)(ej.Z,{cropSource:t,filterOptions:S,handleFilterChange:e=>{C({index:e,pinId:r,auxCommerceData:{source:(0,eR.Z)({cropSource:t,viewType:p})}})},showVerifiedMerchants:!0,uiType:"check-circles",viewParameter:d,viewType:p})})]}),(0,R.jsx)(g.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:u,children:(0,R.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,R.jsx)(g.xu,{marginStart:2,children:(0,R.jsx)(g.sg,{span:6,children:(0,R.jsx)(g.zx,{color:"red",dataTestId:"confirm-filters-button",disabled:!(T||D||q),onClick:()=>{let e=I(S),t=M(j);ea({categoryParam:t,domainParam:e,maxPrice:H,minPrice:V}),m({event_type:101,component:13467,element:11546,view_type:p,view_parameter:d})},size:"md",text:h._('Apply', 'filter.apply.button', 'Button to submit all selected filter options'),type:"submit"})})})})})]})}function eK({categoryFilters:e,cropSource:t,domainFilters:a,isDrawerOpen:i,handleFilterChange:n,handleSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,topOffset:c=0,updateButtonText:u,viewParameter:d=3455,viewType:p}){let m=(0,eE.t)(),h=m+c,[_,y]=(0,b.useState)(0),f=()=>{y(window.innerHeight-m)};return(0,b.useEffect)(()=>(f(),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[]),(0,R.jsx)(g.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:i?0:-eI.pG,visibility:i?"visible":"hidden",top:h}},height:_,left:!0,paddingX:eI.VF,position:"fixed",width:eI.pG,zIndex:new g.Ry(2),children:(0,R.jsx)(eN,{categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:_,handleFilterChange:n,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:u,viewParameter:d,viewType:p,width:eI.pG-eI.VF*eI.vc*2})})}let ez=void 0!==o?o:o=a(91856);function eH(e){let{checkExperiment:t}=(0,f.F)(),a=(0,S.k6)(),i=(0,S.TH)(),n=(0,y.ZP)(),l=(0,b.useContext)(O),r=(0,eE.t)(),{filters:s,pinKey:o,visualSearchFlashlightUnifiedResourceData:c,visualLiveSearchResourceData:u,visualLiveSearchProductFeedResourceData:d}=e,{cropArea:p,cropSource:m,entrySource:h,handleFilterChange:_,isProductPage:v,requestParams:x,searchQuery:k,submittedFilters:w,surfaceType:I,title:C,trafficSource:j}=l||{},{category_filters:A,domain_filters:F,price_filters:D}=s||{},L=(0,P.Z)(ez,o),{getNormalizedPinImage:M}=(0,T.Z)({pinKey:L,maxWidth:E.RZ}),Z=["stela","stl"].includes(I),{anyEnabled:N}=t("web_unified_visual_feed"),{anyEnabled:K}=t("web_flashlight_unified_feed"),{anyEnabled:z}=t("web_unified_visual_features_expansion"),H=function({cropSource:e,i18n:t,inFlashlightUFExperiment:a,inStelaUFExperiment:i,inUnifiedVisualFeaturesExpansion:n,isProductPage:l,surfaceType:r,title:s}){let o=t._('Image search', 'imageSearch.header', 'header explaining the results of image search'),c=t._('Shop the look', 'shopTheLook.header', 'User will see this Shop the look header when navigating from the Shop the look module'),u=(0,em.nk)(t._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(s||"").toLowerCase()}).join(""),d=4===e;if(l)return s;if("stl"===r)return d?c:o;let p=a&&"flashlight"===r,m=i&&["stela","stl"].includes(r);return n||p||m?d?"":o:d?u:o}({cropSource:m,i18n:n,inFlashlightUFExperiment:K,inStelaUFExperiment:N,inUnifiedVisualFeaturesExpansion:z,isProductPage:v,surfaceType:I,title:C}),[U,$]=(0,b.useState)(!1),[G,B]=(0,b.useState)(""),q=U?eI.pG:0,Q=(0,Y.Z)(s),{state:X}=i||{},{internalNavigation:J=!1}=X||{},{width:ee,height:et,url:ea}=M(),ei=ee+20,en=U?0:12,el=v?0:ei+4*en,er=el+q,ey=!v&&N&&"stela"===I,ef=!v&&K&&"flashlight"===I,[ev,ex]=(0,b.useState)(window.innerWidth);(0,b.useEffect)(()=>{let e=(0,ed.Z)(()=>ex(window.innerWidth),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)});let eb=c?.data?.search_identifier||u?.data?.search_identifier||d?.data?.search_identifier||"",[ek,ew]=(0,b.useState)(eb);(0,b.useEffect)(()=>{eb&&ek!==eb&&ew(eb)},[eb,ek]);let eP=(0,b.useRef)(null),eC=0,ej="";(0,b.useEffect)(()=>(eP&&eP.current&&ej===L.entityId&&(eP.current.scrollTop=eC),()=>{eP&&eP.current&&(eC=eP.current.scrollTop,ej=L.entityId)}),[eP]);let eA=Z?427:"flashlight"===I?K&&v?427:72:427,eF=Z?4===m?3462:3455:"flashlight"===I?K&&4===m?3462:3050:3462,eR=function({entrySource:e,isProductPage:t,pinKey:a,surfaceType:i,viewParameter:n,viewType:l}){let{checkExperiment:r}=(0,f.F)(),{anyEnabled:s}=r("web_unified_visual_feed"),{anyEnabled:o}=r("web_flashlight_unified_feed"),c=(0,P.Z)(e_,a),u=(0,eg.Z)(c),d=u({default:{is_product_only_feed:"stl"===i||t}});if(s||o)return{view_type:l,view_parameter:n,aux_data:d};if(!["stela","stl"].includes(i))return{view_type:l,view_parameter:3050,view_data:{pin_id:c.entityId}};{let t=(c.visualObjects||[]).some(e=>e.isStela);return{view_type:l,view_parameter:n,view_data:{pin_id:c.entityId},aux_data:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:t})}}}}({entrySource:h,isProductPage:v,pinKey:L,surfaceType:I,viewParameter:eF,viewType:eA});return(0,R.jsx)(eu.Z,{constraints:function({isProductPage:e,isStl:t,isUnifiedFeed:a}){return e?[]:!a||t?["visualSearchMainPinImageRender"]:a?["shoppingModuleRender","visualSearchMainPinImageRender"]:[]}({isProductPage:v,isStl:"stl"===I,isUnifiedFeed:K||N||z}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,R.jsx)(ep.Z,{objectId:ek,view:eA,children:(0,R.jsx)(eo.Z,{log:eR,children:(0,R.jsxs)(g.xu,{"data-test-id":"related-products",children:[(0,R.jsx)(V,{filtersText:G,handleDrawerClose:function(){$(!1)},handleDrawerOpen:function(){$(!0)},isDrawerOpen:U,isProductOnlyFeed:v,pinId:L.entityId,showFilter:!(ey||ef)&&Z&&Q,title:H,viewParameter:eF,viewType:eA}),Q&&(0,R.jsx)(eK,{categoryFilters:A,cropSource:m,domainFilters:F,handleFilterChange:_??(()=>{}),handleSubmit:function(){let e=(0,eh.Z)({cropArea:p,cropSource:m,isProductPage:v,pinId:L.entityId,requestParams:x,searchQuery:k,surfaceType:I,title:C,trafficSource:j});a.replace(e)},isDrawerOpen:U,pinId:L.entityId,priceFilters:D,submittedFilters:w,topOffset:60,updateButtonText:e=>{B(e)},viewParameter:eF,viewType:eA}),!v&&(0,R.jsx)(g.xu,{ref:eP,bottom:!0,dangerouslySetInlineStyle:{__style:{top:r+92,left:q,right:q}},height:"inherit",marginBottom:3,marginStart:en,overflow:"auto",position:"fixed",width:ei,children:(0,R.jsx)(W,{cropArea:p,description:L.description??"",height:et,imageSignature:L.imageSignature||"",imageUrl:ea,pinKey:L,requestParams:x,showAnimation:!J&&"flashlight"===I,surfaceType:I,trafficSource:j,viewParameter:eF,width:ee})}),(0,R.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:{top:92,left:er,right:er}},paddingX:ec.jC,position:"relative",width:ev-er,children:[c&&(0,R.jsx)(es,{isFilterOpened:U,isProductOnlyFeed:v,pinKey:L,surfaceType:I,viewParameter:eF,viewType:eA,visualSearchFlashlightUnifiedResource:c}),!K&&u&&(0,R.jsx)(eT,{pinKey:L,viewParameter:eF,visualLiveSearchResourceData:u}),!K&&d&&(0,R.jsx)(eS,{visualLiveSearchProductFeedResourceData:d})]})]})})})})}let eU=void 0!==c?c:c=a(982385);function eV(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:n}=e,l=(0,P.Z)(eU,a),r=(0,L.Z)({name:"VisualLiveSearchProductFeedResource",options:i}),s=r.data?.search_identifier||"";return(0,b.useEffect)(()=>{n&&s&&t!==s&&n(s)}),(0,R.jsx)(eH,{pinKey:l,visualLiveSearchProductFeedResourceData:r})}let e$=void 0!==u?u:u=a(290602);function eG(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:n}=e,l=(0,P.Z)(e$,a),r=(0,L.Z)({name:"VisualLiveSearchResource",options:i}),s=r.data?.search_identifier||"";return(0,b.useEffect)(()=>{n&&s&&t!==s&&n(s)}),(0,R.jsx)(eH,{pinKey:l,visualLiveSearchResourceData:r})}var eB=a(8760);let eW=void 0!==d?d:d=a(593390);function eY(e){let{pinKey:t,resourceOptions:a}=e,i=(0,P.Z)(eW,t),{visualSearchFlashlightUnifiedResource:n,filters:l}=(0,eB.Z)({resourceOptions:a});return(0,R.jsx)(eH,{filters:l,pinKey:i,visualSearchFlashlightUnifiedResourceData:n})}let eq=void 0!==p?p:p=a(620254);function eQ({pinKey:e}){let{checkExperiment:t}=(0,f.F)(),a=(0,S.TH)(),i=(0,P.Z)(eq,e),{getInitialCropArea:n}=function({pinKey:e}){let t=(0,P.Z)(I,e),{getNormalizedPinImage:a}=(0,T.Z)({pinKey:t,maxWidth:E.RZ}),{width:i,height:n}=a(),l=(0,b.useCallback)(({initialCropArea:e})=>e||{x:w.S,y:w.S,w:i-2*w.S,h:n-2*w.S},[n,i]);return{getInitialCropArea:l}}({pinKey:i}),{getNormalizedPinImage:l}=(0,T.Z)({pinKey:i,maxWidth:E.RZ}),{width:r,height:s}=l(),o=t("web_unified_visual_feed").anyEnabled||t("web_unified_visual_features_expansion").anyEnabled,c=t("web_flashlight_unified_feed").anyEnabled||t("web_unified_visual_features_expansion").anyEnabled,u=(0,C.mB)(a.search),{cropSource:d,full_feed_title:p,surfaceType:m,category:h,domain:g,max:_,min:y,q:v,requestParams:x,rs:O}=u,L=(0,j.Z)(Number(d))||5,M=(0,k.Z)(a),Z=n({initialCropArea:M}),N=a.pathname.includes("/products"),K=m||"flashlight",z=N||"stl"===K?"shopping":"flashlight",H=(0,A.Z)({cropSource:L,isProductPage:N,surfaceType:K}),[U,V]=(0,b.useState)(parseInt(y,10)||null),[$,G]=(0,b.useState)(parseInt(_,10)||null),[B,W]=(0,b.useState)(g?decodeURI(g):null),[Y,q]=(0,b.useState)(h?decodeURI(h):null);function Q({minPrice:e,maxPrice:t,domainParam:a,categoryParam:i}){V(e),G(t),W(a),q(i)}let X={categories:Y,crop:(0,F.Z)({cropArea:Z,scaledWidth:r,scaledHeight:s}),crop_source:L,domains:B,entry_source:z,entrypoint:H,field_set_key:"shopping_grid_item",image_signature:i.imageSignature||void 0,is_shopping:function({cropSource:e,inStelaUFExperiment:t,isProductPage:a,surfaceType:i}){return!!a||4===e&&("stl"===i||"stela"===i&&!t)}({cropSource:L,inStelaUFExperiment:o,isProductPage:N,surfaceType:K}),pin_id:i.entityId,price_max:$,price_min:U,request_params:x,source:O},J=(0,b.useMemo)(()=>({cropArea:Z,cropSource:L,entrySource:z,handleFilterChange:Q,isProductPage:N,requestParams:x,searchQuery:v,submittedFilters:{category:h,domain:g,max:_,min:y},surfaceType:K,title:p,trafficSource:O}),[h,Z,L,g,z,N,_,y,x,v,K,p,O]);if(!i)return null;let ee="flashlight"!==K||c?(0,R.jsx)(eY,{pinKey:i,resourceOptions:X}):N?(0,R.jsx)(eV,{pinKey:i,resourceOptions:X}):(0,R.jsx)(eG,{pinKey:i,resourceOptions:X});return(0,R.jsx)(D,{value:J,children:ee})}let eX=void 0!==m?m:m=a(900228);function eJ(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function e0(e){return e?.map(e=>{var t,a;return{additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:a})=>{t.push(...function({additionalImages:e,spec:t}){let a=[];return e?.forEach(e=>{e.canonicalImage&&a.push({canonical_images:{[t]:eJ(e.canonicalImage)},image_signature:e.imageSignature??""})}),a}({additionalImages:e,spec:a})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(a=t?.variants,a?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}let e1=(0,_.Z)({useGraphQLAdapter:function(e){var t,a,i;let{id:n}=useParams(),{pinId:l}=(0,x.Z)(n||""),r=function({pinId:e}){return{query:eX,variables:{pinId:e}}}({pinId:l}),s=(0,h.useLazyLoadQuery)(eX,r.variables),o=s.v3GetPinQuery?.data;if(!o)return null;let c={id:o.entityId??"",is_eligible_for_related_products:o.isEligibleForRelatedProducts??!1,description:o.description??"",image_signature:o.imageSignature??"",visual_objects:(t=o.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,title:e.title??"",w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:function(e){let t={};return e.forEach(e=>{let{image:a,spec:i}=e;a&&(t[i]=eJ(a))}),t}([{image:o.imageOrig,spec:"orig"},{image:o.image736x,spec:"736x"},{image:o.image564x,spec:"564x"},{image:o.image474x,spec:"474x"},{image:o.image236x,spec:"236x"}])??{},rich_metadata:(a=o.richMetadata,{products:e0(a?.products)??[]}),rich_summary:(i=o.richSummary,{products:e0(i?.products)??[]}),type:"pin"};return c},useLegacyAdapter:function(e){let{data:t,isLoaded:a}=(0,v.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return a&&t?t:null}});function e2(){let{checkExperiment:e}=(0,f.F)(),t=(0,y.ZP)();return(0,R.jsx)(e1,{input:e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,R.jsx)(g.$j,{accessibilityLabel:t._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,R.jsx)(eQ,{pinKey:{type:"deprecated",data:e}})})}},944846:(e,t,a)=>{"use strict";a.d(t,{By:()=>_,IT:()=>h,N6:()=>o,br:()=>c,jq:()=>d,lU:()=>m,mk:()=>p,tq:()=>u});var i=a(107366);let n=e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}),l=()=>({type:"CLEAR_RECENT_SEARCHES"}),r=e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}),s=()=>({type:"CLEAR_RECENT_PERSONAL_SEARCHES"}),o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),c=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),u=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),d=(e,t,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:a}}),p=e=>({type:"SET_ANIMATION_ON_BODY_FILTER",payload:{animated:e}}),m=(e,t,a)=>n=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,a),n("PERSONAL"===e?s():l())},h=(e,t,a,l,s)=>o=>{a||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(l,s),o("PERSONAL"===t?r(e):n(e))},g=e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}),_=e=>t=>{t(g(e))}},125768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var i=a(702664),n=a(616550),l=a(883119),r=a(224796),s=a(587703),o=a(525364),c=a(140017),u=a(731714),d=a(217058),p=a(623409),m=a(785893);function h({alignIconLeft:e,bgColor:t,color:a,disableRedirect:h=!1,fallbackUrl:g,icon:_="arrow-back",onTouch:y,padding:f,placement:v,shouldUseFallbackUrl:x,size:b="lg",viewParameter:S,viewType:k}){let w=(0,c.ZP)(),P=(0,n.k6)(),T=(0,n.TH)(),E=(0,i.useSelector)(e=>e.session.isAuthenticated),I=(0,s.Z)(),C=(0,p.Z)(),{viewType:j,viewParameter:A}=(0,o.SU)(),[F,R]=k?[k,S]:[j,A],O=()=>T.search&&T.search.includes("?nativeShouldDismiss=true"),D=()=>{let e=u.Z.getItem(r.pm);T.key||"/ideas"!==g?(0,d.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,d.My)("pinner_conversion.back_button.no_history"),(0,d.My)(`web_back_button_click.${String(v)}.is_auth_${String(E)}`),C({action:"click",item:"back-button"}),F&&I({view_type:F,view_parameter:R,element:34,event_type:102}),y&&y(),h||((!T.key||T.state&&"redirect"===T.state.referrer||x)&&g?P.push(g):T.pathname.includes("/password/reset/")&&O()?P.push("/login/?dismissWebview=true"):P.goBack())};return(0,m.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,m.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===_?-1:-2,width:48,children:(0,m.jsx)(l.hU,{accessibilityLabel:w._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:_,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:D,padding:"auto"!==f?f:2,size:b})}):(0,m.jsx)(l.hU,{accessibilityLabel:w._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:_,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:D,padding:"auto"!==f?f:2,size:b})})}},490972:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({children:e}){return(0,n.jsx)(i.xu,{paddingY:4,children:e})}},597553:(e,t,a)=>{"use strict";a.d(t,{VF:()=>n,pG:()=>i,vc:()=>l});let i=348,n=7,l=4},561916:(e,t,a)=>{"use strict";function i({cropSource:e,viewType:t}){return 2===t?"search":e&&5!==e?4===e?"stela":null:"related_products"}a.d(t,{Z:()=>i})},750701:(e,t,a)=>{"use strict";a.d(t,{Z:()=>en});var i=a(667294),n=a(542473),l=a.n(n),r=Math.sqrt(50),s=Math.sqrt(10),o=Math.sqrt(2);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){var i;i=a[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,i=g(e);if(t){var n=g(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,a)}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a,i,n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return l}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}var k="react-compound-slider:";function w(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,a){return t.val>a.val?e?-1:1:a.val>t.val?e?1:-1:0}}function P(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.findIndex(function(e){return e.key===t});if(-1!==n){var l=e[n],r=l.key;return l.val===a?e:[].concat(x(e.slice(0,n)),[{key:r,val:a}],x(e.slice(n+1))).sort(w(i))}return e}function T(e,t){if(!e)return[0,0];var a=e.getBoundingClientRect();return[t?a.top:a.left,t?a.bottom:a.right]}function E(e){var t=e.type,a=e.touches;return!a||a.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&a.length>0}function I(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=0;return{handles:e.map(function(e){var t=a.getValue(e);return e!==t&&(n+=1,l()(!i,"".concat(k," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t}).map(function(e,t){return{key:"$$-".concat(t),val:e}}).sort(w(t)),changes:n}}function j(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.forEach(function(t){return t&&t(e)})}}var A=function(){return{value:0,percent:0}},F=function(e){h(a,e);var t=f(a);function a(){var e;d(this,a);for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props,i=a.emitMouse,n=a.emitTouch;return u(u({},t),{},{onMouseDown:j(t&&t.onMouseDown,i),onTouchStart:j(t&&t.onTouchStart,n)})},e}return m(a,[{key:"render",value:function(){var e=this.getRailProps,t=this.props,a=t.getEventData,n=t.activeHandleID,l=(0,t.children)({getEventData:a||A,activeHandleID:void 0===n?"":n,getRailProps:e});return l&&i.Children.only(l)}}]),a}(i.Component),R=function(e){h(a,e);var t=f(a);function a(){var e;d(this,a);for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},e.getHandleProps=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.props,n=i.emitKeyboard,l=i.emitMouse,r=i.emitTouch;return u(u({},a),{},{onKeyDown:j(a&&a.onKeyDown,function(e){return n&&n(e,t)}),onMouseDown:j(a&&a.onMouseDown,e.autofocus,function(e){return l&&l(e,t)}),onTouchStart:j(a&&a.onTouchStart,function(e){return r&&r(e,t)})})},e}return m(a,[{key:"render",value:function(){var e=this.getHandleProps,t=this.props,a=t.activeHandleID,n=t.children,l=t.handles,r=n({handles:void 0===l?[]:l,activeHandleID:void 0===a?"":a,getHandleProps:e});return r&&i.Children.only(r)}}]),a}(i.Component),O=function(){function e(){d(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return m(e,[{key:"createInterpolator",value:function(e,t){var a=this,i=e[0],n=e[1],l=t[0],r=t[1];return n<i?function(e){return a.interpolateValue(r,l)(a.deinterpolateValue(n,i)(e))}:function(e){return a.interpolateValue(l,r)(a.deinterpolateValue(i,n)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(a){return e+t*a}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){var t=this.domain,a=this.range;return(this.interpolator||(this.interpolator=this.createInterpolator(t,a)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(e){var t=this.domain;return function(e,t,a){var i,n,l,c,u,d,p,m=-1;if(a=+a,(e=+e)==(t=+t)&&a>0)return[e];if((c=t<e)&&(u=e,e=t,t=u),0==(n=Math.floor(Math.log(i=(t-e)/Math.max(0,a))/Math.LN10),l=i/Math.pow(10,n),p=n>=0?(l>=r?10:l>=s?5:l>=o?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(l>=r?10:l>=s?5:l>=o?2:1))||!isFinite(p))return[];if(p>0){let a=Math.round(e/p),i=Math.round(t/p);for(a*p<e&&++a,i*p>t&&--i,d=Array(u=i-a+1);++m<u;)d[m]=(a+m)*p}else{let a=Math.round(e*(p=-p)),i=Math.round(t*p);for(a/p<e&&++a,i/p>t&&--i,d=Array(u=i-a+1);++m<u;)d[m]=(a+m)/p}return c&&d.reverse(),d}(t[0],t[t.length-1],e||10)}}]),e}(),D=function(){return{value:0,percent:0}},L=function(e){h(a,e);var t=f(a);function a(){return d(this,a),t.apply(this,arguments)}return m(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.values,n=e.scale,l=void 0===n?new O:n,r=e.count,s=e.getEventData,o=e.activeHandleID,c=t({getEventData:void 0===s?D:s,activeHandleID:void 0===o?"":o,ticks:(a||l.getTicks(void 0===r?10:r)).map(function(e){return{id:"$$-".concat(e),value:e,percent:l.getValue(e)}})});return c&&i.Children.only(c)}}]),a}(i.Component),M=function(){return{value:0,percent:0}},Z=function(e){h(a,e);var t=f(a);function a(){var e;d(this,a);for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getTrackProps=function(t){var a=e.props,i=a.emitMouse,n=a.emitTouch;return u(u({},t||{}),{},{onMouseDown:j(t&&t.onMouseDown,i),onTouchStart:j(t&&t.onTouchStart,n)})},e}return m(a,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,a=t.children,n=t.left,l=void 0===n||n,r=t.right,s=void 0===r||r,o=t.scale,c=void 0===o?new O:o,u=t.handles,d=void 0===u?[]:u,p=t.getEventData,m=t.activeHandleID,h=c.getDomain(),g=[],_=0;_<d.length+1;_++){var y=d[_-1],f=d[_];0===_&&!0===l?y={id:"$",value:h[0],percent:0}:_===d.length&&!0===s&&(f={id:"$",value:h[1],percent:100}),y&&f&&g.push({id:"".concat(y.id,"-").concat(f.id),source:y,target:f})}var v=a({getEventData:void 0===p?M:p,activeHandleID:void 0===m?"":m,tracks:g,getTrackProps:e});return v&&i.Children.only(v)}}]),a}(i.Component);function N(e,t,a){return Math.min(Math.max(e,t),a)}var K=m(function e(){var t=this;d(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var a=v(t.domain,2),i=a[0],n=a[1],l=v(t.range,2),r=l[0],s=l[1],o=t.step,c=o*Math.round((N(e,i,n)-i)/(n-i)*(s-r)/o)+r;return N(c,r<s?r:s,s>r?s:r)}}),z="undefined"!=typeof window&&"undefined"!=typeof document,H=function(){},U=function(e){if(!(0,i.isValidElement)(e))return!1;var t=e.type,a=t?t.name:"";return a===R.name||a===F.name||a===L.name||a===Z.name},V=function(e,t,a,i){var n=i?e-t:e+t;return i?Math.max(a[0],n):Math.min(a[1],n)},$=function(e,t,a,i){var n=i?e+t:e-t;return i?Math.min(a[1],n):Math.max(a[0],n)},G=[0,100],B=function(e){h(a,e);var t=f(a);function a(){var e;d(this,a);for(var n=arguments.length,l=Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={step:.1,values:[],domain:G,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},e.slider=i.createRef(),e.onKeyDown=function(t,a){var i=["ArrowRight","ArrowUp"],n=["ArrowDown","ArrowLeft"],l=y(e),r=l.state.handles,s=l.props,o=s.step,c=void 0===o?.1:o,u=s.reversed,d=void 0!==u&&u,p=s.vertical,m=s.domain,h=void 0===m?[0,100]:m,g=t.key||"".concat(t.keyCode);if(i.concat(n).includes(g)){if(void 0!==p&&p){var _=[n,i];i=_[0],n=_[1]}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var f=r.find(function(e){return e.key===a});if(f){var v=f.val,x=v;i.includes(g)?x=V(v,c,h,d):n.includes(g)&&(x=$(v,c,h,d));var b=r.map(function(e){return e.key===a?{key:e.key,val:x}:e});e.submitUpdate(b,!0)}}},e.onMouseDown=function(t,a){e.onStart(t,a,!1)},e.onTouchStart=function(t,a){E(t)||e.onStart(t,a,!0)},e.getEventData=function(t,a){var i,n=y(e),l=n.state,r=l.pixelToStep,s=l.valueToPerc,o=n.props.vertical;return r.setDomain(T(e.slider.current,o)),a&&t instanceof TouchEvent?i=r.getValue(I(o,t)):t instanceof MouseEvent&&(i=r.getValue(o?t.clientY:t.pageX)),{value:i,percent:s.getValue(i)}},e.onMouseMove=function(t){var a=y(e),i=a.state,n=i.handles,l=i.pixelToStep,r=i.activeHandleID,s=void 0===r?"":r,o=a.props,c=o.vertical,u=o.reversed,d=void 0!==u&&u;l.setDomain(T(e.slider.current,c));var p=P(n,s,l.getValue(c?t.clientY:t.pageX),d);e.submitUpdate(p)},e.onTouchMove=function(t){var a=y(e),i=a.state,n=i.handles,l=i.pixelToStep,r=i.activeHandleID,s=a.props,o=s.vertical,c=s.reversed;if(!(null===l||E(t))){l.setDomain(T(e.slider.current,o));var u=P(n,r,l.getValue(I(o,t)),c);e.submitUpdate(u)}},e.onMouseUp=function(){var t=y(e),a=t.state,i=a.handles,n=void 0===i?[]:i,l=a.activeHandleID,r=t.props,s=r.onChange,o=void 0===s?H:s,c=r.onSlideEnd,u=void 0===c?H:c;o(n.map(function(e){return e.val})),u(n.map(function(e){return e.val}),{activeHandleID:l}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp))},e.onTouchEnd=function(){var t=y(e),a=t.state,i=a.handles,n=a.activeHandleID,l=t.props,r=l.onChange,s=void 0===r?H:r,o=l.onSlideEnd,c=void 0===o?H:o;s(i.map(function(e){return e.val})),c(i.map(function(e){return e.val}),{activeHandleID:n}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onTouchEnd))},e}return m(a,[{key:"componentDidMount",value:function(){var e=this.state.pixelToStep,t=this.props.vertical;e.setDomain(T(this.slider.current,t))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){z&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,a){var i=this.state.handles,n=this.props.onSlideStart,l=void 0===n?H:n;!a&&e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),i.find(function(e){return e.key===t})?(this.setState({activeHandleID:t}),l(i.map(function(e){return e.val}),{activeHandleID:t}),a?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,a))}},{key:"handleRailAndTrackClicks",value:function(e,t){var a,i=this,n=this.state,l=n.handles,r=n.pixelToStep,s=this.props,o=s.vertical,c=s.reversed,u=void 0!==c&&c,d=this.slider;r.setDomain(T(d.current,o)),a=t?r.getValue(I(o,e)):r.getValue(o?e.clientY:e.pageX);for(var p="",m=1/0,h=0;h<l.length;h++){var g=l[h],_=g.key,y=Math.abs(g.val-a);y<m&&(p=_,m=y)}var f=P(l,p,a,u);this.setState({activeHandleID:p},function(){i.submitUpdate(f,!0),t?i.addTouchEvents():i.addMouseEvents()})}},{key:"addMouseEvents",value:function(){z&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){z&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props,i=a.mode,n=void 0===i?1:i,r=a.step,s=void 0===r?.1:r,o=a.onUpdate,c=void 0===o?H:o,u=a.onChange,d=void 0===u?H:u,p=a.reversed,m=void 0!==p&&p,h=this.state.valueToStep.getValue;this.setState(function(a){var i=a.handles,r=[];if("function"==typeof n)r=n(i,e,s,m,h),l()(Array.isArray(r),"Custom mode function did not return an array.");else switch(n){case 1:r=e;break;case 2:r=function(e,t){for(var a=0;a<e.length;a++)if(e[a].key!==t[a].key||t[a+1]&&t[a].val===t[a+1].val)return e;return t}(i,e);break;case 3:r=function e(t,a,i,n,l){for(var r=-1,s=!0,o=0;o<t.length;o++){var c=t[o],u=a[o];if(!u||u.key!==c.key)return t;u.val!==c.val&&(r=o,s=u.val-c.val>0)}if(-1===r)return t;for(var d=s?i:-i,p=0;p<a.length;p++){var m=a[p],h=a[p+1];if(h&&m.val===h.val){if(p===r){var g=h.val+d;if(l(g)!==g)return t;var _=P(a,h.key,h.val+d,n),y=e(a,_,i,n,l);if(y===a)return t;return y}var f=m.val+d;if(l(f)!==f)return t;var v=P(a,m.key,m.val+d,n),x=e(a,v,i,n,l);if(x===a)return t;return x}}return a}(i,e,s,m,h);break;default:r=e,l()(!1,"".concat(k," Invalid mode value."))}return c(r.map(function(e){return e.val})),t&&d(r.map(function(e){return e.val})),{handles:r}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.handles,n=t.valueToPerc,l=t.activeHandleID,r=this.props,s=r.className,o=r.rootStyle,c=void 0===o?{}:o,d=r.rootProps,p=void 0===d?{}:d,m=r.component,h=void 0===m?"div":m,g=r.disabled,_=void 0!==g&&g,y=r.flatten,f=a.map(function(e){var t=e.key,a=e.val;return{id:t,value:a,percent:n.getValue(a)}}),v=i.Children.map(this.props.children,function(t){return!0===U(t)?i.cloneElement(t,{scale:n,handles:f,activeHandleID:l,getEventData:e.getEventData,emitKeyboard:_?H:e.onKeyDown,emitMouse:_?H:e.onMouseDown,emitTouch:_?H:e.onTouchStart}):t});return void 0!==y&&y?i.createElement(i.Fragment,null,i.createElement(h,u(u({},p),{},{style:c,className:s,ref:this.slider})),v):i.createElement(i.Fragment,null,i.createElement(h,u(u({},p),{},{style:c,className:s,ref:this.slider}),v))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a,i,n=e.step,r=void 0===n?.1:n,s=e.values,o=e.domain,c=void 0===o?G:o,u=e.reversed,d=void 0!==u&&u,p=e.onUpdate,m=void 0===p?H:p,h=e.onChange,g=void 0===h?H:h,_=e.warnOnChanges,y=void 0!==_&&_,f=t.valueToPerc,b=t.valueToStep,S=t.pixelToStep,w={};if(f&&b&&S||(f=new O,b=new K,S=new K,w.valueToPerc=f,w.valueToStep=b,w.pixelToStep=S),t.domain===G||null===t.step||null===t.domain||null===t.reversed||r!==t.step||c[0]!==t.domain[0]||c[1]!==t.domain[1]||d!==t.reversed){var P=v(c,2),T=P[0],E=P[1];b.setStep(r).setRange([T,E]).setDomain([T,E]),!0===d?(f.setDomain([T,E]).setRange([100,0]),S.setStep(r).setRange([E,T])):(f.setDomain([T,E]).setRange([0,100]),S.setStep(r).setRange([T,E])),l()(E>T,"".concat(k," Max must be greater than min (even if reversed). Max is ").concat(E,". Min is ").concat(T,"."));var I=C(s||t.values,d,b,y),j=I.handles;(I.changes||void 0===s||s===t.values)&&(m(j.map(function(e){return e.val})),g(j.map(function(e){return e.val}))),w.step=r,w.values=s,w.domain=c===G?x(c):c,w.handles=j,w.reversed=d}else{if(!((a=s)===(i=t.values)||a.length===i.length&&a.reduce(function(e,t,a){return e&&i[a]===t},!0))){var A=C(s,d,b,y),F=A.handles;A.changes&&(m(F.map(function(e){return e.val})),g(F.map(function(e){return e.val}))),w.values=s,w.handles=F}}return Object.keys(w).length?w:null}}]),a}(i.PureComponent),W=a(883119),Y=a(587703),q=a(696534),Q=a(140017),X=a(72461),J=a(5859),ee=a(943484),et=a(785893);let ea=({domain:[e,t],handle:{id:a,value:i,percent:n},getHandleProps:l,touched:r,activeHandleID:s})=>(0,et.jsx)("div",{"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":i,role:"slider",style:{left:`${n}%`,position:"absolute",marginLeft:"-11px",marginTop:"-6px",border:"1px solid white",zIndex:2,width:15,height:15,cursor:"pointer",borderRadius:"50%",backgroundColor:"black",transform:r&&s===a?"scale(2)":"scale(1)",transition:"transform 0.2s"},...l(a)}),ei=({source:e,target:t,getTrackProps:a,backgroundColor:i})=>(0,et.jsx)("div",{style:{position:"absolute",height:5,zIndex:1,backgroundColor:i||"black",borderRadius:7,cursor:"pointer",left:`${e.percent}%`,width:`${t.percent-e.percent}%`},...a()}),en=function({cropSource:e,currencyType:t,minPrice:a,maxPrice:n,lowerBound:l,upperBound:r,handlePriceChange:s,withTitle:o,instructions:c}){let u=(0,Q.ZP)(),d=(0,X.Z)(),p=(0,Y.Z)(),{locale:m}=(0,J.B)(),h={position:"absolute",width:"100%",height:5,borderRadius:7,cursor:"pointer",backgroundColor:(0,q.Yc)()?"#454545":"lightGrey"},g=[Math.ceil(l),Math.ceil(r)],_=[Math.ceil(a),Math.ceil(n)],[y,f]=(0,i.useState)([!1,!1]);(0,i.useEffect)(()=>{p({event_type:120,component:13468,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,ee.Z)(e)})}})},[]);let v={currency:t,style:"currency",minimum_fraction_digits:0,maximum_fraction_digits:2};return(0,et.jsxs)(i.Fragment,{children:[o&&(0,et.jsx)(W.xu,{"data-test-id":"price-filter-label",paddingY:4,children:(0,et.jsx)(W.xv,{children:u._('Price range', 'FeedFiltering.PriceFilter.PriceRange', 'Area that lists the price slider')})}),(0,et.jsxs)(W.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,et.jsx)(W.xv,{weight:"bold",children:(0,et.jsx)(W.xu,{dangerouslySetInlineStyle:{__style:{transform:y[0]?"translateZ(0) translateY(0) scale(1.25)":""}},"data-test-id":"min-price-filter",children:d(m,_[0],v)})}),(0,et.jsx)(W.xv,{weight:"bold",children:(0,et.jsx)(W.xu,{dangerouslySetInlineStyle:{__style:{transform:y[1]?"translateZ(0) translateY(0) scale(1.25)":"",textAlign:"right"}},"data-test-id":"max-price-filter",children:d(m,_[1],{...v,uplimit:r})})})]},"priceSliderValues"),(0,et.jsxs)(B,{domain:g,mode:2,onChange:()=>{f([!1,!1])},onUpdate:e=>{s(e);let[t,a]=_,[i,n]=e;t!==i?f([!0,!1]):a!==n&&f([!1,!0])},rootStyle:{margin:"5%",position:"relative",width:"90%"},step:1,values:_,children:[(0,et.jsx)(F,{children:({getRailProps:e})=>(0,et.jsx)("div",{"data-test-id":"slider-handles-rail",style:h,...e()})}),(0,et.jsx)(R,{children:({handles:e,getHandleProps:t,activeHandleID:a})=>(0,et.jsx)("div",{className:"slider-handles","data-test-id":"slider-handles",children:e.map((e,i)=>(0,et.jsx)(ea,{activeHandleID:a,domain:g,getHandleProps:t,handle:e,touched:y[i]},e.id))})}),(0,et.jsx)(Z,{left:!1,right:!1,children:({tracks:e,getTrackProps:t})=>(0,et.jsx)("div",{className:"slider-tracks",children:e.map(({id:e,source:a,target:i})=>(0,et.jsx)(ei,{backgroundColor:(0,q.Yc)()?"white":"black",getTrackProps:t,source:a,target:i},e))})})]}),(0,et.jsx)(W.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginTop:12,children:(0,et.jsx)(W.xv,{children:c||u._('Drag to change price', 'FeedFiltering.PriceFilter.PriceDragText', 'Area that instructs how to use price slider')})})]})}},925e3:(e,t,a)=>{"use strict";a.d(t,{Z:()=>e$});var i,n,l=a(554786),r=a(149722),s=a(167912),o=a(616550),c=a(883119),u=a(695238),d=a(140017),p=a(340523),m=a(603642),h=a(757640),g=a(689390),_=a(667294),y=a(702664),f=a(207229),v=a(214877),x=a(207012),b=a(213377),S=a(901855),k=a(406893),w=a(179425),P=a(734851),T=a(627408),E=a(160567),I=a(624797),C=a(494125);function j(e,t){let a=0,i=!1,n=-1;return e.forEach((e,l)=>{let{x:r=0,y:s=0,h:o=0,w:c=0}=e,u=function(e,t){let{x:a,y:i,w:n,h:l}=e,{x:r,y:s,w:o,h:c}=t,u=Math.max(a,r),d=Math.min(a+n,r+o),p=Math.max(i,s),m=Math.min(i+l,s+c),h=u<d&&p<m?(d-u)*(m-p):0;return h/(n*l+o*c-h)}(t,{x:r,y:s,h:o,w:c});u>=.9&&u>a&&(a=u,i=!0,n=l)}),{isCropAreaOnDotArea:i,dotIndexToHide:n}}var A=a(250790),F=a(40770),R=a(755453),O=a(801690),D=a(619033),L=a(771881),M=a(696534),Z=a(125768),N=a(785893);function K({handleBackClick:e,viewParameter:t,viewType:a}){let i=(0,M.vs)();return(0,N.jsx)(c.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,N.jsx)(Z.Z,{color:i?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:a})})}var z=a(587703),H=a(429218),U=a(585913),V=a(913574),$=a(49808),G=a(957435),B=a(336184);function W({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:i}){let n=(0,d.ZP)();return(0,N.jsx)(B.Z,{alt:n._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:i,naturalWidth:a,placeholder:t,showSpinner:!1,src:t})}let Y=e=>{let{alt:t,src:a,top:i,left:n}=e;return(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:i,left:n}},height:24,position:"absolute",width:24,children:(0,N.jsx)(c.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},q={backgroundColor:"#000000",opacity:"0.4"};function Q({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:i,w:n,h:l},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:u,onTouchMove:p,onTouchStart:m,pinDominantColor:h,showBackButton:g,viewParameter:_}){let y=(0,d.ZP)(),{closeupImageWidth:f,closeupImageHeight:v}=t,x=Math.floor(v*i),b=Math.floor(f*a),S=Math.floor(v*l),k=Math.floor(f*n),w=b+k,P=x+S;return(0,N.jsxs)(c.xu,{"data-test-id":"cropper-container",onTouchEnd:u,onTouchMove:p,onTouchStart:m,position:"relative",children:[(0,N.jsx)(W,{closeupImageHeight:v,closeupImageWidth:f,pinDominantColor:h,url:e??""}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:q},height:x,left:!0,position:"absolute",top:!0,width:"100%"}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...q,top:x}},height:S,left:!0,position:"absolute",width:b}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...q,top:x,left:w}},height:S,position:"absolute",right:!0}),(0,N.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...q,top:P}},left:!0,position:"absolute",width:"100%"}),g&&(0,N.jsx)(K,{handleBackClick:o,viewParameter:_,viewType:427}),!s&&(0,N.jsxs)(c.xu,{"data-test-id":"CropperHandles",children:[(0,N.jsx)(Y,{alt:y._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:b-9,src:$,top:x-9}),(0,N.jsx)(Y,{alt:y._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:w-15,src:G,top:x-9}),(0,N.jsx)(Y,{alt:y._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:b-9,src:U,top:P-15}),(0,N.jsx)(Y,{alt:y._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:w-15,src:V,top:P-15})]}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:x-2,left:b-2,border:r?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:S+4,position:"absolute",rounding:2,width:k+4})]})}var X=a(520846);function J({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:i,style:n,viewParameter:l,x:r,y:s}){let o=(0,d.ZP)(),u=(0,z.Z)();return(0,C.Z)(()=>{a&&u({aux_data:e,element:1221,event_type:120,view_parameter:l,view_type:72})}),(0,N.jsx)("div",{"aria-label":o._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...n},tabIndex:"0",children:(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,N.jsx)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var ee=a(922719);let et="flashlightDotPop",ea=(0,ee.Ll)([`
  ${et} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),ei=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${et} 0.3s ease-out ${t}s both`}};function en({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:i,onDotTap:n,pinId:l,pinImageSignature:r,setCropArea:s,shouldLogDotRender:o,showNoHalo:c,viewParameter:u,visualObjects:d,visualObjectToHide:p}){let m=(0,z.Z)();return(0,N.jsxs)(_.Fragment,{children:[(0,N.jsx)(k.Z,{unsafeCSS:ea}),d.map((h,g)=>{if(g===p)return null;let{x:_=0,y=0,w:f=0,h:v=0}=h,x={x:_,y,h:v,w:f},b=(0,X.Z)({cropArea:{x:_,y,w:f,h:v},scaledWidth:i,scaledHeight:t}),S=Math.floor(b.x+b.w/2),k=Math.floor(b.y+a+b.h/2),w=ei(g),P={pin_id:l,image_signature:r,visual_objects:JSON.stringify([x]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,N.jsx)(J,{auxData:P,onClick:function(){m({aux_data:P,element:1221,event_type:102,view_parameter:u,view_type:72}),n({cropArea:x,cropSource:4,visualObjects:d}),s?.(x)},shouldLogDotRender:o,showNoHalo:c,style:w,viewParameter:u,x:S,y:k-e},JSON.stringify(x))})]})}var el=a(174281);let er={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function es({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:i,handleChangeCloseupImageTop:n,handleCropperChange:l,headerHeight:r,inUnifiedFeedExp:s,pinDominantColor:o,pinId:u,pinImageSignature:d,showBackButton:p,viewParameter:m,visualObjects:h,visualObjectToHide:g}){let y=(0,z.Z)(),f=(0,_.useRef)(),[v,x]=(0,_.useState)(0),[b,S]=(0,_.useState)(0),[k,w]=(0,_.useState)(er.NONE),[P,T]=(0,_.useState)(a),{current:E}=(0,H.Z)(),{x:I,y:C,w:j,h:A}=P,{closeupImageTop:F,closeupImageMinTop:R,closeupImageWidth:O,closeupImageHeight:D,minCropperWidthRatio:L,minCropperHeightRatio:M}=t,Z=r||0,K=(e,t)=>{let a=t-F,i=e-(f.current?f.current.getBoundingClientRect().left:0),n=D*C,l=D*(C+A),r=O*I,s=O*(j+I);if(a>n+12&&a<l-12&&i>r+12&&i<s-12)return er.INSIDE;if(i<=r+12&&i>=r-12&&a>=n+15&&a<=l-15)return er.LEFT_CROPPER;if(i<=s+12&&i>=s-12&&a>=n+15&&a<=l-15)return er.RIGHT_CROPPER;if(i<=s-15&&i>=r+15&&a>=n-12&&a<=n+12)return er.TOP_CROPPER;if(i<=s-15&&i>=r+15&&a>=l-12&&a<=l+12)return er.BOTTOM_CROPPER;if(i<=r-9+24&&i>=r-12&&a>=n-12&&a<=n+24-9)return er.TOP_LEFT_HANDLE;if(i<=s+12&&i>=s-15&&a>=n-12&&a<=n+24-9)return er.TOP_RIGHT_HANDLE;else if(i<=r-9+24&&i>=r-12&&a>=l-15&&a<=l+12)return er.BOTTOM_LEFT_HANDLE;else if(i<=s+12&&i>=s-15&&a>=l-15&&a<=l+12)return er.BOTTOM_RIGHT_HANDLE;else return er.OUTSIDE};return(0,N.jsx)(c.kC,{justifyContent:"center",width:"100vw",children:(0,N.jsxs)(c.xu,{ref:f,dangerouslySetInlineStyle:{__style:{top:F,touchAction:"none"}},maxWidth:el.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,N.jsx)(Q,{closeupImageDims:t,closeupImageUrl:e,cropArea:P,handleBackClick:i,onTouchEnd:()=>{if(![er.NONE,er.OUTSIDE].includes(k)){let e=k===er.INSIDE?7603:7604;y({event_type:e,view_parameter:m,view_type:72}),l({cropArea:P,cropSource:6,visualObjects:h})}},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(x(t),S(a),k===er.NONE){let e=K(t,a);w(e)}if(null!=L&&null!=M&&null!=R){let e=a-b,i=t-v,l=i/O,r=e/D,s=Math.min(I+j-L,Math.max(0,I+l)),o=j+(I-s),c=Math.min(C+A-M,Math.max(0,C+r)),u=A+(C-c),d=Math.min(1-I,Math.max(L,j+l)),p=Math.min(1-C,Math.max(M,A+r));switch(k){case er.OUTSIDE:n(Math.floor(Math.max(R,Math.min(Z,F+e))));break;case er.INSIDE:T(e=>({...e,x:Math.max(0,Math.min(1-j,I+l)),y:Math.max(0,Math.min(1-A,C+r))}));break;case er.LEFT_CROPPER:T(e=>({...e,x:s,w:o}));break;case er.RIGHT_CROPPER:T(e=>({...e,w:d}));break;case er.TOP_CROPPER:T(e=>({...e,y:c,h:u}));break;case er.BOTTOM_CROPPER:T(e=>({...e,h:p}));break;case er.TOP_LEFT_HANDLE:T({x:s,w:o,y:c,h:u});break;case er.TOP_RIGHT_HANDLE:T(e=>({...e,w:d,y:c,h:u}));break;case er.BOTTOM_LEFT_HANDLE:T(e=>({...e,h:p,x:s,w:o}));break;case er.BOTTOM_RIGHT_HANDLE:T(e=>({...e,h:p,w:d}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];x(t),S(a),w(er.NONE)},pinDominantColor:o,showBackButton:p,viewParameter:m}),!!h.length&&0!==D&&0!==O&&(0,N.jsx)(c.xu,{"data-test-id":"FlashlightDots",children:(0,N.jsx)(en,{closeupImageTop:F,imageHeight:D,imageTop:F,imageWidth:O,onDotTap:l,pinId:u,pinImageSignature:d,setCropArea:T,shouldLogDotRender:!E,showNoHalo:s,viewParameter:m,visualObjects:h,visualObjectToHide:g})})]})})}var eo=a(254292),ec=a(676554);let eu=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var ed=a(944846),ep=a(670633),em=a(774812),eh=a(105737),eg=a(207993),e_=a(30378),ey=a(5859),ef=a(55202),ev=a(217058),ex=a(623409),eb=a(943484);function eS(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ek={modal:{baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}}},ew={NONE:0,UP:1,DOWN:2};class eP extends _.Component{constructor(...e){super(...e),eS(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:ew.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),eS(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:ew.NONE})}),eS(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:i}=this.state,{canMoveModal:n,maxDistanceFromTop:l}=this.props,r=t-a;n&&void 0!==l&&(r>0&&i>=0&&i<l&&window.scrollY<=0||r<0&&i<=l&&i>=0)&&this.setModalPosition(t)}),eS(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===ew.DOWN?(this.header&&e_.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,ev.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===ew.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&e_.Z.addObstruction("top",this.header),e&&(0,ev.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),eS(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:i,minDistanceFromTop:n}=this.props,{startY:l,currentDistanceFromTop:r}=this.state;a&&r<=(n||0)&&t-l>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:i,isAtTop:!1,scrollDirection:ew.NONE,shouldAnimate:!0,startY:0}))}),eS(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:i}=this.props,{currentDistanceFromTop:n,scrollDirection:l}=this.state;l===ew.NONE&&(n===e?(this.setState({canScrollOnChildren:i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,ev.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,ev.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),eS(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:i,maxDistanceFromTop:n,viewParameter:l,viewType:r}=this.props;e.stopPropagation(),a&&(i({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:l,view_type:r}),this.setState({currentDistanceFromTop:n,startY:0,scrollDirection:ew.NONE},()=>a(e)))}),eS(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:i}=this.state,{baseStyles:n}=ek.modal;return{...n,animation:"modalReveal 0.3s ease-out both",position:i?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),eS(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:i,snapToEndThreshold:n,entryPoint:l}=this.props;if(i){let r=e-t,s=Math.floor("CloseupShop"===l||"CloseUpMainPinDrawer"===l?Math.max(0,a+r):Math.min(i,Math.max(0,a+r))),o=ew.NONE;void 0!==n&&n>=0&&(r<0?o=s>Math.floor((1-n)*i)?ew.DOWN:ew.UP:r>0&&(o=s>Math.floor(n*i)?ew.DOWN:ew.UP)),this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&e_.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:i,cropSource:n,isOpen:l,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:c,entryPoint:u}=this.props,{currentDistanceFromTop:d}=this.state;if(l&&!e.isOpen?e_.Z.pause():!l&&e.isOpen&&e_.Z.resume(),"CloseUpMainPinDrawer"===u&&s<e.maxDistanceFromTop&&d>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&d===(c||0)&&o&&o(!0),a&&i&&(!(0,eh.ZP)(a,e.domainFilters)||!(0,eh.ZP)(i,e.priceFilters))){let e=(0,eb.Z)(n);r({event_type:13,view_parameter:"related_products"===e?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&e_.Z.removeObstruction("top",this.header),e&&e_.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,inUnifiedFeedExp:i,isOpen:n,isRTL:l,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:o,showHandle:u}=this.props,{headerHeight:d,canScrollOnChildren:p}=this.state,m=!p&&i?"32px 32px 0 0":"0";return n?(0,N.jsx)(ef.Z,{children:(0,N.jsx)(c.xu,{"aria-label":a,role:"dialog",children:(0,N.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:m}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,N.jsxs)(c.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,N.jsxs)(c.Le,{top:d||0,children:[u&&(0,N.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:m}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:eg.Z}),!s&&(0,N.jsxs)(c.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,N.jsxs)(c.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,N.jsx)(c.kC,{alignItems:"center",justifyContent:"start",children:(0,N.jsx)(c.hU,{accessibilityLabel:r||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,N.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight";return e?{[a]:38,[i]:50,marginTop:15,marginBottom:15}:{[a]:-10,[i]:50,marginTop:15,marginBottom:15}}({isRTL:l})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,N.jsx)(c.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!o&&(0,N.jsx)(c.iz,{})]})]}),(0,N.jsx)(c.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function eT(e){let t=(0,d.ZP)(),a=(0,z.Z)(),{isRTL:i}=(0,ey.B)(),n=(0,ex.Z)();return(0,N.jsx)(eP,{...e,i18n:t,isRTL:i,logContextEvent:a,trackInteraction:n})}let eE=`
  html, body {
    overscroll-behavior: none;
  }
`;function eI(){return Math.min(el.g6,window.innerWidth)}function eC(e,t){return Math.floor(eI()/t*e)}function ej(e,t){let a=0,i=0,n=0;if(e&&e.imageSpec_736x){let t=e?e.imageSpec_736x:null;a=eI(),i=eC(t?.height??1,t?.width??1),n=function(e,t){let a=Math.floor(.6*window.innerHeight);return Math.min(a,eC(e,t))}(t?.height??1,t?.width??1)}return{closeupImageWidth:a,closeupImageHeight:i,closeupImageMinTop:n-i,closeupImageTop:t||0,minCropperWidthRatio:a?50/a:0,minCropperHeightRatio:i?50/i:0,modalTop:n}}function eA(e,t,a,i,n){let l=a?Number(a):.4,r=i?Number(i):.1;e>0&&t>0&&(a||(l=(t-2*t*.1-n)/e),i||(r=.1*t/e));let s={h:l,y:r};return s}function eF({cropArea:e,cropSource:t,headerHeight:a,inUnifiedFeedExp:i,isShopTheLookFeed:n,pin:l,pinId:s,queryH:u,queryY:m,requestParams:h,searchResourceOptions:g,setCropSource:x,setState:E,state:I,surfaceType:A,visualSearchFlashlightUnifiedResource:F}){let M=(0,d.ZP)(),{logContextEvent:Z}=(0,v.v)(),z=(0,y.useDispatch)(),H=(0,o.k6)(),{previous:U}=(0,S.Hv)(),{checkExperiment:V}=(0,p.F)(),$=(0,o.TH)(),{isAuth:G}=(0,r.Z)(),{width:B=0}=(0,f.Z)()||{},W=(l?.visualObjects??[]).filter(e=>e.isStela),Y=(l?.visualObjects??[]).filter(e=>!!e.label),q=W.length>0||Y.length>0,Q=q&&(V("mweb_flashlight_show_more_stela_dots").anyEnabled||V("mweb_flashlight_show_more_stela_dots_expansion").anyEnabled?W:Y)||[],X=Q.map(e=>{let{isStela:t,title:a,label:i,labelId:n,labelX:l,labelY:r,maxAnnotationNumDocuments:s,score:o,showOnCloseup:c,x:u,y:d,h:p,w:m}=e;return{is_stela:t??!1,title:a??"",label:i??"",label_id:n??"",label_x:l??0,label_y:r??0,max_annotation_num_documents:s??0,score:o??0,show_on_closeup:c??!1,x:u??0,y:d??0,h:p??0,w:m??0}}),[J,ee]=(0,_.useState)(j(X,e)),{isCropAreaOnDotArea:et,dotIndexToHide:ea}=J,ei=e=>z((0,ed.By)(e)),en=e=>z(eu(e)),{data:el,fetchMore:er,isAtEnd:eh,isFetching:eg,isLoaded:e_}=F||{},ey=el?.results||[],ef=ey.find(e=>"story"===e.type),ev=!!ef&&"stl"!==A,ex=ey.flatMap(e=>"pin"===e.type?e:[]),{url:eb=`/pin/${s}`,text:eS=""}=ef?.action||{},ek=M._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.'),ew=M._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),eP=M._('Shop the look', 'mobileFlashlight.shopTheLookFeedTitle', 'Shop the look for similar products from the cropped image.'),eI=M._('Visual search', 'Visual search results', 'Visual search results'),eC=i||n,{closeupImageWidth:eF,modalTop:eR}=I.closeupImageDims,eO=l?.imageSpec_736x?.url??"",eD=B-60<eF&&eC;function eL(){if(0===U.length){H.replace(`/pin/${s}/`);return}H.goBack()}let[eM,eZ]=(0,_.useState)(0),[eN,eK]=(0,_.useState)(0),[ez,eH]=(0,_.useState)(!1),[eU,eV]=(0,_.useState)(!1),[e$,eG]=(0,_.useState)(void 0);function eB(){eV(!1),eH(!1),eG(void 0)}function eW(e,t){"vertical"!==t&&e.stopPropagation()}let eY=!!l,eq=(0,_.useMemo)(()=>ej(l,a),[l?.entityId,a]);if((0,_.useEffect)(()=>{if(eY){let{closeupImageHeight:e,modalTop:t=0}=eq,i=eA(e,t,Number(u),Number(m),a||0);E(e=>({...e,closeupImageDims:eq,...i}))}},[eY,eq]),(0,C.Z)(()=>{en(t)}),!l||0===eR)return null;let{auxData:eQ,viewType:eX,viewParameter:eJ}=function({cropSource:e,inUnifiedFeedExp:t,isCropAreaOnDotArea:a,isProductPage:i,surfaceType:n}){let l=t||"stl"===n,r=4===e||a,s=i?"product":"stl"===n?r?"product":"organic":t&&r?"unified":"organic",o=(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===s?e(!0):"unified"===s?e(!1):l?e(!1):void 0})();return{auxData:o,viewType:"product"===s?427:72,viewParameter:"organic"===s?3050:3462}}({cropSource:t,inUnifiedFeedExp:i,isCropAreaOnDotArea:et,isProductPage:!1,surfaceType:A});function e0(){Z({component:14339,element:179,event_type:102,view_parameter:eJ,view_type:eX})}return(0,N.jsxs)(_.Fragment,{children:[(0,N.jsx)(k.Z,{unsafeCSS:eE}),(0,N.jsx)(O.Z,{auxData:eQ,viewParameter:eJ,viewType:eX,children:(0,N.jsx)(T.Z,{view:eX,children:(0,N.jsxs)(w.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,N.jsx)(eo.Z,{text:M._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,N.jsx)(c.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,N.jsx)(es,{closeupImageDims:I.closeupImageDims,closeupImageUrl:eO,cropArea:e,handleBackClick:eL,handleChangeCloseupImageTop:function(e){E(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:a}){en(t),ei(s),ee(j(a,e)),x(t),E(t=>({...t,...e})),H.replace((0,R.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:s,requestParams:h,surfaceType:A}))},headerHeight:a,inUnifiedFeedExp:eC,pinDominantColor:l.dominantColor||"#efefef",pinId:s,pinImageSignature:l.imageSignature,showBackButton:eD,viewParameter:eJ,visualObjects:X,visualObjectToHide:ea}),!eD&&eC&&(0,N.jsx)(K,{handleBackClick:eL,viewParameter:eJ,viewType:427}),(0,N.jsxs)(eT,{canMoveModal:!0,cropSource:t,entryPoint:"flashlight",headerHeight:a,heading:eI,inUnifiedFeedExp:eC,isOpen:!0,location:$,maxDistanceFromTop:eR||0,minDistanceFromTop:G?60:a,mobileAccessibilityCloseIconLabel:M._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:eC,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eL,pinId:s,shouldSnapToEnds:!0,showHandle:eC,snapToEndThreshold:.3,viewParameter:eJ,viewType:eX,children:[(0,N.jsx)(c.$j,{accessibilityLabel:M._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:eC&&!e_}),eC&&e_&&(0,N.jsxs)(_.Fragment,{children:[ev&&(0,N.jsxs)(_.Fragment,{children:[(0,N.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,N.jsx)(c.Tg,{href:eb,onTap:({event:e})=>{e.stopPropagation(),e0()},tapStyle:"compress",children:(0,N.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:ek})}),(0,N.jsx)(c.I_,{accessibilityLabel:eS||M._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:eb,icon:"arrow-forward",iconColor:"darkGray",onClick:e0,size:"sm"})]}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:function(e){eW(e,e$),eB()},onTouchMove:function(e){let{clientX:t,clientY:a}=e.touches[0];Math.abs(a-eN)>10&&eH(!0),Math.abs(t-eM)>10&&eV(!0),eU&&ez?eG(e=>e||"vertical"):eU?eG(e=>e||"horizontal"):ez?eG(e=>e||"vertical"):eG(void 0),eW(e,e$)},onTouchStart:function(e){let{clientX:t,clientY:a}=e.touches[0];eZ(t),eK(a),eB()},children:(0,N.jsx)(P.default,{component:14339,disableHeader:!0,story:ef,storyGraphqlRef:null,surface:"ShoppingDynamicHeightGrid",view:eX,viewParameter:eJ})})]}),(0,N.jsx)(c.xu,{marginBottom:3,paddingX:4,children:(0,N.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:n?eP:ew})}),(0,N.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:b.D6,children:(0,N.jsx)(em.Z,{feedItems:ex,feedKey:(0,ep.J)("VisualSearchFlashlightUnifiedResource",g)??"",pagination:{loadNext:er||(()=>void 0),hasNext:!eh,isLoadingNext:eg||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,N.jsx)(L.cn,{children:(0,N.jsx)(ec.ZP,{auxData:eQ,componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,trafficSource:n?"shop_feed":void 0,viewParameter:eJ,viewType:eX})})})})]}),!eC&&(0,N.jsx)(c.xu,{color:"default",paddingX:b.D6,children:(0,N.jsx)(D.ZP,{feedItemProps:{viewParameter:eJ,viewType:eX},feedKey:(0,ep.J)("VisualLiveSearchResource",g)??"",resourceConfig:{name:"VisualLiveSearchResource",options:g},trafficSource:"flashlight"})})]})]})})})]})}function eR(e){let{searchResourceOptions:t}=e,a=(0,h.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,N.jsx)(eF,{...e,visualSearchFlashlightUnifiedResource:a})}let eO=void 0!==i?i:i=a(990563);function eD({pinKey:e}){let{checkExperiment:t}=(0,p.F)(),a=t("mweb_flashlight_unified_feed").anyEnabled||t("mweb_unified_visual_features_expansion").anyEnabled,i=(0,o.$B)(),{pinId:n}=(0,g.Z)(i.params.id||""),s=(0,o.TH)(),c=(0,I.mB)(s.search),{cropSource:u,x:d,y:m,h,w:y,surfaceType:f,requestParams:v}=c,b=f||"flashlight",{isAuth:S}=(0,r.Z)(),k=(0,l.ZP)(),w=!S&&(0,E.x9)(k)||void 0,P=(0,x.Z)(eO,e),[T,C]=(0,_.useState)(()=>{let e=ej(P,w);e.closeupImageTop=0;let{closeupImageHeight:t,modalTop:a=0}=e,i=eA(t,a,Number(h),Number(m),w||0);return{closeupImageDims:e,x:d?Number(d):.1,w:y?Number(y):.8,y:i.y,h:i.h}}),[j,R]=(0,_.useState)(()=>{let e=(0,A.Z)(Number(u));return e||(d&&m&&h&&y?6:5)}),O={x:T.x,y:T.y,w:T.w,h:T.h},D="stl"===b&&4===j,L=(0,F.Z)({cropSource:j,isProductPage:!1,surfaceType:b}),M={cropArea:O,cropSource:j,headerHeight:w,inUnifiedFeedExp:a,isShopTheLookFeed:D,pin:P,pinId:n,queryH:h,queryY:m,requestParams:v,searchResourceOptions:{pin_id:n,crop:O,crop_source:j,is_shopping:D,entry_source:D?"shopping":"flashlight",entrypoint:L},setCropSource:R,setState:C,state:T,surfaceType:b};return a||D?(0,N.jsx)(eR,{...M}):(0,N.jsx)(eF,{...M})}var eL=a(19447);let eM=void 0!==n?n:n=a(853512);function eZ(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function eN(e){return e?.map(e=>({id:e.itemId??"",additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:a})=>{t.push(...function({additionalImages:e,spec:t}){let a=[];return e?.forEach(e=>{e.canonicalImage&&a.push({canonical_images:{[t]:eZ(e.canonicalImage)},image_signature:e.imageSignature??""})}),a}({additionalImages:e,spec:a})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[]}))}function eK(e){let t={};return e.forEach(({image:e,spec:a})=>{e&&(t[a]=eZ(e))}),t}let ez=(0,u.Z)({useGraphQLAdapter:function({pinId:e}){var t,a,i,n,l;let r=(0,s.useLazyLoadQuery)(eM,{pinId:e}),o=r.v3GetPinQuery?.data;if(!o)return null;let c={id:o.entityId??"",dominant_color:o.dominantColor??"",image_signature:o.imageSignature??"",visual_objects:(t=o.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:e.labelId??"",label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:eK([{image:o.imageOrig,spec:"orig"},{image:o.image736x,spec:"736x"},{image:o.image564x,spec:"564x"},{image:o.image474x,spec:"474x"},{image:o.image236x,spec:"236x"}])??{},rich_metadata:(a=o.richMetadata,{products:eN(a?.products)??[]}),rich_summary:(i=o.richSummary,{products:eN(i?.products)??[]}),carousel_data:(n=o.carouselData,{carousel_slots:(l=n?.carouselSlots,l?.map(e=>({image_signature:e.imageSignature??"",images:eK([{image:e.imageOrig,spec:"orig"},{image:e.image736x,spec:"736x"},{image:e.image564x,spec:"564x"},{image:e.image474x,spec:"474x"},{image:e.image236x,spec:"236x"}])??{}}))??[]),index:n?.index??0}),type:"pin"};return{pin:c}},useLegacyAdapter:function({pinId:e}){let{data:t}=(0,h.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,eL.S6)()(e),i=t??a;return i?{pin:i}:null}});function eH(){let{checkExperiment:e}=(0,p.F)(),t=(0,d.ZP)(),a=(0,o.$B)(),{pinId:i}=(0,g.Z)(a.params.id||"");return(0,N.jsx)(m.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,N.jsx)(ez,{input:e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:i},suspense:{fallback:(0,N.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:i}},children:({data:e})=>!!e&&(0,N.jsx)(eD,{pinKey:null!=e.pin?{type:"deprecated",data:e.pin}:null})})})}var eU=a(270766),eV=a(729473);let e$=function(){let e=(0,l.HG)(),t=(0,r.Z)();return e?t.isAuth?(0,N.jsx)(eV.Z,{}):(0,N.jsx)(eU.Z,{}):(0,N.jsx)(eH,{})}},706196:(e,t,a)=>{"use strict";function i(e){let[t,a]=e.split(/\/(.*)+/);return{filepath:a,site:t}}function n(e,t){return t?`${e||""}/${t}`:`/${e||""}`}a.d(t,{ac:()=>i,ke:()=>n})},84768:(e,t,a)=>{"use strict";a.d(t,{MM:()=>r,uo:()=>s,wH:()=>l});var i=a(342513),n=a(706196);let{Provider:l,useHook:r}=(0,i.Z)("HandlerId");function s(){let e=r();return(0,n.ac)(e).site}},118923:(e,t,a)=>{"use strict";a.d(t,{P:()=>r,b:()=>s});var i=a(340523),n=a(5859),l=a(528252);function r({checkExperiment:e,isAuthenticated:t,isEarlyHydrationEnabled:a}){return a||!!e&&e(t?"web_auth_lazy_component":"web_unauth_lazy_component").anyEnabled}function s(){let{checkExperiment:e}=(0,i.F)(),{isAuthenticated:t}=(0,n.B)(),a=(0,l.z5)();return r({checkExperiment:e,isAuthenticated:t,isEarlyHydrationEnabled:a})}},832853:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(667294),n=a(14583),l=a(342513);let{Provider:r,useMaybeHook:s}=(0,l.Z)("LazyComponent");var o=a(785893);function c(e,t,a){let l,r,c;let u=!!(t?.ssr??!0),d=u?i.Suspense:n.Z,p=a=>{s(),t?.dynamicRequestKey,r||(r=(0,i.lazy)(()=>e(a)));let n=(0,i.useRef)(l??r),c=n.current;return(0,o.jsx)(d,{fallback:a.fallback||t?.fallback,children:(0,o.jsx)(c,{...a})})};function m(t){return c||(c=(async()=>{let a=await e(t);return l=a.default})()),c}return p.preload=e=>{m(e)},p.load=e=>m(e),p}},528252:(e,t,a)=>{"use strict";a.d(t,{DB:()=>s,SS:()=>l,WP:()=>n,z5:()=>r});var i=a(667294);let n=(0,i.createContext)({anyEnabled:!1,group:""});function l({experimentsClient:e,isAuthenticated:t}){return e?.checkExperiment(t?"web_early_hydration_auth":"web_early_hydration_unauth")??{anyEnabled:!1,group:""}}function r(){return(0,i.useContext)(n).anyEnabled}function s(){return(0,i.useContext)(n)}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,16550,24797,55169,76594,11930,33,8575,97315,99010,70767,70633,22987,80095,81592,71980,42858,34851,98197,25576,19374,15071],()=>t(706737)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-ffb3f423b906455c.mjs.map